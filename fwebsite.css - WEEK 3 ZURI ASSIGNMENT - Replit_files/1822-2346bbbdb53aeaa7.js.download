"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1822,3699],{74591:function(e,n,r){var t=r(35944),i=(r(67294),r(69346)),l=r(1144),a=r(81255),o=r(15085),u=r(57704);n.Z=function(e){return(0,t.BX)(i.Z,{css:[a.l0.colWithGap(24)],children:[(0,t.BX)(l.h,{variant:"headerDefault",level:2,children:["Delete ",e.name||e.entityType,"?"]}),(0,t.BX)(l.x,{multiline:!0,children:["Are you sure you want to delete"," ",e.description?e.description:"this ".concat(e.entityType),"? This cannot be undone."]}),(0,t.BX)(i.Z,{css:[a.l0.rowWithGap(12),a.l0.justify.end],children:[(0,t.tZ)(o.zx,{text:"Cancel",onClick:e.hideModal}),(0,t.tZ)(o.zx,{dataCy:"delete-modal-confirm-button",iconLeft:(0,t.tZ)(u.Z,{}),onClick:function(){e.delete(),e.hideModal()},text:"Yes, delete ".concat(e.confirmDescription?e.confirmDescription:"this ".concat(e.entityType)),colorway:"negative"})]})]})}},60368:function(e,n,r){var t=r(35944),i=r(60536),l=r.n(i);r(67294);n.Z=function(e){var n=e.maxLength,r=void 0===n?140:n,i=e.value,a=void 0===i?"":i,o=e.hideLabel,u=void 0!==o&&o;return(0,t.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[a.length," / ",r," ",u?"":"characters",(0,t.tZ)(l(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},80658:function(e,n,r){r.d(n,{Z:function(){return C}});var t=r(26042),i=r(69396),l=r(10253),a=r(35944),o=r(67294),u=r(92876),c=r(30992),s=r(15085),d=r(98967),p=r(83074),h=r(58086),v=r(37424),f=r(60368),m=r(14455),g=r(9836),Z=r(30168),y=r(94412),b=r(7297),x=r(31230),R=r(97212),w=r(37887);function k(){var e=(0,b.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}var B={},E=(0,x.Ps)(k(),R.s,R.a);var _=r(99383),P=function(e){var n=e.onFork,r=e.hideModal,t=e.initialTitle,i=e.initialDescription,u=void 0===i?"":i,d=e.initialPrivacy,b=e.teamContext,x=e.currentUser,R=o.useRef(null),w=(0,v.H)(),k=(0,l.Z)((0,g.Y)(x,b),2),B=k[0],E=k[1],P=(0,l.Z)((0,_.c)(B,x,d||!1),3),C=P[0],T=P[1],G=P[2],X=(0,c.Y)(t,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}})),U=(0,c.Y)(u,(function(e){if(e&&e.length>h.p)return{message:"Must be no longer than ".concat(h.p," characters")}}));o.useEffect((function(){R.current&&R.current.focus()}),[R]);var I="Team"===B.__typename?B.id:null;return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),X.validate()||U.validate()||(n(I,X.value,U.value,C),r())},children:(0,a.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,a.tZ)(s.h4,{variant:"headerDefault",level:2,children:"Fork Repl"}),(0,a.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,a.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,a.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,a.tZ)(m._,{for:w("name"),children:"Name"}),(0,a.tZ)(f.Z,{maxLength:60,value:X.value,hideLabel:!0})]}),(0,a.tZ)(s.II,{ref:R,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return X.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:X.value,onBlur:X.handleBlur,id:w("name")}),X.error?(0,a.tZ)(s.xv,{css:[s.l0.color.accentNegativeStronger],children:X.error.message}):null]}),(0,a.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,a.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,a.tZ)(m._,{for:w("description"),children:"Description"}),(0,a.tZ)(f.Z,{maxLength:h.p,value:U.value,hideLabel:!0})]}),(0,a.tZ)(s.B,{maxLength:h.p,value:U.value,onChange:function(e){return U.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[s.l0.minHeight(96),s.l0.maxHeight(128),{resize:"vertical"}],id:w("description")})]}),(0,a.tZ)(y.P,{context:"fork_modal",isPrivate:C,setIsPrivate:T,privacyState:G})]}),x.teams.length>0?(0,a.BX)(s.G7,{css:[s.l0.colWithGap(8)],children:[(0,a.tZ)(m._,{for:w("owner"),children:"Owner"}),(0,a.tZ)(Z.Z,{id:w("owner"),currentUser:x,initialSelectedUsername:B.username,onChange:function(e){return E(e.username)}})]}):null,(0,a.BX)(s.G7,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,a.tZ)(s.zx,{onClick:r,text:"Cancel",type:"button"}),(0,a.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:Boolean(X.error||U.error),text:"Fork Repl",iconLeft:(0,a.tZ)(p.Z,{})})]})]})})};function C(e){var n=function(e){var n=(0,t.Z)({},B,e);return w.a(E,n)}({fetchPolicy:"cache-and-network",onError:function(e){u.$e((function(n){n.setTag("fork-modal",!0),u.Tb(e)}))}}),r=n.data,l=n.loading,o=n.error;if(l)return(0,a.tZ)(s.xv,{color:"dimmer",children:"Loading..."});if(o)return(0,a.tZ)(s.xv,{children:"Something went wrong."});if(!r)return null;var c=r.currentUser;return c?(0,a.tZ)(P,(0,i.Z)((0,t.Z)({},e),{currentUser:c})):(0,a.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},59292:function(e,n,r){r.d(n,{Z:function(){return y}});var t=r(26042),i=r(69396),l=r(10253),a=r(67294),o=r(11163),u=r(93058),c=r(7297),s=r(31230),d=r(50319);function p(){var e=(0,c.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,s.Ps)(p());function f(e){var n=(0,t.Z)({},h,e);return d.D(v,n)}var m=r(33400),g=r(60977),Z=r(15935);function y(){var e,n,r,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=c.onFork,d=c.onError,p=(0,o.useRouter)(),h=(0,u.Z)().showError,v=(0,m.Z)(),y=(0,l.Z)(f({onCompleted:function(e){var n="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(n)if(s&&s(e),"/replEnvironment2"!==p.pathname&&"/replEnvironmentMobile"!==p.pathname)p.push({pathname:v,query:{replUrl:n.url}},{pathname:n.url});else{var r=n.url+(p.query.lite?"?lite=".concat(p.query.lite.toString()):"");window.location.href=r}}}),2),b=y[0],x=y[1],R="UserError"===(null===(e=x.data)||void 0===e?void 0:e.createRepl.__typename)?null===(n=x.data)||void 0===n?void 0:n.createRepl.message:null===(r=x.error)||void 0===r?void 0:r.message;a.useEffect((function(){R&&(h(R),d&&d())}),[R,h,d]);var w=a.useCallback((function(e){var n=e.originId,r=e.replReleaseId,l=e.teamId,a=e.title,o=e.description,u=e.isPrivate,c=e.trackingData,s=e.forkToPersonal;b({variables:{input:{originId:n,replReleaseId:r,teamId:l,title:a,isPrivate:u,description:o,forkToPersonal:s,gitRemoteUrl:""}}}).then((function(e){var n,l,a,o,u,s,d,p="Repl"===(null===(n=e.data)||void 0===n?void 0:n.createRepl.__typename)?e.data.createRepl:null;p&&(0,g.j)(g.U3.REPL_CREATED,(0,i.Z)((0,t.Z)({isSignup:!1,isOnboarding:!1},c),{isForked:!0,isPrivate:p.isPrivate,replId:p.id,isRenamed:!1,language:p.language,isSelfForked:!!(null===(l=p.origin)||void 0===l?void 0:l.isOwner),isTemplateFork:Boolean(r),templateReplId:(null===(a=p.source)||void 0===a||null===(o=a.release)||void 0===o||null===(u=o.repl)||void 0===u?void 0:u.id)||void 0,templateType:(null===(s=p.source)||void 0===s||null===(d=s.release)||void 0===d?void 0:d.repl)?(0,Z.lw)(p.source.release.repl):void 0}))}))}),[b]),k=!!(x.loading||x.data&&"Repl"===x.data.createRepl.__typename);return[w,{loading:k}]}},18332:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(10253),i=r(29815),l=r(67294),a=r(24351),o=r(26042),u=r(69396),c=function(e){return/\s/.test(e)};function s(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=(0,t.Z)(l.useState(null),2),a=i[0],s=i[1],d=l.useCallback(s,[s]),p=l.useRef(n);l.useEffect((function(){p.current=n}),[n]);var h=(0,t.Z)(l.useState(null),2),v=h[0],f=h[1];return l.useEffect((function(){if(a){var e=function(){var e=a.value,n=a.selectionStart;if(n){var r=1===n||c(e[n-2]||""),t=e.length?e[n-1]:null;f((function(i){if(i&&(n<i.index||0===n))return null;if(!t)return i;if(!i&&!r)return i;var l=p.current.includes(t);return i||l?i?c(t)?null:(0,u.Z)((0,o.Z)({},i),{text:e.slice(i.index,n)}):{index:n,text:"",match:t}:i}))}else f(null)},n=function(){f(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",n),function(){f(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",n)}}}),[a,f]),[v,d]}function d(e){var n=l.useRef(e);l.useEffect((function(){n.current=e}),[e]);var r=(0,t.Z)(l.useState(!1),2),o=r[0],u=r[1],c=(0,t.Z)(l.useState(null),2),d=c[0],p=c[1],h=(0,t.Z)(s.apply(void 0,(0,i.Z)(Object.keys(e))),2),v=h[0],f=h[1],m=l.useRef(v);l.useEffect((function(){m.current=v}),[v]);var g=(0,a.Z)(v,100);return l.useEffect((function(){if(g){var e=g.match,r=g.text,t=n.current[e]?n.current[e]:null;if(t){var i=!1;return u(!0),t(r).then((function(e){i||m.current===g&&(u(!1),p({textTrigger:g,results:e,applySuggestion:function(e){var n=e.targetValue,r=e.suggestionValue,t=n.slice(0,g.index),i=r,l=n.slice(g.index+g.text.length);l&&l.startsWith(" ")||(i+=" ");var a=t+i+l;return{cursorIndex:(t+i).length+(l&&l.startsWith(" ")?1:0),fullValue:a}}}))})),function(){i=!0}}p(null)}else p(null)}),[g,p]),[{isLoading:o,suggestions:d},f]}},6600:function(e,n,r){r.d(n,{Z:function(){return B}});var t=r(47568),i=r(34051),l=r.n(i),a=r(35944),o=r(67294),u=r(15085),c=r(37424),s=r(1144),d=r(93160),p=r(69346),h=r(81255),v=r(33773);function f(){var e=(0,o.useState)(!1),n=e[0],r=e[1];return(0,a.BX)(d.Z,{background:n?"higher":"default",css:[h.l0.borderRadius(8),h.l0.colWithGap(16),h.l0.p(8)],children:[(0,a.BX)(p.Z,{css:[h.l0.colWithGap(8)],children:[(0,a.BX)(p.Z,{onClick:function(){return r(!n)},css:[h.l0.rowWithGap(8),{cursor:"pointer"}],children:[(0,a.tZ)(s.x,{children:"Style your post with Markdown"}),(0,a.tZ)(v.Z,{rotate:n?0:270})]}),n?(0,a.tZ)(s.x,{color:"dimmer",multiline:!0,children:"You can style your post with a limited set of Markdown. Here are some supported content types:"}):null]}),n?(0,a.BX)(a.HY,{children:[(0,a.BX)(p.Z,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(s.x,{children:"Bold Text"}),(0,a.tZ)(s.x,{color:"dimmer",children:"**bold**"})]}),(0,a.BX)(p.Z,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(s.x,{children:"Italic Text"}),(0,a.tZ)(s.x,{color:"dimmer",children:"__italic__"})]}),(0,a.BX)(p.Z,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(s.x,{children:"Links"}),(0,a.tZ)(s.x,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,a.BX)(p.Z,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(s.x,{children:"Images"}),(0,a.tZ)(s.x,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,a.BX)(p.Z,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(s.x,{children:"Code Blocks"}),(0,a.BX)(s.x,{color:"dimmer",children:["```",(0,a.tZ)("br",{}),"this is for large, multiline code blocks",(0,a.tZ)("br",{}),"```"]})]}),(0,a.BX)(p.Z,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(s.x,{children:"Inline Code"}),(0,a.tZ)(s.x,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]})]}):null]})}var m=r(90317),g=r(30992),Z=r(88961),y=r(19244),b=r(60977),x=r(75026),R=u.KD.form;function w(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function k(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function B(e){var n,r,i=e.repl,o=e.source,s=e.onDone,d=(0,c.H)(),p=d("titleIdInput"),h=d("descriptionIdInput"),v=(0,g.Y)("",w),B=(0,g.Y)("",k),E=(0,y.O)();return(0,a.BX)(R,{onSubmit:function(){var e=(0,t.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!v.validate()&&!B.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,E.publish({input:{replId:i.id,title:v.value,body:B.value}});case 5:e.sent.error||((0,b.j)(b.U3.UPDATE_SHARED,{source:o,replType:i.publishedAs===m.O2.Template?"template_repl":"regular_repl"}),s());case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),css:[u.l0.colWithGap(16)],children:[(0,a.tZ)(u.h4,{level:2,variant:"subheadBig",children:"Add an update"}),(0,a.BX)(u.xv,{children:["Explain what has changed about this"," ",i.publishedAs===m.O2.Template?"Template":"Repl","."]}),(0,a.BX)(u.G7,{css:u.l0.colWithGap(8),children:[(0,a.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:p,children:"Title"}),(0,a.tZ)(u.II,{id:p,onChange:function(e){v.setValue(e.target.value)},disabled:E.loading,placeholder:"Give your post a title"}),v.error?(0,a.tZ)(u.E_,{icon:(0,a.tZ)(Z.Z,{}),text:null===(n=v.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,a.BX)(u.G7,{css:u.l0.colWithGap(8),children:[(0,a.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:h,children:"Description"}),(0,a.tZ)(u.B,{id:h,onChange:function(e){B.setValue(e.target.value)},css:[u.l0.width("100%"),{minHeight:u.TV.space128,maxHeight:u.TV.space256,resize:"vertical",lineHeight:u.TV.lineHeightDefault}],disabled:E.loading,placeholder:"Write something about this post"}),B.error?(0,a.tZ)(u.E_,{icon:(0,a.tZ)(Z.Z,{}),text:null===(r=B.error)||void 0===r?void 0:r.message,colorway:"negative"}):null]}),(0,a.tZ)(f,{}),E.error?(0,a.tZ)(u.E_,{icon:(0,a.tZ)(Z.Z,{}),colorway:"negative",text:E.error}):null,(0,a.tZ)(u.zx,{text:E.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(E.loading||v.error||B.error),css:{alignSelf:"end"},iconLeft:(0,a.tZ)(x.Z,{})})]})}},19244:function(e,n,r){r.d(n,{O:function(){return m}});var t=r(47568),i=r(10253),l=r(34051),a=r.n(l),o=r(26042),u=r(7297),c=r(31230),s=r(15764),d=r(50319);function p(){var e=(0,u.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h={},v=(0,c.Ps)(p(),s.FW);function f(e){var n,r,t,i,l,a,o;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(n=e.data)||void 0===n||null===(r=n.createReplPost2)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(t=e.data)||void 0===t||null===(i=t.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(l=e.data)||void 0===l||null===(a=l.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(o=e.data)||void 0===o?void 0:o.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function m(){var e=(0,i.Z)(function(e){var n=(0,o.Z)({},h,e);return d.D(v,n)}(),2),n=e[0],r=e[1],l=function(){var e=(0,t.Z)(a().mark((function e(t){var i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.input,!r.loading){e.next=3;break}return e.abrupt("return",{data:null,error:null});case 3:return e.prev=3,e.next=6,n({variables:{input:i}});case 6:return l=e.sent,e.abrupt("return",{data:l.data,error:f(l)});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{data:null,error:"Something went wrong publishing your Repl"});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(n){return e.apply(this,arguments)}}();return{publish:l,data:r.data,loading:r.loading,error:f(r)}}},49483:function(e,n,r){r.d(n,{W:function(){return v},Z:function(){return f}});var t=r(35944),i=r(67294),l=r(53427),a=r(64080),o=r(77365),u=r(60459),c=r(69346),s=r(93160),d=r(49619),p=r(81255),h=r(62722);function v(e){var n=(0,i.useState)(null),r=n[0],t=n[1],l=(0,i.useState)(null),a=l[0],o=l[1],c=(0,u.Z)({onUpload:function(n){var r=n.url;t(null),e(r)},onUploadPreview:function(e){var n=e.dataUrl;o(null),t(n)},onError:function(e){t(null),o(e.message)}}),s=(0,i.useCallback)((function(){return o(null)}),[]);return{uploadImage:c.uploadImage,error:a,clearError:s,previewUrl:r}}function f(e){var n=(0,i.useRef)(null),r=e.size||48;return(0,t.BX)(c.Z,{css:[p.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,t.BX)(t.HY,{children:[(0,t.tZ)(l.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,t.tZ)(s.Z,{className:"surface",elevated:!0,css:[p.l0.borderRadius(8),p.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,t.tZ)(c.Z,{className:"icon",css:[p.l0.coverContainer,p.l0.center,p.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,t.tZ)(o.Z,{}):(0,t.tZ)(a.Z,{})})]}):(0,t.tZ)(c.Z,{css:[p.l0.center,p.l0.width(r),p.l0.height(r),p.l0.borderRadius(8),p.l0.color.foregroundDimmer,{border:"1px dashed "+p.TV.outlineDefault,"&:hover":{color:p.TV.accentPrimaryDefault,borderColor:p.TV.accentPrimaryDefault}}],children:(0,t.tZ)(d.Z,{})}),(0,t.tZ)("input",{css:[[p.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:n,accept:h.W9.join(","),type:"file",onChange:function(n){var r=n.target,t=r.validity,i=r.files;if(t.valid){var l=i?i[0]:null;l&&e.onUpload(l)}}})]})}},58086:function(e,n,r){r.d(n,{p:function(){return t}});var t=1e3}}]);
//# sourceMappingURL=1822-2346bbbdb53aeaa7.js.map