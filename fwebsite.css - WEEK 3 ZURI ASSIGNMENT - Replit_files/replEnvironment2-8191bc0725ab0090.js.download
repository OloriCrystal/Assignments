(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9460],{60937:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment2",function(){return t(65348)}])},42699:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(60977),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},21767:function(e,n,t){"use strict";t.d(n,{Y:function(){return o}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment ReplLinkRepl on Repl {\n    id\n    url\n    nextPagePathname\n  }\n"]);return i=function(){return e},e}var o=(0,t(31230).Ps)(i())},52008:function(e,n,t){"use strict";t.d(n,{JM:function(){return p},SL:function(){return s}});var r=t(26042),i=t(7297),o=t(31230),a=t(37887);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUserLayoutFlags on CurrentUser {\n    id\n    flagSaveLayoutState: gate(feature: "flag-save-layout-state")\n    flagGhostrunner: gate(feature: "flag-ghostrunner")\n    flagLayoutNavigator: gate(feature: "flag-layout-navigator")\n  }\n']);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ReplEnvironment2LayoutFlags {\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUserLayoutFlags\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function p(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},79611:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),i=t(11163);function o(e,n){var t=(0,i.useRouter)();(0,r.useEffect)((function(){}),[e,t]),(0,r.useEffect)((function(){if("SubscriptionExpiredError"===(null===e||void 0===e?void 0:e.__typename)){var r=e.replId,i=e.isOwner,o=n.split("/")[1].slice(1);t.replace({pathname:"/expiredPrivateRepl",query:{isOwner:i,ownerUsername:o,replId:r}},t.asPath)}}),[e,t,n])}},19923:function(e,n,t){"use strict";t.d(n,{Gp:function(){return U},Oh:function(){return Y},V3:function(){return O},Xl:function(){return j},Yd:function(){return z},_b:function(){return K},gX:function(){return ne},h2:function(){return N},on:function(){return _},q7:function(){return J},vs:function(){return T},w9:function(){return H},zp:function(){return $}});var r=t(26042),i=t(7297),o=t(31230),a=t(7900),l=t(37887),c=t(50319);function u(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    description\n    slug\n    timeCreated\n    url\n    pinnedToProfile\n    nextPagePathname\n    templateInfo {\n      label\n      iconUrl\n    }\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(['\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    needsMigrationToStacks\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n    hideTeamRepls: gate(\n      feature: "flag-filter-team-repls"\n      subscriptionType: EDUCATION\n    )\n  }\n  ',"\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function y(){var e=(0,i.Z)(["\n  mutation TeamProProfilePinRepl($replId: String!) {\n    pinReplToProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation TeamProProfileUnpinRepl($replId: String!) {\n    unpinReplFromProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation TeamProfileMigrateTeamToStacks($teamId: Int!) {\n    migrateTeamToStacks(teamId: $teamId) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function I(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function P(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return S=function(){return e},e}var C={},R=(0,o.Ps)(u()),E=(0,o.Ps)(s(),R,a.Pc),T=(0,o.Ps)(d(),E),D=(0,o.Ps)(p(),T),U=(0,o.Ps)(f(),D),M=(0,o.Ps)(v(),D),_=(0,o.Ps)(h(),D),G=(0,o.Ps)(m(),E),B=(0,o.Ps)(g(),M);function N(e){var n=(0,r.Z)({},C,e);return l.a(B,n)}var A=(0,o.Ps)(Z(),U);function O(e){var n=(0,r.Z)({},C,e);return l.a(A,n)}var X=(0,o.Ps)(y());function j(e){var n=(0,r.Z)({},C,e);return c.D(X,n)}var L=(0,o.Ps)(b());function z(e){var n=(0,r.Z)({},C,e);return c.D(L,n)}var F=(0,o.Ps)(x(),_);function H(e){var n=(0,r.Z)({},C,e);return c.D(F,n)}var W=(0,o.Ps)(w(),T);function $(e){var n=(0,r.Z)({},C,e);return c.D(W,n)}var V=(0,o.Ps)(k(),U);function K(e){var n=(0,r.Z)({},C,e);return c.D(V,n)}var q=(0,o.Ps)(I(),T);function Y(e){var n=(0,r.Z)({},C,e);return c.D(q,n)}var Q=(0,o.Ps)(P(),T);function J(e){var n=(0,r.Z)({},C,e);return c.D(Q,n)}var ee=(0,o.Ps)(S(),G);function ne(e){var n=(0,r.Z)({},C,e);return c.D(ee,n)}},26082:function(e,n,t){"use strict";var r=t(5152),i=t.n(r);n.Z=i()((function(){return Promise.all([t.e(8966),t.e(5499),t.e(5117),t.e(7068)]).then(t.bind(t,87068)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[87068]}}})},43832:function(e,n,t){"use strict";t.d(n,{I$:function(){return y},Du:function(){return b},Cd:function(){return w}});var r=t(26042),i=t(7297),o=t(31230),a=t(9523),l=t(52008),c=t(65711),u=t(6695);function s(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    isAlwaysOn\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n  }\n  ","\n"]);return d=function(){return e},e}var p=(0,o.Ps)(s()),f=(0,o.Ps)(d(),u.s),v=t(37887);function h(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    ...CrosisContextCurrentUser\n    ...ReplEnvironment2CurrentUserLayoutFlags\n    editorPreferences {\n      ...CurrentUserPreferences\n    }\n    flagFiletreeSearch: gate(feature: "flag-filetree-search")\n    ...ReplEnvironmentHeaderLeftCurrentUser\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment ReplEnvironment2Repl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    origin {\n      id\n    }\n    language\n    config {\n      isVnc\n      isServer\n    }\n    lesson {\n      id\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query ReplEnvironment2($url: String!) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n        ...ReplEnvironment2Repl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n        isOwner\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}var Z={},y=(0,o.Ps)(h(),a.D,l.SL,c.wO,p),b=(0,o.Ps)(m(),a.C,f),x=(0,o.Ps)(g(),a.C,b,y);function w(e){var n=(0,r.Z)({},Z,e);return v.a(x,n)}},65348:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Af}});var r=t(47568),i=t(10253),o=t(34051),a=t.n(o),l=t(35944),c=t(67294),u=t(91131),s=t(11163),d=t(22862),p=t(70338),f=t(77975),v=t(15519),h=t(43832),m=t(15085),g=t(61756),Z=t(1879),y=t(67629),b=t(69346),x=t(1144),w=t(81255),k=t(88075);var I=function(e){return(0,l.tZ)(Z.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,l.BX)(b.Z,{css:[w.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{variant:"headerDefault",level:2,css:w.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,l.tZ)(x.x,{multiline:!0,children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{onClick:e.onCancel,text:"Deny",iconLeft:(0,l.tZ)(y.Z,{})}),(0,l.tZ)(g.ZP,{text:"Allow notifications",colorway:"positive",iconLeft:(0,l.tZ)(k.Z,{}),onClick:e.onConfirm})]})]})})},P=t(92098),S=t(60977),C=t(90317),R=t(26042),E=t(7297),T=t(31230),D=t(50319);function U(){var e=(0,E.Z)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return U=function(){return e},e}function M(){var e=(0,E.Z)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return M=function(){return e},e}var _={},G=(0,T.Ps)(U()),B=(0,T.Ps)(M());var N=t(6695),A=t(37887);function O(){var e=(0,E.Z)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n  }\n"]);return O=function(){return e},e}function X(){var e=(0,E.Z)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    isAlwaysOn\n    isOwner\n    isPrivate\n    workspaceCta\n    rootOriginReplUrl\n    lang {\n      id\n      engine\n    }\n    origin {\n      id\n    }\n    currentUserPermissions {\n      editMultiplayers\n      inviteGuests\n      containerWrite\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n  }\n  ","\n"]);return X=function(){return e},e}function j(){var e=(0,E.Z)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return j=function(){return e},e}var L={},z=(0,T.Ps)(O()),F=(0,T.Ps)(X(),G),H=(0,T.Ps)(j(),F,N.s,z);var W=t(26473),$=t(70804),V=t(99408),K=t(58502),q=t(83475),Y=t(60536),Q=t.n(Y),J=t(73359);function ee(){var e=(0,E.Z)(["\n  query WorkspaceHeaderUsersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return ee=function(){return e},e}var ne={},te=(0,T.Ps)(ee());function re(e){var n=(0,R.Z)({},ne,e);return A.a(te,n)}var ie=t(57263),oe=t(69396),ae=t(57731),le=t(66060);function ce(e){var n=function(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})};return(0,l.tZ)(le.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(t,r){return(0,l.tZ)(b.Z,(0,oe.Z)((0,R.Z)({},t),{innerRef:r,onClick:n,children:(0,l.tZ)(ae.Z,{size:e.size||35,src:e.image,alt:e.username,css:[e.canClick&&w.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:w.TV.shadow1}}]})}))}})}var ue=t(94184),se=t.n(ue),de=t(77365);function pe(){var e=(0,E.Z)(["\n  fragment UserListModalUser on User {\n    id\n    username\n    image\n  }\n"]);return pe=function(){return e},e}function fe(){var e=(0,E.Z)(["\n  fragment UserListModalReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...UserListModalUser\n    }\n  }\n  ","\n"]);return fe=function(){return e},e}function ve(){var e=(0,E.Z)(["\n  query UserListModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UserListModalUser\n        }\n        permissions {\n          id\n          ...UserListModalReplPermission\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n  ","\n"]);return ve=function(){return e},e}var he={},me=(0,T.Ps)(pe()),ge=(0,T.Ps)(fe(),me),Ze=(0,T.Ps)(ve(),me,ge);var ye=t(63377);function be(){var e=(0,V.Z)(),n=e.session,t=e.presence;return c.useCallback((function(e){var r=e.username,i=e.id,o=t.getFollowedUser();if((null===o||void 0===o?void 0:o.username)!==r){t.followUser(r);var a=t.getActiveFileForUser(i),l=n.getActiveFile();a&&a!==l&&n.openFile(a)}else t.unfollowUser()}),[n,t])}var xe=t(34140);function we(e){var n=e.hideModal,t=e.onUserClick,r=e.isOpen,i=(0,ye.Z)(),o=(0,V.Z)().presence,a=(0,K.Z)({presence:o});return(0,l.tZ)(m.u_,{isOpen:r,onRequestClose:n,children:(0,l.tZ)(Ie,{replId:i,onUserClick:t,activeUsers:a,hideModal:n})})}function ke(e,n){return n.some((function(n){return n.id===e}))}function Ie(e){var n=e.replId,t=e.activeUsers,r=e.onUserClick,i=e.hideModal,o=function(e){var n=(0,R.Z)({},he,e);return A.a(Ze,n)}({variables:{replId:n}}),a=o.data,c=o.loading,u=o.error;if(c)return(0,l.tZ)(m.G7,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,l.tZ)(de.Z,{})});if(u)return(0,l.tZ)("div",{children:u.message});if("Repl"===(null===a||void 0===a?void 0:a.repl.__typename)){var s=a.repl,d=a.currentUser,p=s.user,f=p&&t.find((function(e){return e.username===p.username})),v=s.permissions.filter((function(e){var n=e.user;return n&&ke(n.id,t)})),h=s.permissions.filter((function(e){var n=e.user;return n&&!ke(n.id,t)}));return(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Multiplayers"}),(0,l.tZ)(m.xv,{multiline:!0,children:"Users can interact with this Repl in real time."}),(0,l.tZ)(m.G7,{css:[m.l0.maxHeight(330),{overflowY:"auto"}],children:(0,l.BX)(m.G7,{children:[p?(0,l.tZ)(Se,(0,oe.Z)((0,R.Z)({},p),{onClick:r,isOnline:Boolean(f),color:f?f.color:"transparent",isOwner:!0,hideModal:i,canClickAvatar:Boolean(f)&&p.id!==(null===d||void 0===d?void 0:d.id),type:C.aQ.Rw})):null,v.map((function(e){var n=e.type,o=e.user;if(!o)throw new Error("Expected user");var a=t.find((function(e){return e.username===o.username}));if(!a)throw new Error("Expected user online");var c=o.id!==(null===d||void 0===d?void 0:d.id);return(0,l.tZ)(Se,(0,oe.Z)((0,R.Z)({onClick:r,type:n},o),{isOnline:!0,canClickAvatar:c,color:a.color,hideModal:i,isOwner:!1}),"chat-user-list-".concat(o.username))})),h.map((function(e){var n=e.type,t=e.user;if(!t)throw new Error("Expected user");return(0,l.tZ)(Se,(0,oe.Z)((0,R.Z)({onClick:r,type:n},t),{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:i,isOwner:!1}),"chat-user-list-".concat(t.username))}))]})})]})}return"ReplRedirect"===(null===a||void 0===a?void 0:a.repl.__typename)?(0,l.BX)("div",{children:["This Repl has moved to"," ",(0,l.tZ)("a",{href:a.repl.replUrl,children:a.repl.replUrl})]}):"SubscriptionExpiredError"===(null===a||void 0===a?void 0:a.repl.__typename)?(0,l.BX)("div",{children:["Your subscription has expired.",(0,l.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var Pe={r:"read only",rw:"can edit"};function Se(e){var n=e.type,t=e.id,r=e.username,i=e.image,o=e.isOnline,a=e.isOwner,c=e.color,u=e.onClick,s=e.hideModal,d=e.canClickAvatar,p=be(),f=function(){d&&(p({username:r,id:t}),s())};return(0,l.BX)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" "+(se()("user-list-item-wrapper",{online:o})||""),children:[(0,l.BX)("div",{role:"button",onClick:f,onKeyDown:f,tabIndex:0,className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" image",children:[(0,l.tZ)("img",{src:i,alt:"",className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" "+((o?"":"offline")||"")}),(0,l.BX)(xe.T,{children:["Observe ",r]})]}),(0,l.BX)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" info",children:[(0,l.BX)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:[(0,l.BX)("a",{href:"/@".concat(r),target:"_blank",onClick:u,className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:["@",r]}),!o&&" (offline)"]}),(0,l.tZ)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:a?"owner":Pe[n]})]}),(0,l.tZ)(Q(),{id:"8abf4fce485dcead",dynamic:[d?"pointer":"auto",c],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(d?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(c,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-box-ordinal-group:1;-webkit-order:0;-moz-box-ordinal-group:1;-ms-flex-order:0;order:0}")})]})}function Ce(e){var n=(0,i.Z)(c.useState(!1),2),t=n[0],r=n[1],o=(0,ye.Z)(),a=re({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),u=a.data,s=a.loading,d=a.error,p=e.users.reduce((function(e,n){return e[n.id]=n.color,e}),{});if(s)return null;if(d)return null;if(!(null===u||void 0===u?void 0:u.currentUser))return null;var f=u.usersByIds,v=u.currentUser,h=f.filter((function(e){return e.id!==v.id})),g=h.length-3;return 0===h.length?null:(0,l.BX)(m.G7,{tag:"ul",className:"multiplayer-users-container",css:[m.l0.px(8),m.l0.rowWithGap(4),m.l0.align.center],"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[g>0?(0,l.tZ)("li",{className:Q().dynamic([["9e6f75ce31331994",[ie.j.mobileMax+100]]]),children:(0,l.tZ)(m.zx,{onClick:function(){return r(!0)},text:"+ ".concat(g),css:{background:"none"}})}):null,h.slice(0,3).map((function(n){return(0,l.tZ)("li",{className:Q().dynamic([["9e6f75ce31331994",[ie.j.mobileMax+100]]]),children:(0,l.tZ)(ce,{id:n.id,username:n.username,image:n.image,color:p[n.id],onClick:e.onAvatarClick,canClick:!0})},n.id)})),(0,l.tZ)(we,{isOpen:t,hideModal:function(){return r(!1)},onUserClick:function(){(0,S.j)(S.U3.MP2_VISITED_PROFILE,{replId:o,from:"OnlineUsers"})}}),(0,l.tZ)(Q(),{id:"9e6f75ce31331994",dynamic:[ie.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector li.__jsx-style-dynamic-selector{list-style-type:none}@media only screen and (max-width:".concat(ie.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})}var Re=t(34193),Ee=t(29815);function Te(){var e=(0,E.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return Te=function(){return e},e}function De(){var e=(0,E.Z)(["\n  fragment MultiplayerReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerUser\n    }\n  }\n  ","\n"]);return De=function(){return e},e}function Ue(){var e=(0,E.Z)(["\n  query MultiplayerManageTeamMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ue=function(){return e},e}function Me(){var e=(0,E.Z)(["\n  mutation MultiplayerManageTeamMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Me=function(){return e},e}function _e(){var e=(0,E.Z)(["\n  mutation MultiplayerManageTeamMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return _e=function(){return e},e}var Ge={},Be=(0,T.Ps)(Te()),Ne=(0,T.Ps)(De(),Be),Ae=(0,T.Ps)(Ue(),Ne,Be);var Oe=(0,T.Ps)(Me(),Be,Ne);var Xe=(0,T.Ps)(_e(),Be,Ne);function je(){var e=(0,E.Z)(["\n  fragment MultiplayerControlUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return je=function(){return e},e}function Le(){var e=(0,E.Z)(["\n  fragment MultiplayerControlReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerControlUser\n    }\n  }\n  ","\n"]);return Le=function(){return e},e}function ze(){var e=(0,E.Z)(["\n  fragment MultiplayerControlEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return ze=function(){return e},e}function Fe(){var e=(0,E.Z)(["\n  query MultiplayerControl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return Fe=function(){return e},e}function He(){var e=(0,E.Z)(["\n  mutation MultiplayerControlAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return He=function(){return e},e}function We(){var e=(0,E.Z)(["\n  mutation MultiplayerControlRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return We=function(){return e},e}function $e(){var e=(0,E.Z)(["\n  mutation MultiplayerControlCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerControlEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return $e=function(){return e},e}function Ve(){var e=(0,E.Z)(["\n  mutation MultiplayerControlDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Ve=function(){return e},e}var Ke={},qe=(0,T.Ps)(je()),Ye=(0,T.Ps)(Le(),qe),Qe=(0,T.Ps)(ze()),Je=(0,T.Ps)(Fe(),Ne);var en=(0,T.Ps)(He(),qe,Ye);var nn=(0,T.Ps)(We(),qe,Ye);var tn=(0,T.Ps)($e(),Ne,Qe);function rn(e){var n=(0,R.Z)({},Ke,e);return D.D(tn,n)}var on=(0,T.Ps)(Ve(),Ne);function an(e){var n=(0,R.Z)({},Ke,e);return D.D(on,n)}var ln=t(19526),cn=t(18757),un=t(64184),sn=t(82893),dn=t(28898),pn=t(93058),fn=t(92002),vn=t(30019),hn=t(44781),mn=t(27206),gn=t(50009),Zn=t(3218),yn=t(96594),bn=t(6951),xn=t(24351);function wn(){var e=(0,E.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return wn=function(){return e},e}function kn(){var e=(0,E.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return kn=function(){return e},e}var In={},Pn=(0,T.Ps)(wn()),Sn=(0,T.Ps)(kn(),Pn);function Cn(e){var n=e.onSubmit,t=e.existingUsernames,r=e.isDisabled,o=e.onChange,a=e.placeholder,u=(0,i.Z)(c.useState(""),2),s=u[0],d=u[1],p=!!s.match(/.+@.+/),f=(0,xn.Z)(s.trim().replace(/^@/,""),250),v=function(e){var n=(0,R.Z)({},In,e);return A.a(Sn,n)}({skip:!f||p,variables:{query:f,limit:6}}),h=v.data,m=v.loading,g=v.error,Z=(0,pn.Z)().showError;c.useEffect((function(){g&&Z(g.message)}),[g,Z]);var y=null===h||void 0===h?void 0:h.usernameSearch;return(0,l.BX)("form",{onSubmit:function(e){e.preventDefault(),n(s),d("")},className:"jsx-d408485a86637a91",children:[(0,l.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,l.tZ)(yn.ZP,{onChange:function(e){e&&d(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,i=e.getItemProps,c=e.getMenuProps,u=e.isOpen,p=e.highlightedIndex;return(0,l.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,l.tZ)(mn.ZP,(0,R.Z)({},r({ref:null,value:s,onChange:function(e){d(e.currentTarget.value),null===o||void 0===o||o(e.currentTarget.value)},placeholder:null!==a&&void 0!==a?a:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&s.match(/.+@.+/)&&(n(s),d(""),e.currentTarget.blur())}}))),(0,l.BX)("div",(0,oe.Z)((0,R.Z)({},c()),{className:"jsx-d408485a86637a91",children:[u&&y&&y.length?(0,l.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:y.map((function(e,n){return(0,l.tZ)("div",(0,oe.Z)((0,R.Z)({},i({item:e,index:n})),{className:"jsx-d408485a86637a91 "+(se()("result",{"is-active":p===n})||""),children:(0,l.BX)(ln.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(dn.Z,{size:"s",url:e.image}),(0,l.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),t.includes(e.username)?(0,l.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,l.tZ)(k.Z,{})}):null]})}),e.username)}))}):null,u&&m?(0,l.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,u&&y&&0===y.length?(0,l.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',s,'"']}):null]}))]})}}),(0,l.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,l.tZ)(bn.Z,{color:"primary",type:"submit",filled:!0,disabled:r||!s,children:"Invite"})})]}),(0,l.tZ)(Q(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}function Rn(e){var n=e.value,t=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,o=e.image,a=e.filterValue,c=e.type,u=e.Icon;return(0,l.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(se()("multiplayer-item",{"is-editable":!!t})||""),children:[(0,l.BX)(ln.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(dn.Z,{size:"s",url:null!==o&&void 0!==o?o:""}),(0,l.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:a?(0,l.tZ)(gn.gr,{source:n,match:a}):"".concat(n," ").concat(i)}),!!t&&(0,l.tZ)(bn.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(c||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:t,children:u?(0,l.tZ)(u,{size:12,className:"jsx-a16e88ad40d0e05c"}):null})]}),(0,l.tZ)(Q(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var En=t(4158);function Tn(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,l.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,l.tZ)(vn.Z,{level:3,align:"center",children:"Are you sure?"}),(0,l.BX)(hn.Z,{align:"center",children:[(0,l.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,l.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:n})]}),(0,l.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,l.tZ)(bn.Z,{onClick:r,children:"Cancel"}),(0,l.tZ)(bn.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,l.tZ)(Q(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var Dn=t(75474),Un=t(34847);function Mn(e){var n,t,r=e.replId,o=function(e){var n=(0,R.Z)({},Ge,e);return A.a(Ae,n)}({variables:{replId:r}}),a=o.data,u=o.loading,s=(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.id)||null,d=(0,pn.Z)(),p=d.showConfirm,f=d.showError,v=(0,i.Z)(c.useState(""),2),h=v[0],m=v[1],g=(0,i.Z)(function(e){var n=(0,R.Z)({},Ge,e);return D.D(Oe,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.addMultiplayerUser.user;(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"});var t=n?"@".concat(n.username):"Member";p("".concat(t," added"))}}),2),Z=g[0],b=g[1],x=(0,i.Z)(function(e){var n=(0,R.Z)({},Ge,e);return D.D(Xe,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.removeMultiplayerUser.user,t=n?"@".concat(n.username):"Member";p("".concat(t," removed"))}}),2),w=x[0],k=x[1],I="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null,P=(0,i.Z)(rn({onError:function(e){f(e.message)},update:function(e,n){var t,i=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void p("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:Qe});return(0,Ee.Z)(n).concat([t])}}});var a=i.user;(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"});var l=a?"@".concat(a.username):"Member";p("".concat(l," added"))}}else f(i.message)}}),2),E=P[0],T=P[1],U=(0,i.Z)(an({onError:function(e){return f(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,S.j)(S.U3.MP2_REMOVED_EMAIL_INVITE,{replId:r,email:n}),p("Invite for ".concat(n," deleted"))}}else f(e.deleteMultiplayerInvite.message)}}),2),M=U[0],_=U[1];if(I&&!I.owner)throw new Error("Cannot manage members on anon repls");if((null===I||void 0===I?void 0:I.owner)&&"Team"!==(null===I||void 0===I?void 0:I.owner.__typename))throw new Error("Expect repl owned by a team");var G,B,N,O="Team"===(null===I||void 0===I||null===(t=I.owner)||void 0===t?void 0:t.__typename)?I.owner:null,X=null!==(G=null===I||void 0===I?void 0:I.permissions.reduce((function(e,n){return n.user?(0,Ee.Z)(e).concat([n.user.username]):e}),[]))&&void 0!==G?G:[],j=null===I||void 0===I?void 0:I.permissions.reduce((function(e,n){if(!n.user)return e;var t=n.user;return!h||Zn.Z.filter(h,[t.username]).length>0?((null===O||void 0===O?void 0:O.members.some((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===t.id})))||e.users.push(t),e):e}),{users:[]}),L=null===I||void 0===I?void 0:I.multiplayerInvites.filter((function(e){return!h||Zn.Z.filter(h,[e.email]).length>0})),z=null===O||void 0===O?void 0:O.members.reduce((function(e,n){if(!n.user)return e;var t=n.user;if(!(!h||Zn.Z.filter(h,[t.username]).length>0))return e;var r=n.permissions&&n.permissions!==C.SV.Member,i=null===I||void 0===I?void 0:I.permissions.find((function(e){var n;return e.user&&(null===(n=e.user)||void 0===n?void 0:n.id)===t.id}));return r?e.teamAdmins.push(t):(null===i||void 0===i?void 0:i.type)?e.withPermission.push(t):e.withoutPermission.push(t),e}),{teamAdmins:[],withPermission:[],withoutPermission:[]}),F=null===z||void 0===z?void 0:z.teamAdmins.some((function(e){return e.id===s})),H=(null!==(B=null===j||void 0===j?void 0:j.users.length)&&void 0!==B?B:0)+(null!==(N=null===L||void 0===L?void 0:L.length)&&void 0!==N?N:0),W=null===I||void 0===I?void 0:I.currentUserPermissions.editMultiplayers,$=null===I||void 0===I?void 0:I.currentUserPermissions.inviteGuests,V=Boolean(z&&!z.teamAdmins.length&&!z.withPermission.length&&(!(null===j||void 0===j?void 0:j.users.length)&&!(null===L||void 0===L?void 0:L.length)&&$||!$&&!z.withoutPermission.length)),K=(0,i.Z)(c.useState(null),2),q=K[0],Y=K[1];return(0,l.BX)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" root",children:[(0,l.BX)(ln.gC,{spacing:2,align:"stretch",children:[(0,l.BX)(ln.Ug,{children:[(0,l.BX)(vn.Z,{level:5,foreground:u?3:1,children:[W?"Add or remove members from this repl":null,u?"Loading...":null]}),W&&$&&!u?(0,l.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" information-icon-container",children:(0,l.tZ)(En.Z,{})}):null]}),$?(0,l.tZ)(Cn,{existingUsernames:X,onSubmit:function(e){!!e.match(/.+@.+/)&&!T.loading?Y(e):b.loading||Z({variables:{username:e,replId:r,type:"rw"}}),m("")},placeholder:W?"Search for users or invite guests":"Filter users",isDisabled:u,onChange:function(e){return m(e)}}):(0,l.tZ)(mn.ZP,{disabled:u,value:h,onChange:function(e){return m(e.currentTarget.value)},placeholder:W?"Filter team members to add or remove":"Filter team members"}),(0,l.tZ)(Re.Z,{isOpen:!!q,onRequestClose:function(){return Y(null)},children:q?(0,l.tZ)(Tn,{email:q,onInvite:function(){E({variables:{email:q,replId:r,type:"rw"}}),Y(null)},onCancel:function(){return Y(null)}}):null}),(0,l.BX)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" "+(se()("multiplayers-list",{"is-empty":V})||""),children:[(null===z||void 0===z?void 0:z.withPermission.length)?(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" list-heading",children:(0,l.BX)(ln.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(cn.Z,{size:12}),(0,l.BX)(hn.Z,{foreground:2,size:"small",children:[null===z||void 0===z?void 0:z.withPermission.length," member",1===(null===z||void 0===z?void 0:z.withPermission.length)?"":"s"," with access"]})]})}):null,null===z||void 0===z?void 0:z.withPermission.map((function(e){return(0,l.tZ)(Rn,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:F?function(){k.loading||w({variables:{replId:r,username:e.username}})}:void 0,Icon:y.Z},e.id)})),!!H&&(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" list-heading",children:(0,l.BX)(ln.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(cn.Z,{size:12}),(0,l.BX)(hn.Z,{foreground:2,size:"small",children:[(0,Un.Z)("guest",H,!0),"with access"]})]})}),null===j||void 0===j?void 0:j.users.map((function(e){return(0,l.tZ)(Rn,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:F?function(){k.loading||w({variables:{replId:r,username:e.username}})}:void 0,Icon:y.Z},e.id)})),null===L||void 0===L?void 0:L.map((function(e){return(0,l.tZ)(Rn,{value:e.email,statusText:"(pending)",onButtonPress:F?function(){_.loading||M({variables:{replId:r,email:e.email}})}:void 0,Icon:y.Z},e.email)})),!$&&(null===z||void 0===z?void 0:z.withoutPermission.length)?(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" list-heading",children:(0,l.BX)(ln.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(un.Z,{size:12}),(0,l.BX)(hn.Z,{foreground:2,size:"small",children:[(0,Un.Z)("member",null===z||void 0===z?void 0:z.withoutPermission.length,!0),"without access"]})]})}):null,!$&&(null===z||void 0===z?void 0:z.withoutPermission.map((function(e){return(0,l.tZ)(Rn,{value:e.username,image:e.image,type:"member",onButtonPress:W?function(){b.loading||Z({variables:{replId:r,username:e.username,type:"rw"}})}:void 0,Icon:fn.Z},e.id)}))),(null===z||void 0===z?void 0:z.teamAdmins.length)?(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" list-heading",children:(0,l.BX)(ln.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(sn.Z,{size:12}),(0,l.tZ)(hn.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===z||void 0===z?void 0:z.teamAdmins.map((function(e){return(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" "+(se()("multiplayer-item",{"is-editable":W})||""),children:(0,l.BX)(ln.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(dn.Z,{size:"s",url:e.image}),(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ie.j.mobileMax]]])+" label",children:h?(0,l.tZ)(gn.gr,{source:e.username,match:h}):e.username})]})},e.id)})),V?(0,l.BX)(hn.Z,{foreground:2,align:"center",children:['No members matching "',h,'" found']}):null]}),W||u?null:(0,l.tZ)(hn.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),W&&$?(0,l.tZ)(Dn.Z,{replId:r}):null]}),(0,l.tZ)(Q(),{id:"dc131772cdbb2add",dynamic:[ie.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(ie.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}var _n=t(15153),Gn=t(12215);function Bn(e){var n=e.children,t=e.showPopover,r=(0,Gn.Z)("announcement","add-guest-new-user"),o=r.shouldDisplay,a=r.register,u=r.dismiss,s=(0,i.Z)(c.useState(!1),2),d=s[0],p=s[1],f=(0,i.Z)(c.useState(!1),2),v=f[0],h=f[1];c.useEffect((function(){t&&!v&&a()}),[v,a,t]);var m=o&&!v;return(0,l.BX)($.Z,{onClickOutside:function(){return h(!0)},isOpen:m,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[n,(0,l.BX)(ln.gC,{spacing:2,align:"stretch",children:[(0,l.BX)(ln.Ug,{spacing:1,children:[(0,l.tZ)(_n.Z,{}),(0,l.tZ)(vn.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,l.BX)(hn.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,l.tZ)(ln.Ug,{spacing:1,justify:"end",children:(0,l.tZ)(bn.Z,{loading:d,onClick:function(){p(!0),(0,S.j)(S.U3.ADD_GUEST_POPOVER_DISMISSED),u()},children:"Got it"})})]})]})}var Nn=t(78162);function An(e){var n=e.replId,t=function(e){var n=(0,R.Z)({},Ke,e);return A.a(Je,n)}({variables:{replId:n},pollInterval:8e3}),r=t.data,o=t.loading,a=(0,pn.Z)(),u=a.showConfirm,s=a.showError,d=(0,i.Z)(c.useState(!1),2),p=d[0],f=d[1],v=(0,i.Z)(function(e){var n=(0,R.Z)({},Ke,e);return D.D(en,n)}({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),u("Added @".concat(r)))}}),2),h=v[0],m=v[1],g=(0,i.Z)(function(e){var n=(0,R.Z)({},Ke,e);return D.D(nn,n)}({onError:function(e){return s(e.message)},onCompleted:function(e){var t,r=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,S.j)(S.U3.MP2_REMOVED_USER_PERMISSION,{replId:n,username:r}),u("".concat(r," removed")))}}),2),Z=g[0],b=g[1],x=(0,i.Z)(rn({update:function(e,t){var r,i=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void u("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){var a;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:Qe});return(0,Ee.Z)(n).concat([t])}}});var l=null===(a=i.user)||void 0===a?void 0:a.username;if(!l)return;(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),u("Invited @".concat(l))}}else s(i.message)}}),2),w=x[0],k=x[1],I=(0,i.Z)(an({onError:function(e){return s(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,S.j)(S.U3.MP2_REMOVED_EMAIL_INVITE,{replId:n,email:t}),u("invite for ".concat(t," deleted"))}}else s(e.deleteMultiplayerInvite.message)}}),2),P=I[0],E=I[1];c.useEffect((function(){var e=m.error||k.error;e&&(e.message.includes("reached the limit")?f(!0):s(e.message))}),[m.error,k.error,s]);var T="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,U=null===r||void 0===r?void 0:r.currentUser,M=null===T||void 0===T?void 0:T.permissions.reduce((function(e,n){return n.user?(0,Ee.Z)(e).concat([n.user.username]):e}),[]),_=null===T||void 0===T?void 0:T.currentUserPermissions.editMultiplayers,G=Boolean(T&&!T.permissions.length&&!T.multiplayerInvites.length),B=(null===T||void 0===T?void 0:T.permissions)?T.permissions.length:null;return(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 root",children:[(0,l.BX)(ln.gC,{spacing:2,align:"stretch",children:[_&&M&&T?(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,l.tZ)(Cn,{existingUsernames:M,onSubmit:function(e){!!!e.match(/.+@.+/)||k.loading?m.loading||h({variables:{username:e,replId:T.id,type:"rw"}}):w({variables:{email:e,replId:T.id,type:"rw"}})}})}):null,(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,l.BX)(vn.Z,{level:5,foreground:o?3:1,children:[null!==B&&(null===U||void 0===U?void 0:U.isSubscribed)?"".concat((0,Un.Z)("multiplayer",B,!0)):null,null===B||(null===U||void 0===U?void 0:U.isSubscribed)?null:"".concat(B,"/").concat(50," ").concat((0,Un.Z)("multiplayer",B))," ",o||(null===U||void 0===U?void 0:U.isSubscribed)?null:(0,l.tZ)("a",{onClick:function(){return f(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-7043475ed4bd7433 info-tooltip",children:(0,l.tZ)(En.Z,{})}),o?"Loading...":null]})}),G?(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433 empty-list",children:(0,l.BX)(ln.Ug,{align:"center",justify:"center",children:[(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:"No one is here"}),(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,l.tZ)("img",{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",className:"jsx-7043475ed4bd7433"})})]})}):(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 multiplayers-list",children:[null===T||void 0===T?void 0:T.permissions.map((function(e){var t=e.user,r=e.type;return t?(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 "+(se()("multiplayer-item",{"is-editable":T.currentUserPermissions.editMultiplayers})||""),children:[(0,l.tZ)(dn.Z,{size:"s",url:t.image}),(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[t.username," ",r===C.aQ.Rw?" (can edit)":null]}),T.currentUserPermissions.editMultiplayers?(0,l.tZ)(bn.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){b.loading||Z({variables:{replId:n,username:t.username}})},children:(0,l.tZ)(y.Z,{size:12})}):null]},t.id):null})),null===T||void 0===T?void 0:T.multiplayerInvites.map((function(e){return(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 "+(se()("multiplayer-item",{"is-editable":_})||""),children:[(0,l.tZ)(dn.Z,{size:"s"}),(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[e.email," (pending)"]}),_?(0,l.tZ)(bn.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){E.loading||P({variables:{replId:n,email:e.email}})},children:(0,l.tZ)(y.Z,{size:12})}):null]},e.email)}))]})]}),(0,l.tZ)(Nn.Z,{isOpen:p,onClose:function(){return f(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,l.tZ)(Q(),{id:"7043475ed4bd7433",children:".root.jsx-7043475ed4bd7433{color:var(--foreground-default)}.multiplayers-list.jsx-7043475ed4bd7433,.empty-list.jsx-7043475ed4bd7433{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:200px}.multiplayers-list.jsx-7043475ed4bd7433{overflow-y:auto;padding:var(--space-8)0}.multiplayer-item.jsx-7043475ed4bd7433{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-4)var(--space-16);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.multiplayer-item.is-editable.jsx-7043475ed4bd7433{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-7043475ed4bd7433:hover{background-color:var(--background-root)}.label.jsx-7043475ed4bd7433{margin-right:auto;padding-left:var(--space-8)}.info-tooltip.jsx-7043475ed4bd7433{display:inline-block}.info-tooltip.jsx-7043475ed4bd7433,.info-tooltip.jsx-7043475ed4bd7433:hover,.info-tooltip.jsx-7043475ed4bd7433:focus{color:var(--foreground-default);border:none;outline:none}.empty-list.jsx-7043475ed4bd7433 img.jsx-7043475ed4bd7433{display:block;height:200px;opacity:60%}"})]})}function On(e){var n=e.replId;return(0,l.BX)("div",{className:Q().dynamic([["73cdb9c447ce4102",[ie.j.mobileMax]]]),children:[(0,l.BX)(ln.gC,{spacing:2,align:"stretch",children:[(0,l.tZ)(vn.Z,{level:4,children:"Invite"}),(0,l.tZ)(An,{replId:n}),(0,l.tZ)(Dn.Z,{replId:n})]}),(0,l.tZ)(Q(),{id:"73cdb9c447ce4102",dynamic:[ie.j.mobileMax],children:"div.__jsx-style-dynamic-selector{padding:var(--space-16)}@media screen and (min-width:".concat(ie.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32)}}")})]})}var Xn=t(18172),jn=t(71171),Ln=t.n(jn),zn=t(68963),Fn=t(95068),Hn=t(12727),Wn=t(88055),$n=t(8357),Vn=t(72676),Kn=t(57416),qn=t(66421),Yn=((0,u.cn)(null,(function(e,n,t){var r=e(Hn.Eh).find((function(e){return e.isDialog}));r?n(Wn.$,r.paneId):n(Qn,t)})),(0,u.cn)(null,(function(e,n,t){var r=e(Hn.Eh).find((function(e){return e.isDialog}));if(r){var i=e(r.data);i.type!==i.type?(n(Wn.$,r.paneId),n(Qn,t)):n($n.v,{paneId:r.paneId,data:t.pane})}else n(Qn,t)}))),Qn=(0,u.cn)(null,(function(e,n,t){if(!e(Hn.Eh).find((function(e){return e.isDialog}))){var r=e(Fn.g4),i=e(Hn.CK),o=Ln()(),a=i.x+i.width,l=i.y+i.height,c=t.maxWidth||a,u=t.maxHeight||l,s=Math.min(c,.8*a),d=Math.min(u,.8*l),p={width:s,height:d,x:a/2-s/2-i.x,y:l/2-d/2-i.y},f=(0,Xn.ZP)(r,(function(e){try{(0,zn.m)(e,{id:Ln()(),isFloating:!0,panes:[o],rect:p})}catch(t){throw n(qn.xm,{error:t}),t}}));n(Vn.iH,f),n(Kn.W1,o);var v=(0,Hn.z)(o),h=e(v);n(Kn.W1,o),n(v,(0,oe.Z)((0,R.Z)({},h),{isDialog:!0})),n(h.data,t.pane)}})),Jn=(0,u.cn)(null,(function(e,n){var t=e(Hn.Eh).find((function(e){return e.isDialog}));t&&n(Wn.$,t.paneId)})),et=t(14924),nt=t(35642),tt=t(26082),rt=t(17495),it=t(42325);function ot(e){var n,t=e.replId,r=e.onDone,o=e.isResubmit,a=e.lastUpdated,c=e.openIOtesterPane,u=(0,V.Z)().iotester,s=(0,it.CH)({variables:{replId:t}}),d=u.lastRunAt.getTime()>a,p=(0,rt.xh)({variables:{replId:t}}).data,f="Repl"===(null===p||void 0===p?void 0:p.repl.__typename)?p.repl:null,v=(null===f||void 0===f?void 0:f.template)||null,h=(null===v||void 0===v?void 0:v.dueDate)||null,m=(new Date).toISOString(),Z=(0,pn.Z)(),y=Z.showConfirm,I=Z.showError,P=(0,i.Z)((0,rt.xA)({variables:{replId:t},onCompleted:function(e){var n=e.submitRepl;"UserError"!==n.__typename?"Repl"===n.__typename&&(y("Repl submitted"),r()):I(n.message)},onError:function(e){I(e.message)}}),2),S=P[0],C=P[1],R=d&&u.lastRunDidPass;return"Repl"===(null===(n=s.data)||void 0===n?void 0:n.repl.__typename)&&s.data.repl.ioTests.length>0&&!R?(0,l.BX)(b.Z,{css:[w.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{variant:"headerDefault",level:2,children:d?"Fix test failures before submitting":"Run tests before submitting"}),(0,l.tZ)(x.x,{multiline:!0,children:d?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{disabled:C.loading,colorway:"primary",onClick:function(){c(),r()},text:"View tests"}),(0,l.tZ)(g.ZP,{disabled:C.loading,onClick:function(){return S()},iconLeft:(0,l.tZ)(k.Z,{}),text:"Submit anyway"})]})]}):(0,l.BX)(b.Z,{css:[w.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{variant:"headerDefault",level:2,children:o?" Resubmit Repl":"Submit Repl"}),(0,l.tZ)(x.x,{multiline:!0,children:o?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),h&&h<m?(0,l.tZ)(x.x,{multiline:!0,css:[w.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}):null,(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{disabled:C.loading,onClick:r,text:"Cancel"}),(0,l.tZ)(g.ZP,{colorway:"primary",disabled:C.loading,onClick:function(){return S()},iconLeft:(0,l.tZ)(k.Z,{}),text:o?"Submit again":"Submit"})]})]})}var at=t(40381),lt=t(65456),ct=t(48551),ut=t(37424),st=t(19923);function dt(){var e=(0,E.Z)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return dt=function(){return e},e}function pt(){var e=(0,E.Z)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return pt=function(){return e},e}var ft={},vt=(0,T.Ps)(dt(),st.vs);var ht=(0,T.Ps)(pt(),st.vs);var mt,gt=t(28479),Zt=function(e){var n,t,r,o,a,u,s,d,p,f=e.replId,v=e.onDone,h=(0,pn.Z)(),g=h.showConfirm,Z=h.showError,y=function(e){var n=(0,R.Z)({},ft,e);return A.a(vt,n)}({variables:{replId:f},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(n=r.origin)||void 0===n||null===(t=n.template)||void 0===t?void 0:t.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(E(r.origin.template.modelSolution.visibleAfterSubmitting),M(r.origin.template.modelSolution.visibleAfterPassingTests),B(r.origin.template.modelSolution.visibleAfterDueDate))}}),b=y.data,x=y.loading,w=(0,i.Z)(function(e){var n=(0,R.Z)({},ft,e);return D.D(ht,n)}({onError:function(e){return Z(e)},onCompleted:function(){g("Updated solution"),v()}}),2),I=w[0],P=w[1],S=(0,i.Z)(c.useState(!1),2),C=S[0],E=S[1],T=(0,i.Z)(c.useState(!1),2),U=T[0],M=T[1],_=(0,i.Z)(c.useState(!1),2),G=_[0],B=_[1],N=(0,i.Z)(c.useState(),2),O=N[0],X=N[1],j=(0,ut.H)();if(c.useEffect((function(){var e="Students can ";if(C||G||U){e+="view the solution after";var n=[];C&&n.push("submitting their project"),U&&n.push("passing all tests"),G&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";X(e)}),[C,U,G]),x)return(0,l.tZ)(m.G7,{css:[m.l0.center],children:(0,l.tZ)(de.Z,{})});var L="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&"Team"===(null===(n=b.repl.owner)||void 0===n?void 0:n.__typename)&&(null===(t=b.repl.owner)||void 0===t?void 0:t.id),z="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(r=b.repl.origin)||void 0===r||null===(o=r.template)||void 0===o?void 0:o.modelSolution);if(!z)return null;var F=z.id,H="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&((null===(a=b.repl.origin)||void 0===a?void 0:a.ioTests.length)||(null===(u=b.repl.origin)||void 0===u||null===(s=u.unitTests)||void 0===s?void 0:s.tests.length)),W="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(d=b.repl.origin)||void 0===d||null===(p=d.template)||void 0===p?void 0:p.dueDate);return(0,l.tZ)("form",{onSubmit:function(e){e.preventDefault(),L&&F&&I({variables:{input:{teamId:L,solutionId:F,visibleAfterSubmitting:C,visibleAfterPassingTests:U,visibleAfterDueDate:G}}})},children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,l.BX)(m.G7,{css:[m.l0.colWithGap(16)],children:[(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(m.XZ,{id:j("availableAfterSubmitting"),checked:C,onChange:function(){return E(!C)}}),(0,l.tZ)("label",{htmlFor:j("availableAfterSubmitting"),children:(0,l.tZ)(m.xv,{children:"Available after submitting"})})]}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(m.XZ,{id:j("availableAfterPassingTests"),checked:U,onChange:function(){return M(!U)}}),(0,l.tZ)("label",{htmlFor:j("availableAfterPassingTests"),children:(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(4)],children:[(0,l.tZ)(m.xv,{children:"Available after passing tests"}),(0,l.BX)(m.xv,{children:["(",H?"".concat(H," ").concat((0,Un.Z)("test",H)," defined"):"no tests exist yet",")"]})]})})]}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,l.tZ)(m.XZ,{id:j("availableAfterDueDate"),checked:G,onChange:function(){return B(!G)}}),(0,l.tZ)("label",{htmlFor:j("availableAfterDueDate"),children:(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(4)],children:[(0,l.tZ)(m.xv,{children:"Available after due date"}),(0,l.BX)(m.xv,{css:{textDecoration:"italic"},children:["(",W?(0,gt.p)(W):"no due date set yet",")"]})]})})]})]}),(0,l.tZ)(m.E_,{text:"".concat(O),colorway:C||U||G?"positive":"negative"}),(0,l.tZ)(m.G7,{css:{alignItems:"end"},children:(0,l.tZ)(m.zx,{stretch:!1,colorway:"primary",text:"".concat(P.loading?"Saving...":"Save"),iconLeft:(0,l.tZ)(k.Z,{}),disabled:P.loading})})]})})},yt=(mt={},(0,et.Z)(mt,C.Sy.PublishTemplate,"Publish project"),(0,et.Z)(mt,C.Sy.EditTemplate,"Edit project"),(0,et.Z)(mt,C.Sy.Submit,"Submit"),(0,et.Z)(mt,C.Sy.Resubmit,"Resubmit"),(0,et.Z)(mt,C.Sy.UpdateModelSolution,"Update solution"),mt);function bt(e){var n=e.cta,t=e.replId,r=e.isGroupProject,o=e.openIOtesterPane,a=(0,i.Z)(c.useState(null),2),u=a[0],s=a[1],d=function(){return s(null)},p=(0,at.Z)(),f=(0,V.Z)().fs,v=(0,i.Z)(c.useState(0),2),h=v[0],m=v[1];c.useEffect((function(){if(p&&!(0,ct.T3)(p)&&!(0,ct.sL)(p)){var e=f.watchTextFile(p,{onChange:function(e){e.changeSource===lt.Fl.Local&&m(Date.now())}});return e}}),[p,f,m]);var y=Boolean(u&&[C.Sy.PublishTemplate,C.Sy.EditTemplate].includes(u));return c.useEffect((function(){n===C.Sy.ReviewSubmission&&(nt.Z.get("annotations/educationModalDismissed")||(s(n),nt.Z.set("annotations/educationModalDismissed",!0)))}),[n]),(0,l.BX)(l.HY,{children:[yt[n]&&(0,l.tZ)(g.ZP,{onClick:function(){return s(n)},text:yt[n],iconLeft:(0,l.tZ)(k.Z,{})}),(0,l.tZ)(Z.Z,{isOpen:u===C.Sy.Submit||u===C.Sy.Resubmit,onRequestClose:d,maxWidth:512,children:(0,l.tZ)(ot,{replId:t,onDone:d,isResubmit:u===C.Sy.Resubmit,lastUpdated:h,openIOtesterPane:o})}),(0,l.tZ)(Re.Z,{preventClose:!0,isOpen:y,onRequestClose:d,width:r?"large":"medium",children:(0,l.tZ)(tt.Z,{replId:t,onDone:d})}),(0,l.tZ)(Z.Z,{isOpen:u===C.Sy.UpdateModelSolution,onRequestClose:d,maxWidth:600,children:(0,l.tZ)(Zt,{replId:t,onDone:d})})]})}var xt=t(87653),wt=t(41238),kt={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"K"},It={type:"context",icon:(0,l.tZ)(wt.Z,{}),label:"",description:"Type a command...",keyboardShortcut:kt},Pt=(0,u.cn)(!1),St=(0,u.cn)(null,(function(e,n,t){if(e(Pt))return n(Ct,null),void n(Pt,!1);t&&n(Ct,t),n(Pt,!0)})),Ct=(0,u.cn)(null),Rt=(0,u.cn)((function(e){var n=e(Et);return{data:It,commands:function(){return n}}})),Et=(0,u.cn)([]),Tt=(0,u.cn)((function(e){var n=e(Rt),t=e(Ct);return t?[n,t]:n})),Dt=t(70917),Ut=t(29163),Mt=t(5257),_t=t(99534),Gt=(0,Dt.iv)([m.l0.align.center,m.l0.p(4),m.l0.borderRadius(8),m.l0.rowWithGap(4),{fontSize:m.TV.fontSizeDefault,lineHeight:"normal"}]),Bt=(0,Dt.iv)({color:"inherit"});function Nt(e){var n,t=null===(n=e.highlightRanges)||void 0===n?void 0:n.filter((function(e){return e.to>0}));return(0,l.BX)(m.Tg,{elevated:!0,style:{color:e.active?m.TV.foregroundDefault:m.TV.foregroundDimmer},css:Gt,children:[e.icon,(0,l.tZ)(m.xv,{css:Bt,children:(null===t||void 0===t?void 0:t.length)?(0,l.tZ)(gn.xK,{style:{color:(e.active,m.TV.foregroundDimmest)},matchStyle:{fontWeight:m.TV.fontWeightBold,color:m.TV.foregroundDefault},source:e.label,matches:t.map((function(e){return{column:e.from,length:e.to-e.from}}))}):e.label})]})}var At=m.KD.button;function Ot(e){var n=e.onClick,t=(0,_t.Z)(e,["onClick"]);return(0,l.tZ)(At,{css:[m.l0.reset.button],onClick:n,children:(0,l.tZ)(Nt,(0,R.Z)({},t))})}var Xt=t(33279),jt=(0,Dt.iv)([m.l0.p(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween]),Lt=(0,Dt.iv)([m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.growAndShrink(1)]);function zt(e){var n=e.content||(0,l.BX)(l.HY,{children:[(Array.isArray(e.item)?e.item:[e.item]).map((function(e,n){return(0,l.tZ)(Nt,{icon:e.icon,label:e.label,active:e.active,highlightRanges:e.highlightRanges},e.label+n)})),e.description?(0,l.tZ)(m.xv,{variant:"small",color:e.active?"dimmer":"dimmest",css:[m.l0.flex.growAndShrink(1)],children:e.description}):null]});return(0,l.BX)(m.Tg,{elevated:e.active,css:jt,children:[(0,l.tZ)(m.G7,{css:Lt,children:n}),e.keyboardShortcut?(0,l.tZ)(Xt.Z,{shortcut:e.keyboardShortcut}):null]})}var Ft=b.K.div;function Ht(e){var n=e.isLoading||e.items.length?e.items.map((function(n,t){var r=n.data,i=r.label,o=r.icon,a=n.match.render,c=t===e.highlightedIndex,u=a&&"content"in a?a.content:void 0,s=a&&"ranges"in a?a.ranges:void 0;return(0,l.tZ)(Ft,(0,oe.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:n,index:t})),{children:u?(0,l.tZ)(zt,{active:c,description:r.description,keyboardShortcut:r.keyboardShortcut,content:u}):(0,l.tZ)(zt,{active:c,description:r.description,keyboardShortcut:r.keyboardShortcut,item:{icon:o,label:i,active:c,highlightRanges:s}})}),(0,Mt.k)(n))})):null;return(0,l.tZ)(Ft,(0,oe.Z)((0,R.Z)({},e.getMenuProps()),{css:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto")],children:n}))}var Wt=(0,c.memo)(Ht),$t=b.K.div,Vt=b.K.input,Kt=(0,Dt.iv)([w.l0.height("100%"),w.l0.flex.growAndShrink(1),w.l0.color.foregroundDefault,w.l0.display.block,w.l0.py(8),{fontSize:w.TV.fontSizeSubheadDefault,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:w.TV.foregroundDimmest},"&:hover::placeholder":{color:w.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:w.TV.foregroundDimmest}}]);function qt(e){var n=(0,Mt.Z)({onSelect:e.onSelect,initialCommand:e.initialCommand}),t=n.combobox;return(0,l.BX)(m.Tg,{elevated:!0,className:e.className,css:[w.l0.flex.growAndShrink(1),w.l0.borderRadius(8),w.l0.overflow("hidden"),w.l0.maxHeight("70vh")],children:[(0,l.BX)($t,(0,oe.Z)((0,R.Z)({},t.getComboboxProps()),{css:[w.l0.rowWithGap(4),w.l0.pl(4),w.l0.pr(8),w.l0.align.center],children:[(0,l.tZ)(b.Z,{css:[w.l0.py(8),w.l0.rowWithGap(4)],children:n.path.map((function(e,t){var r=e.data,i=r.label,o=r.icon,a=i+t,c=function(){n.resetToIndex({index:t,focus:!0})};return 0===t?(0,l.tZ)(Ut.Z,{alt:"Commands",onClick:c,children:n.isLoading?(0,l.tZ)(de.Z,{}):(0,l.tZ)(wt.Z,{})},a):(0,l.tZ)(Ot,{label:i,icon:o,onClick:c},a)}))}),(0,l.tZ)(Vt,(0,R.Z)({css:[Kt]},t.getInputProps({value:n.inputValue,autoFocus:!0,ref:n.inputRef,onChange:function(e){return n.setInputValue(e.currentTarget.value)},onKeyDown:function(t){"Enter"===t.key&&0===n.items.length&&e.onSubmit?e.onSubmit(t.currentTarget.value):"ArrowLeft"!==t.key&&"ArrowRight"!==t.key?"Backspace"===t.key&&n.handleBackspace():n.handleLeftRightArrow(t.key)},placeholder:n.placeholder}))),n.keyboardShortcut?(0,l.tZ)(Xt.Z,{shortcut:n.keyboardShortcut}):null]})),(0,l.tZ)(Wt,{items:n.items,getMenuProps:t.getMenuProps,getItemProps:t.getItemProps,highlightedIndex:t.highlightedIndex,isLoading:n.isLoading})]})}var Yt=t(58967),Qt=t(16965),Jt=t(21131),er=t(88961),nr=t(47875);function tr(e,n){if("object"!==typeof n)return null;var t="string"===typeof n.action?n.action:null;if(!t)return null;if("layout"===e){if("split"===t){var r="string"===typeof n.pane?{type:n.pane}:{type:"commands",data:{autoFocus:!1}};return{action:n.action,placement:n.placement,pane:r}}if("reset"===t)return{action:"resetLayout"}}if("file"===e){var i="string"===typeof n.path?n.path:null;return i&&("openOrCreate"===n.action||"delete"===n.action)?{action:n.action,path:i}:null}if("tabs"===e){if("close"===t&&"string"===typeof n.type)return{action:"closeTab",type:n.type};if("open"===t)return{action:"openTab",pane:"string"===typeof n.type?{type:n.type}:{type:"commands",data:{autoFocus:!1}}}}return"codegen"===e&&"generate"===t&&"string"===typeof n.prompt?{action:"generate",prompt:n.prompt}:null}function rr(e){if("object"!==typeof e)return{error:"not an object",actions:null};var n=e&&"result"in e?e.result:null;if(!Array.isArray(n))return{error:"no commands",actions:null};var t=[],r=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if("object"===typeof u){var s=!0,d=!1,p=void 0;try{for(var f,v=Object.entries(u)[Symbol.iterator]();!(s=(f=v.next()).done);s=!0){var h=(0,i.Z)(f.value,2),m=tr(h[0],h[1]);m&&t.push(m)}}catch(g){d=!0,p=g}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}}}}catch(g){o=!0,a=g}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return 0===t.length?{error:"no commands",actions:null}:{error:null,actions:t}}var ir=t(29351),or=t(50146),ar=t(74275),lr=t(12771),cr=t(11731),ur=t(54992),sr=(0,u.cn)(null,(function(e,n,t){var r=e((0,Hn.z)(t.fromPaneId));if(r.isDialog){n(Wn.$,r.paneId);var i=e(Hn.Eh).some((function(e){return"tile"===e.type}));n(ir.g2,i?{pane:t.data,placement:"leftOf",makeActive:!0}:{pane:t.data,placement:"replace",makeActive:!0})}else n($n.v,{paneId:t.fromPaneId,data:t.data,makeActive:!0})})),dr=(0,u.cn)(null,(function(e,n,t){var r=e(Fn.g4),i=(0,lr._F)(r,"topLeft"),o=e(Hn.Eh).find((function(n){return e(n.data).type===t.pane.type}));if(o)n(cr.Oe,o.paneId);else if(i){var a=i.paneGroup.panes.find((function(n){var t=e((0,Hn.z)(n));if(t.isHidden)return!1;var r=e(t.data);return"filetree"!==r.type&&(!t.isCommited&&!(0,ur.Zh)(r.type))}));a?n($n.v,{paneId:a,data:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n(ir.gN,{pane:t.pane,edge:"left"}),n(cr.Et,{pane:t.pane,paneGroupPath:i.path,activate:!0,index:0}))}else n(ir.g2,{pane:t.pane,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));function pr(){return(0,u.b9)(dr)}var fr=t(90914),vr=t(17780),hr=t(39),mr=t(3032),gr=t(78120);function Zr(e){return yr.apply(this,arguments)}function yr(){return(yr=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vr.l){e.next=2;break}throw new Error("Expected apolloClient");case 2:return e.next=4,vr.l.query({query:fr.R1,variables:{input:n}});case 4:if("GenerateCodeResult"===(t=e.sent.data).generateCode.__typename){e.next=7;break}throw new Error(t.generateCode.__typename);case 7:return e.abrupt("return",t.generateCode.code);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var br=(0,u.cn)(null,(function(e,n){n(Vn.iH,{tiling:null,floating:[]})})),xr=((0,u.cn)(null,(function(e,n){var t=Ln()(),r=e(Fn.g4);n(Vn.iH,(0,Xn.ZP)(r,(function(e){(0,zn.m)(e,{id:Ln()(),relativeTo:["tiling"],placement:"replace",panes:[t]})})))})),(0,u.cn)(null,function(){var e=(0,r.Z)(a().mark((function e(n,t,r){var i,o,l,c,u,s,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.action,o=r.fs,e.t0=i.action,e.next="openOrCreate"===e.t0?4:"delete"===e.t0?16:"split"===e.t0?19:"openTab"===e.t0?22:"closeTab"===e.t0?24:"resetLayout"===e.t0?26:"clearLayout"===e.t0?28:"generate"===e.t0?30:41;break;case 4:return e.next=6,o.stat(i.path);case 6:if(e.sent.exists){e.next=14;break}return e.next=10,o.writeFile(i.path,"");case 10:return e.next=12,o.flush();case 12:return e.next=14,o.persist({skipDebounce:!0});case 14:return t(mr.U,{path:i.path}),e.abrupt("break",41);case 16:return e.next=18,o.deleteFile(i.path);case 18:case 40:return e.abrupt("break",41);case 19:return l=n(Kn.J1),t(ir.g2,{pane:i.pane,placement:i.placement,makeActive:!1,relativeTo:l||["tiling"]}),e.abrupt("break",41);case 22:return t(dr,{pane:i.pane}),e.abrupt("break",41);case 24:return"*"===i.type?t(br,{}):t(or.AW,i.type),e.abrupt("break",41);case 26:return t(ar.B,{}),e.abrupt("break",41);case 28:return t(br,{}),e.abrupt("break",41);case 30:if((c=n(Fn.QP))||(u=n(Hn.Eh).find((function(e){return"codeEditor"===n(e.data).type})))&&"codeEditor"===(s=n(u.data)).type&&(c=s.data.path),c){e.next=34;break}return e.abrupt("return");case 34:return d=(0,hr.Sf)(c),e.next=37,Zr({language:d,replId:r.replId,prompt:i.prompt});case 37:return p=e.sent,e.next=40,new Promise((function(e,n){if(c)var t=o.watchTextFile(c,{onError:function(t){n(t),e()},onReady:function(n){var r=n.writeChange,i=n.initialContent;r(gr.as.of({from:i.length,insert:p},i.length)),t(),e()}});else n(new Error("Expected path"))}));case 41:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())),wr="https://llmide.amasad.repl.co";function kr(e){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(wr+"/"+encodeURIComponent(n),{mode:"cors"});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",{json:r,error:null});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{json:null,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var Pr=(0,u.cn)(!1),Sr=(0,u.cn)(!1);function Cr(){var e=(0,u.Dv)(Pr);return(0,u.Dv)(Sr)?(0,l.tZ)(Rr,{}):e?(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.coverContainer,m.l0.borderRadius(8),m.l0.center],children:(0,l.tZ)(de.Z,{})}):null}function Rr(){var e=(0,u.b9)(Sr);return(0,c.useEffect)((function(){var n=setTimeout((function(){e(!1)}),600);return function(){clearTimeout(n)}}),[e]),(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.coverContainer,m.l0.borderRadius(8),m.l0.center],children:(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(er.Z,{color:m.TV.accentNegativeDefault}),(0,l.tZ)(m.xv,{children:"Something went wrong, try again"})]})})}function Er(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,u.b9)(Et);(0,c.useEffect)((function(){if(n)return t((function(n){return(0,Ee.Z)(n).concat([e])})),function(){t((function(n){return n.filter((function(n){return n!==e}))}))}}),[t,e,n])}function Tr(){var e=(0,u.Dv)(Pt),n=(0,u.b9)(St),t=(0,u.Dv)(Tt),i=(0,V.Z)().session,o=(0,Yt.Z)("commandBar").trackTimeToLoadFileStart;(0,c.useEffect)((function(){return i.onCommandBarToggled((function(t){t!==e&&n()}))}),[i,n,e]),(0,c.useEffect)((function(){i.setIsCommandBarOpen(e)}),[i,e]);var s=function(e){var n=e.isOpen,t=e.onDone,i=(0,V.Z)().fs,o=(0,Qt.Z)(t),l=(0,nr.Q)("flagGhostrunner"),s=(0,ye.Z)(),d=(0,Jt.Z)((function(){return(0,u.cn)(null,function(){var e=(0,r.Z)(a().mark((function e(n,t,r){var l,c,u,d,p,f,v,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(nr.H).flagGhostrunner){e.next=2;break}return e.abrupt("return");case 2:return t(Pr,!0),e.next=5,kr(r);case 5:if(!(l=e.sent).error){e.next=10;break}return t(Pr,!1),t(Sr,!0),e.abrupt("return");case 10:if((c=rr(l.json)).actions){e.next=15;break}return t(Pr,!1),t(Sr,!0),e.abrupt("return");case 15:u=!0,d=!1,p=void 0,e.prev=16,f=c.actions[Symbol.iterator]();case 18:if(u=(v=f.next()).done){e.next=25;break}return h=v.value,e.next=22,t(xr,{fs:i,action:h,replId:s});case 22:u=!0,e.next=18;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(16),d=!0,p=e.t0;case 31:e.prev=31,e.prev=32,u||null==f.return||f.return();case 34:if(e.prev=34,!d){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(31);case 39:t(Pr,!1),o.current();case 41:case"end":return e.stop()}}),e,null,[[16,27,31,39],[32,,34,38]])})));return function(n,t,r){return e.apply(this,arguments)}}())}),[o,i,s]),p=(0,u.b9)(d);return(0,c.useEffect)((function(){if(l&&n&&window.webkitSpeechRecognition){var e=new window.webkitSpeechRecognition;e.onresult=function(e){var n=e.results[0][0].transcript;p(n)},e.start()}}),[p,l,n]),p}({onDone:n,isOpen:e});return(0,l.BX)(Re.Z,{isOpen:e,onRequestClose:function(){n()},hideCloseButton:!0,children:[(0,l.tZ)(qt,{onSubmit:s,onSelect:function(e){if("openFile"===e.data.type){var t=e.data.deeplink;o(t.path),i.openFile(t.path),i.updateDeeplink(t)}"action"===e.data.type&&e.data.run(),n()},initialCommand:t}),(0,l.tZ)(Cr,{})]})}var Dr=(0,c.memo)(Tr),Ur=t(95596),Mr=t(39715),_r=t(95901),Gr=t(9117),Br=t(43804),Nr=t(48869),Ar=t(6625),Or=t(88679),Xr=t(48287),jr=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""},Lr=function(e){var n=e.hideModal,t=(0,V.Z)(),o=t.dotReplit,u=t.session,s=(0,Ar.Z)(),d=(0,pn.Z)().showError,p=(0,i.Z)(c.useState(!1),2),f=p[0],v=p[1],h=(0,i.Z)(c.useState(""),2),Z=h[0],y=h[1],b=c.useCallback((function(){n(),u.openFile(Or.Z)}),[u,n]),x=c.useCallback((function(){return d("Failed to update run command, please try again or contact support")}),[d]),k=(0,i.Z)(c.useState(null),2),I=k[0],P=k[1];c.useEffect((function(){var e=function(){var e=(0,r.Z)(a().mark((function e(){var n,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,o.getConfig();case 3:if(t=e.sent,s.current){e.next=6;break}return e.abrupt("return");case 6:t.errorMessage?P({error:t.error,errorMessage:t.errorMessage}):P(null),r=null===t||void 0===t||null===(n=t.config)||void 0===n?void 0:n.run,y(jr(r));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[o,s]);var S=c.useCallback((0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Z?(0,Xr.KQ)(Z):(0,Xr.xz)("run"),v(!0),e.next=5,o.updateDotReplit([t]);case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x();case 11:return e.prev=11,v(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[Z,x,o,n]);return(0,l.BX)(m.G7,{css:[w.l0.colWithGap(8),w.l0.p(2),f&&w.l0.cursor.progress],children:[(0,l.tZ)(m.h4,{level:1,variant:"text",css:[w.l0.fontWeight.normal,w.l0.color.foregroundDimmer],children:"Run Command"}),I?(0,l.tZ)(m.xv,{children:I.errorMessage}):(0,l.BX)(l.HY,{children:[(0,l.tZ)(m.II,{value:Z,onChange:function(e){return y(e.target.value)},spellCheck:!1}),(0,l.BX)(m.G7,{css:[w.l0.rowWithGap(12),w.l0.mt(12)],children:[(0,l.tZ)(g.ZP,{onClick:b,text:"Advanced"}),(0,l.tZ)(m.G7,{css:w.l0.flex.grow(1)}),(0,l.tZ)(g.ZP,{colorway:"blue",text:"Save",onClick:S})]})]})]})},zr=t(42895),Fr=t(98146),Hr=t(42699),Wr=t(71255),$r=t(85565),Vr=t(80437),Kr=t(97808),qr=t(41034),Yr=t(79500),Qr=t(30880),Jr=t(57981),ei="https://linkedin.com/sharing/share-offsite";var ni="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651";var ti=function(e){var n=e.lessonSlug,t=e.courseSlug,r=(0,pn.Z)().showConfirm;if(!n||!t)return null;var i=(0,Kr.QW)(t),o=(0,Kr.qv)(t,n);if(!o)return null;var a=o.ordinalLabel,c=(0,Kr.tD)(i.socialSharingText,o),u="".concat(c," ").concat(i.sharableLink),s=(0,Wr.Z)({text:c,url:i.sharableLink}),d=function(e){var n=e.url;return"".concat(ei,"?url=").concat(encodeURIComponent(n))}({url:i.sharableLink}),p=function(e){var n=e.url,t=e.hashtag,r=e.redirectBackTo,i=new URLSearchParams;i.append("href",n),r&&i.append("redirect_uri",r),t&&(t.startsWith("#")||(t="#".concat(t)),i.append("hashtag",t));var o=i.toString();return"".concat(ni,"&").concat(o)}({url:i.sharableLink,hashtag:i.socialHashtag}),f=[{url:s,icon:$r.Z,base:Wr.c,cta:"Share on Twitter",color:Vr.Z.brands.twitter},{url:d,icon:Jr.Z,base:ei,cta:"",color:Vr.Z.brands.linkedin},{url:p,icon:Qr.Z,base:ni,cta:"",color:Vr.Z.brands.facebook}];return(0,l.BX)(b.Z,{children:[(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center,w.l0.pr(24)],children:[(0,l.tZ)(b.Z,{css:{fontSize:48},children:"\ud83e\udd73"}),(0,l.BX)(x.x,{variant:"headerDefault",children:["Congrats on completing ",a,"!"]})]}),(0,l.tZ)(x.x,{variant:"subheadDefault",css:[w.l0.py(12)],children:"Share your progress"}),(0,l.BX)(b.Z,{css:[w.l0.position.relative,w.l0.borderRadius(8),w.l0.backgroundColor.backgroundHigher,w.l0.py(8),w.l0.px(12)],children:[(0,l.tZ)(b.Z,{css:w.l0.pr(16),children:u}),(0,l.tZ)(m.hU,{css:[w.l0.position.absolute,w.l0.top(8),w.l0.right(8)],alt:"Copy",size:18,tooltipHidden:!0,onClick:function(){r("Copied to clipboard!"),(0,Yr.Z)(u),(0,Hr.l)({action:"copied_share_text",lessonSlug:n,courseSlug:t,origin:"lesson_complete_modal"})},children:(0,l.tZ)(qr.Z,{size:16})})]}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.center,w.l0.pt(16),w.l0.align.center],children:[(0,l.tZ)(m.ZP,{outlined:!0,text:"Back to the learning hub",href:"/learn/".concat(t,"/hub")}),(0,l.tZ)(b.Z,{css:[w.l0.rowWithGap(8),w.l0.align.center],children:f.map((function(e){var r=e.url,i=e.icon,o=e.base,a=e.cta,c=e.color;return(0,l.tZ)(g.ZP,{css:[{backgroundColor:c,color:"white"}],onClick:function(){window.open(r,"_blank"),(0,S.j)(S.U3.EXTERNAL_LINK_VIEWED,{url:o,placement:"lesson-complete-modal",campaign:t,lessonSlug:n})},text:a,iconLeft:(0,l.tZ)(i,{})},r)}))})]})]})},ri=function(e){var n=e.lesson,t=(0,pn.Z)().showError,r=(0,Fr.$0)().fireCircularBurstFrom,o=(0,c.useRef)(null),a=(0,zr.T)(),u=(0,c.useState)(!1),s=u[0],d=u[1],p=(0,i.Z)(function(e){var n=(0,R.Z)({},_,e);return D.D(B,n)}({onError:function(){return t("Something went wrong")},onCompleted:function(e){var i,l;"UpdatedUserCourseLesson"!==(null===(i=e.completeUserCourseLesson)||void 0===i?void 0:i.__typename)?t((null===(l=e.completeUserCourseLesson)||void 0===l?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!a&&r({element:o.current}),d(!0)):t("Something went wrong")}}),2),f=p[0],v=p[1].loading;return(0,l.BX)(l.HY,{children:[null!==n.timeCompleted?(0,l.tZ)(m.zx,{ref:o,disabled:!0,text:"Lesson completed \ud83c\udf89",colorway:"primary"}):(0,l.tZ)(m.zx,{iconLeft:v?(0,l.tZ)(de.Z,{}):void 0,onClick:function(){(0,Hr.l)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),f({variables:{input:{userLessonId:n.id}}})},text:v?"Verifying\u2026":"Mark lesson as complete",colorway:"primary",css:[v&&m.pt.backgroundPulse()]}),(0,l.tZ)(m.u_,{isOpen:s,onRequestClose:function(){return d(!1)},children:(0,l.tZ)(ti,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})},ii=t(92162),oi=t(87514);function ai(e){var n=e.lesson,t=(0,ii.Un)(),r=(0,ii.$x)(),i=(0,nr.Q)("flagLayoutNavigator");return!t&&i?(0,l.tZ)(m.zx,{colorway:"primary",iconLeft:(0,l.tZ)(oi.Z,{}),text:"Show tutorial",onClick:function(){return r()}}):(0,l.tZ)(ri,{lesson:n})}var li=t(41664),ci=t.n(li),ui=t(33773),si=t(36316),di=t(11554),pi=t(68480);function fi(){return(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.G7,{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",css:[m.l0.width(8),m.l0.height(8),m.l0.borderRadius("full"),m.l0.backgroundColor.accentPositiveDefault,{alignSelf:"start",boxShadow:"0 0 12px "+m.TV.accentPositiveDefault}]})})}function vi(e){var n=e.repl,t=(0,i.Z)(c.useState(!1),2),r=t[0],o=t[1];return(0,l.BX)($.Z,{isOpen:r,maxWidth:460,onClickOutside:function(){},padding:0,placement:"bottom-start",growToMaxWidth:!0,zIndex:pi.Is-1,elevated:!1,children:[(0,l.BX)(m.G7,{tag:"button",dataCy:"ws-repl-info-container",onClick:function(){o(!0)},css:[m.l0.flex.growAndShrink(1),m.l0.align.center,m.l0.cursor.pointer,m.l0.rowWithGap(8),m.l0.p(4),m.l0.borderRadius(8),m.l0.color.foregroundDefault,r&&{pointerEvents:"none"},{border:"1px solid transparent",backgroundColor:"transparent","&:hover":{borderColor:m.TV.outlineDimmest}}],children:[(0,l.tZ)(si.Z,{repl:n}),n.isAlwaysOn?(0,l.tZ)(fi,{}):null,(0,l.tZ)(m.G7,{css:[m.l0.p(4)],children:(0,l.tZ)(ui.Z,{})})]}),(0,l.tZ)(m.Tg,{background:"default",css:[m.l0.borderRadius(8)],children:(0,l.tZ)(di.Z,{setIsEditing:o})})]})}var hi=t(18935),mi=t(3462),gi=t(83117),Zi=t(92876),yi=t(15794),bi=t(2858),xi=(0,Dt.F4)({"0%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0.6)"},"50%":{transform:"scale(1)",boxShadow:"0 0 0 8px rgba(235, 64, 52, 0)"},"80%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"},"100%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"}}),wi=function(){var e=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="c6ef855",e.prev=1,e.next=4,(0,yi.LK)("/data/check_version");case 4:e.sent.version!==t&&n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Zi.Tb(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),ki=function(){var e=(0,c.useState)(!1),n=e[0],t=e[1],i=(0,c.useState)(!1),o=i[0],u=i[1],s=(0,c.useContext)(bi.Z);if((0,c.useEffect)((function(){var e=setInterval((function(){return wi((function(){(0,S.j)(S.U3.REFRESH_APP_USED,{action:"triggered"}),t(!0)}))}),1728e5);return function(){clearInterval(e)}}),[]),!n)return null;var d=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),(0,S.j)(S.U3.REFRESH_APP_USED,{action:"refresh"}),!(null===s||void 0===s?void 0:s.fs)){e.next=7;break}return e.next=5,s.fs.flush();case 5:return e.next=7,s.fs.persist({skipDebounce:!0});case 7:window.location.reload(),u(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.BX)(l.HY,{children:[(0,l.BX)(m.G7,{css:[m.l0.position.relative,m.l0.pl(12)],children:[(0,l.tZ)(m.u,{delay:500,tooltip:"You're using an old version of Replit. Refresh this page to get the latest features!",children:(0,l.tZ)(m.zx,{outlined:!0,iconLeft:(0,l.tZ)(gi.Z,{}),text:"Update Workspace",colorway:"grey",onClick:d})}),(0,l.tZ)(m.G7,{css:{position:"absolute",top:1,right:-1,background:"rgba(235, 64, 52, 1)",borderRadius:"50%",height:5,width:5,boxShadow:"0 0 0 0 rgba(235, 64, 52, 1)",transform:"scale(1)",animation:"".concat(xi," 2s infinite"),zIndex:2}})]}),(0,l.tZ)(m.u_,{isOpen:o,onRequestClose:function(){u(!1)},children:(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.xv,{variant:"subheadDefault",css:[m.l0.pb(8)],children:"Saving your work"}),(0,l.tZ)(m.xv,{children:"Making sure you'll find your work after reloading\u2026"})]})})]})},Ii=t(85485),Pi=t(57996),Si=t(16647),Ci=t(14868),Ri=t(73092),Ei=t(197),Ti=t(27668),Di=m.KD.a;function Ui(){var e=(0,Ci.Iv)(),n=(0,Ci.W8)();return(0,l.tZ)(m.hU,{alt:(n?"Close":"Open")+" sidebar",onClick:function(){return e()},tooltipPlacement:"right",children:(0,l.tZ)(Si.Z,{})})}function Mi(e){var n=e.repl,t=e.currentUser,r=(0,nr.Q)("flagLayoutNavigator");return(0,l.BX)(m.G7,{css:[m.l0.flex.row,m.l0.align.center,m.l0.width("calc(50% - ".concat((pi.XD+q.al.small+8)/2,"px)")),(0,et.Z)({},(0,Ii.et)("tabletMax"),[m.l0.width("calc(50% - ".concat((pi.XD+q.al.large+8)/2,"px)"))])],children:[(0,l.tZ)(ci(),{as:"/~",href:"/home",passHref:!0,children:(0,l.tZ)(Di,{css:[m.l0.center,m.l0.width(32),m.l0.height(32)],children:(0,l.tZ)(Pi.N2,{})})}),(null===t||void 0===t?void 0:t.isFirewallMode)?(0,l.tZ)(mi.Z,{isWorkspace:!0}):null,(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1),m.l0.maxWidth(530),m.l0.rowWithGap(4),m.l0.align.center,{"& > span":[m.l0.viewStyle,m.l0.flex.shrink(1)]}],children:[(0,l.tZ)(vi,{repl:n}),r?(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(Ui,{}),(0,l.tZ)(Bi,{})]}):(0,l.tZ)(hi.Z,{}),(0,l.tZ)(ki,{})]})]})}var _i=(0,Dt.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),Gi={root:(0,Dt.iv)([m.l0.height(12),m.l0.width(12)]),pulse:(0,Dt.iv)({animation:"".concat(_i," 2s infinite")})};function Bi(){var e=(0,Ri.Z)(),n=e.isSaving,t=e.isOffline;return(0,l.BX)(m.G7,{css:Gi.root,children:[t?(0,l.tZ)(m.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,l.tZ)(Ei.Z,{size:12,color:m.TV.redDefault})}):null,n?(0,l.tZ)(m.u,{tooltip:"Saving",placement:"right",children:(0,l.tZ)(Ti.Z,{css:Gi.pulse,size:12,color:m.TV.foregroundDimmest})}):null]})}var Ni=t(61193),Ai=[C.Sy.Submit,C.Sy.Resubmit,C.Sy.UpdateModelSolution,C.Sy.PublishTemplate,C.Sy.EditTemplate,C.Sy.ReviewSubmission],Oi={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"};function Xi(e){var n,t,r,o,a,s=(0,V.Z)(),d=s.runner,p=s.presence,f=s.replbox,v=(0,ye.Z)(),h=(0,K.Z)({presence:p}),g=(0,i.Z)(c.useState(d),2),Z=g[0],y=g[1],b=(0,i.Z)(c.useState(!1),2),x=b[0],w=b[1],k=(0,_r.e)(Br.H.Run),I=(0,_r.e)(Br.H.Share),P=(0,i.Z)(c.useState(!1),2),C=P[0],E=P[1],T=function(e){var n=(0,R.Z)({},L,e);return A.a(H,n)}({variables:{id:v}}).data,D=(0,u.b9)(Yn),U=be(),M=(0,u.b9)(St),_=(0,Ni.c)("flag-run-button-editor"),G=_.enabled,B=_.loading,N="Repl"===(null===T||void 0===T?void 0:T.repl.__typename)?T.repl:null,O="replbox"===(null===N||void 0===N||null===(n=N.lang)||void 0===n?void 0:n.engine)&&"html"!==(null===N||void 0===N?void 0:N.lang.id);(0,c.useEffect)((function(){y(O?f:d)}),[O,f,d]);var X=(0,c.useRef)(null),j=(0,c.useRef)(null),z=(0,c.useRef)(x&&(null===I||void 0===I?void 0:I.isActive)),F=(0,nr.Q)("flagLayoutNavigator");(0,c.useEffect)((function(){z.current&&!(null===I||void 0===I?void 0:I.isActive)&&w(!1),z.current=x&&(null===I||void 0===I?void 0:I.isActive)}),[I,x]),(0,c.useEffect)((function(){(null===I||void 0===I?void 0:I.isActive)&&(x&&j.current?null===I||void 0===I||I.delegateTooltip(j.current):I.delegateTooltip(X.current))}),[I,x,j]);var Y="Team"===(null===N||void 0===N||null===(t=N.owner)||void 0===t?void 0:t.__typename),Q=Boolean("Team"===(null===N||void 0===N||null===(r=N.owner)||void 0===r?void 0:r.__typename)&&(null===(o=null===N||void 0===N?void 0:N.owner.capabilities)||void 0===o?void 0:o.isEducationPlan)),J=Ai.find((function(e){return e===(null===N||void 0===N?void 0:N.workspaceCta)})),ee=!Q&&(null===N||void 0===N?void 0:N.currentUserPermissions.editMultiplayers);return(0,Gr.x)(Oi,{enabled:!Q,run:function(){w(!0)}}),Er({match:Mr.pl,data:{type:"action",label:"Multiplayer",icon:(0,l.tZ)(Ur.Z,{}),description:"Open multiplayer mode",run:function(){w(!0)},keyboardShortcut:Oi}},{enabled:!Q}),(0,l.BX)(m.Tg,{elevated:!F,tag:"header",css:[m.l0.height(60),m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween,m.l0.p(8),m.l0.position.relative,{paddingLeft:40}],children:[(0,l.tZ)(Mi,{repl:e.repl,currentUser:e.currentUser}),(0,l.tZ)(m.G7,{innerRef:null===k||void 0===k?void 0:k.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null===k||void 0===k?void 0:k.isActive)&&k.next()},css:[m.l0.position.absolute,m.l0.height(42),{transform:"translate(-50%, -50%)",left:"50%",top:"50%"}],children:!B&&G?(0,l.BX)(l.HY,{children:[(0,l.BX)($.Z,{onClickOutside:function(){return E(!1)},isOpen:C,padding:8,children:[(0,l.tZ)(q.ZP,{runner:Z,disableTooltip:null===k||void 0===k?void 0:k.isActive}),(0,l.tZ)(Lr,{hideModal:function(){return E(!1)}})]}),(0,l.tZ)(m.G7,{css:[m.l0.position.absolute,m.l0.right(-29),m.l0.top(8)],children:(0,l.tZ)(m.hU,{alt:"Configure Repl run",size:28,onClick:function(){E((function(e){return!e}))},css:[m.l0.color.foregroundDimmest],children:(0,l.tZ)(Nr.Z,{})})})]}):(0,l.tZ)(q.ZP,{runner:Z,disableTooltip:null===k||void 0===k?void 0:k.isActive})}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),m.l0.align.center,m.l0.justify.end],children:[(null===N||void 0===N?void 0:N.lesson)?(0,l.tZ)(ai,{lesson:N.lesson}):null,(0,l.tZ)(Ce,{users:h,onAvatarClick:U}),J?(0,l.tZ)(m.G7,{css:[m.l0.pr(8)],children:(0,l.tZ)(bt,{cta:J,replId:v,isGroupProject:Boolean(null===N||void 0===N||null===(a=N.template)||void 0===a?void 0:a.isGroupProject),openIOtesterPane:function(){D({pane:{type:"autograder"}})}})}):null,ee?(0,l.tZ)(m.G7,{innerRef:X,children:(0,l.tZ)(Bn,{showPopover:N.currentUserPermissions.inviteGuests,children:(0,l.tZ)(m.zx,{onClick:function(){(0,S.j)(S.U3.INVITE_MODAL_OPENED,{language:N.lang.id,replId:N.id,source:"replEnvironment"}),w(!0)},iconLeft:(0,l.tZ)(W.Z,{}),text:"Invite"})})}):null,(0,l.tZ)(m.hU,{size:28,onClick:function(){M()},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,l.tZ)(xt.Z,{})})]}),(0,l.tZ)(Re.Z,{isOpen:x,onRequestClose:function(){return w(!1)},children:(0,l.tZ)(m.G7,{innerRef:j,children:Y?(0,l.tZ)(Mn,{replId:v}):(0,l.tZ)(On,{replId:v})})})]})}var ji=(0,c.memo)(Xi),Li=t(65908),zi=t(2383),Fi=t(14994),Hi=t(53800),Wi=t(91550),$i=t(91296),Vi=t.n($i),Ki=t(11533),qi=t(63736);function Yi(e){var n=e.path,t=e.line;return(0,l.BX)(m.G7,{css:[m.l0.colWithGap(4),m.l0.align.start,m.l0.flex.growAndShrink(1),m.l0.py(4)],children:[(0,l.BX)(m.Tg,{elevated:!0,css:[m.l0.rowWithGap(4),m.l0.borderRadius(8),m.l0.p(2)],children:[(0,l.tZ)(qi.Z,{path:n,size:12}),(0,l.BX)(m.xv,{variant:"small",children:[n,":",t.lineNumber]})]}),(0,l.tZ)(gn.xK,{source:t.content,matches:t.matches})]})}function Qi(){return(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(er.Z,{}),(0,l.tZ)(m.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function Ji(){return(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(er.Z,{}),(0,l.tZ)(m.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function eo(){return(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var no={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"};function to(e){var n,t=Vi()((function(e,n,t){(0,Ki.yC)(e).then(n).catch(t)}),200);return(0,Mr.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,l.tZ)(xt.Z,{}),keyboardShortcut:no},{match:(0,Mr.zf)({defaultScore:2}),commands:function(){var o=(0,r.Z)(a().mark((function r(o){var c,u,s,d,p,f,v,h,g,Z,y,b;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.search){r.next=2;break}return r.abrupt("return",[]);case 2:if(o.active||!e.activeOnly){r.next=4;break}return r.abrupt("return",[]);case 4:return c=Math.random(),n=c,r.next=8,new Promise((function(n,r){t({query:o.search,container:e.container},n,r)}));case 8:if(u=r.sent,s=u.results,d=u.error,p=u.isPartialResult,c===n){r.next=14;break}return r.abrupt("return",[]);case 14:if(null===d){r.next=18;break}if(o.active){r.next=17;break}return r.abrupt("return",[]);case 17:return r.abrupt("return",[{data:{type:"error",label:"error",icon:(0,l.tZ)(er.Z,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(Qi,{})}}}}]);case 18:for(f=[],v=!0,h=!1,g=void 0,r.prev=20,Z=function(){var e=(0,i.Z)(b.value,2),n=e[0];e[1].forEach((function(e){var t=e.matches[0].column;f.push((0,Mr.fA)({type:"openFile",label:n,icon:(0,l.tZ)(qi.Z,{path:n}),deeplink:{path:n,line:e.lineNumber,col:t}},{match:function(){var r=Zn.Z.match(o.search,e.content);return{score:(null===r||void 0===r?void 0:r.score)||1,render:{content:(0,l.tZ)(Yi,{path:n,line:e})},key:[n,e.lineNumber,t].join(":")}}}))}))},y=Object.entries(s)[Symbol.iterator]();!(v=(b=y.next()).done);v=!0)Z();r.next=29;break;case 25:r.prev=25,r.t0=r.catch(20),h=!0,g=r.t0;case 29:r.prev=29,r.prev=30,v||null==y.return||y.return();case 32:if(r.prev=32,!h){r.next=35;break}throw g;case 35:return r.finish(32);case 36:return r.finish(29);case 37:if(0!==f.length||!o.active){r.next=39;break}return r.abrupt("return",[{data:{type:"output",label:"",icon:(0,l.tZ)(m.G7,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(eo,{})}}}}]);case 39:if(!o.active){r.next=45;break}if(0!==f.length){r.next=44;break}return r.abrupt("return",[{data:{type:"output",label:"",icon:(0,l.tZ)(m.G7,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(eo,{})}}}}]);case 44:p&&f.push({data:{type:"error",label:"error",icon:(0,l.tZ)(er.Z,{})},match:function(){return{score:1/0,render:{content:(0,l.tZ)(Ji,{})}}}});case 45:return r.abrupt("return",f);case 46:case"end":return r.stop()}}),r,null,[[20,25,29,37],[30,,32,36]])})));return function(e){return o.apply(this,arguments)}}()})}var ro=t(42456),io=t(57353),oo=t(18374),ao=t(63035);function lo(){var e=(0,V.Z)().session,n=(0,i.Z)(c.useState(e.getInstructionsViewerVisible()),2),t=n[0],r=n[1];return c.useEffect((function(){return r(e.getInstructionsViewerVisible()),e.onInstructionsViewerToggled(r)}),[e]),t}var co=t(65e3),uo=t(40705),so=t(23445),po=t(69128),fo=t(54519),vo=["education","tutorial","instructions","git","packager","shell","runnerOutput","envEditor","debugger","database","replAuth","markdown","autograder","unitTests","docs","threadInbox","chat","webview","vnc","preferences","adminPanel"];function ho(){var e=(0,so.XP)(),n=e.repl,t=e.currentUser,r=Boolean(null===n||void 0===n?void 0:n.config.isServer),o=Boolean(null===n||void 0===n?void 0:n.config.isVnc),a=Boolean(null===t||void 0===t?void 0:t.isAdmin),l=Boolean(null===n||void 0===n?void 0:n.lang.supportsGit),c=lo(),s=(0,co.Z)().isTutorial,d=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),p=(0,uo.x)(),f=Boolean(null===p||void 0===p?void 0:p.packageSearch),v=(0,so.x5)()||Boolean(null===n||void 0===n?void 0:n.lang.hasDAP),h=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),m=Boolean((null===n||void 0===n?void 0:n.isProject)||(null===n||void 0===n?void 0:n.isProjectFork)),g=(0,po.Z)().language,Z=!m&&null!==g,y=(0,fo.$)(),b=(0,Ni.c)("flag-repl-auth-sidebar"),x=b.enabled,w=(b.loading,Boolean(x&&p));return(0,Jt.Z)((function(){return(0,u.cn)((function(e){var n=e(ao.gM),t=[],u=[[{type:"shell"},!0],[{type:"instructions"},c],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs"},!0],[{type:"webview"},r],[{type:"vnc"},o],[{type:"runnerOutput"},!n]];e(nr.H).flagLayoutNavigator&&u.push([{type:"git"},l],[{type:"packager"},f],[{type:"envEditor"},d],[{type:"debugger"},v],[{type:"tutorial"},s],[{type:"database"},h],[{type:"replAuth"},w],[{type:"autograder"},m],[{type:"unitTests"},Z],[{type:"education"},Boolean(y)],[{type:"preferences"},!0],[{type:"adminPanel"},a]);var p=!0,g=!1,b=void 0;try{for(var x,k=u[Symbol.iterator]();!(p=(x=k.next()).done);p=!0){var I=(0,i.Z)(x.value,2),P=I[0];I[1]&&t.push(P)}}catch(S){g=!0,b=S}finally{try{p||null==k.return||k.return()}finally{if(g)throw b}}return function(e){return e.sort((function(e,n){return vo.indexOf(e.type)-vo.indexOf(n.type)}))}(t)}))}),[r,a,o,c,l,f,d,v,y,Z,m,w,h,s])}function mo(){return(0,u.Dv)(ho())}var go=function(e,n,t){return{match:t||Mr.pl,data:{type:"openPane",pane:e,label:n.getTitle(e),icon:n.Icon({pane:e})}}};function Zo(){var e=(0,Hi.Se)();return(0,Jt.Z)((function(){return(0,u.cn)((function(n){var t=n(Fn.EP);return{data:{type:"context",label:"Recent",icon:(0,l.tZ)(Fi.Z,{})},commands:function(n){var r=n.search;return t.map((function(n){var t=(0,ur.Dp)({path:n});return go({type:t,data:{path:n}},e,(function(e){return r?(0,Mr.pl)(e):{score:10}}))}))}}}))}),[e])}function yo(){var e=(0,Hi.Se)(),n=mo();return(0,Jt.Z)((function(){return(0,u.cn)((function(t){var r=t(Hn.Eh).map((function(e){return t(e.data).type})),i=[],o=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;(0,ur.b)(s.type)&&r.includes(s.type)||i.push(go(s,e))}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}))}),[n,e])}var bo={type:"context",icon:(0,l.tZ)(wt.Z,{}),label:"",description:"Search for tools and files"};function xo(e){var n=e.paneId,t=(0,V.Z)(),r=t.fs,i=t.container,o=yo(),a=Zo(),c=(0,ro.A)(),s=(0,io.T)(),d=function(e){var n=e.paneId,t=(0,$n.D)();return(0,Jt.Z)((function(){return function(e){var r=e.path,i={type:(0,ur.Dp)({path:r}),data:{path:r}};t({paneId:n,data:i,makeActive:!0})}}),[n,t])}({paneId:n}),p=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var n=e(o),t=e(a),u={data:{type:"context",label:"Tools",icon:(0,l.tZ)(oo.Z,{})},commands:function(){return[(0,Wi.i)({openFile:d,fs:r,shouldHideFile:s,getRecentFiles:c}),to({container:i})].concat((0,Ee.Z)(n))}};return{data:bo,commands:function(){return[t,u]}}}))}),[i,r,c,o,s,a,d]);return(0,u.Dv)(p)}var wo=m.KD.div,ko=m.KD.input;function Io(e){var n=xo({paneId:e.paneId}),t=(0,Mt.Z)({onSelect:e.onSelect,initialCommand:n,insertSectionHeaders:!0}),r=t.combobox,i=t.inputRef;return(0,c.useEffect)((function(){var n;e.autoFocus&&(e.isHidden||null===(n=i.current)||void 0===n||n.focus())}),[e.autoFocus,e.isHidden,i]),(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(wo,(0,oe.Z)((0,R.Z)({},r.getComboboxProps()),{children:(0,l.BX)(m.Tg,{css:[m.l0.rowWithGap(4),m.l0.align.center,t.path.length>1&&m.l0.pl(8),{borderBottom:"1px solid ",borderColor:m.TV.backgroundHigher,":focus-within":{borderColor:m.TV.backgroundHighest}}],children:[t.path.map((function(e,n){var r=e.data;if(n<=1)return null;var i=r.label,o=r.icon,a=i+n;return(0,l.tZ)(Ot,{label:i,icon:o,onClick:function(){return t.resetToIndex({index:n,focus:!0})}},a)})),(0,l.tZ)(ko,(0,R.Z)({css:[Kt,m.l0.px(8),t.path.length>1&&{paddingLeft:4}]},t.combobox.getInputProps({value:t.inputValue,ref:t.inputRef,onChange:function(e){return t.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key?"Backspace"!==e.key||e.currentTarget.value?"Escape"===e.key&&e.currentTarget.blur():t.resetToIndex({index:0}):t.handleLeftRightArrow(e.key)},placeholder:t.placeholder})))]})})),(0,l.tZ)(So,{items:t.itemsWithSections||[],getMenuProps:r.getMenuProps,getItemProps:r.getItemProps,highlightedIndex:r.highlightedIndex,isLoading:t.isLoading})]})}function Po(e){return(0,l.tZ)(wo,(0,oe.Z)((0,R.Z)({},e.getMenuProps()),{css:[m.l0.flex.growAndShrink(1),m.l0.overflow("auto")],children:e.isLoading||e.items.length?e.items.map((function(n){if(n.isSection){var t=n.name;return(0,l.tZ)(m.xv,{variant:"small",color:"dimmest",css:[m.l0.px(8),m.l0.py(4),{marginTop:8}],children:t},t)}var r=n.item,i=n.index,o=r.data,a=o.label,c=o.icon,u=r.match.render,s=i===e.highlightedIndex,d=u&&"content"in u?u.content:void 0,p=u&&"ranges"in u?u.ranges:void 0;return(0,l.tZ)(wo,(0,oe.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:d?(0,l.tZ)(zt,{active:s,content:d}):(0,l.tZ)(zt,{active:s,item:{icon:c,label:a,active:s,highlightRanges:p}})}),(0,Mt.k)(r))})):null}))}var So=(0,c.memo)(Po),Co={Content:function(e){var n=e.options,t=n.openPane,r=n.isHidden,i=n.paneId,o=e.pane.data.autoFocus;return(0,l.tZ)(Io,{paneId:i,autoFocus:o,isHidden:r,onSelect:function(e){if("openFile"!==e.data.type)"openPane"!==e.data.type?"action"!==e.data.type||e.data.run():t(e.data.pane);else{var n=e.data.deeplink.path,r={type:(0,ur.Dp)({path:n}),data:{path:n}};t(r)}}})},Icon:function(){return null},getTitle:function(){return"New tab"}},Ro=t(82947),Eo=t(34467),To=t(96769),Do=t(20787),Uo=t(76832),Mo=t(47886),_o=t(56483);function Go(){var e=(0,E.Z)(["\n  fragment DeploymentRepl on Repl {\n    id\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        pending\n        description\n        timeCreated\n      }\n    }\n  }\n"]);return Go=function(){return e},e}function Bo(){var e=(0,E.Z)(["\n  query Deployment($replId: String!) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return Bo=function(){return e},e}function No(){var e=(0,E.Z)(["\n  mutation CreatePendingRelease($input: CreatePendingReleaseInput!) {\n    createPendingRelease(input: $input) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return No=function(){return e},e}function Ao(){var e=(0,E.Z)(["\n  mutation PromoteRelease($input: PromoteReleaseInput!) {\n    promoteRelease(input: $input) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Ao=function(){return e},e}var Oo={},Xo=(0,T.Ps)(Go()),jo=(0,T.Ps)(Bo(),Xo);function Lo(e){var n=(0,R.Z)({},Oo,e);return A.a(jo,n)}var zo=(0,T.Ps)(No(),Xo);var Fo=(0,T.Ps)(Ao(),Xo);var Ho,Wo=t(30992),$o=t(10449),Vo=t(75240),Ko=t(45528),qo=t(79985),Yo=t(66223),Qo=t(98563),Jo=t(64926),ea=t(59916),na=t(52867),ta=t(39791),ra=t(61622),ia=t(20311),oa=t(13331),aa=t(25108);function la(){var e=Lo({variables:{replId:(0,ye.Z)()}}).data;return(0,l.BX)(m.G7,{css:m.l0.colWithGap(32),children:[(0,l.tZ)(m.xv,{variant:"headerBig",children:"Deployments"}),(0,l.tZ)(va,{}),(0,l.tZ)(m.G7,{css:m.l0.colWithGap(16),children:(0,l.BX)(m.G7,{tag:"details",children:[(0,l.tZ)(m.G7,{tag:"summary",css:m.l0.cursor.pointer,children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Data dump:"})}),(0,l.tZ)(m.G7,{tag:"pre",children:JSON.stringify(e,null,2)})]})})]})}function ca(e){var n=e.next,t=(0,ye.Z)(),o=(0,ut.H)(),u=(0,c.useState)(!1),s=u[0],d=u[1],p=(0,i.Z)(function(e){var n=(0,R.Z)({},Oo,e);return D.D(zo,n)}(),1),f=p[0],v=(0,Wo.Y)("",(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})))),h=v.value,g=v.setValue,Z=o("releaseDescription");return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.tZ)(m.G7,{tag:"label",htmlFor:Z,children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Add a description to remind you of what you're deploying now"})}),(0,l.tZ)(m.II,{id:Z,value:h,onChange:function(e){return g(e.target.value)},disabled:s,placeholder:"Added a new feature"}),(0,l.tZ)(m.zx,{disabled:s,onClick:(0,r.Z)(a().mark((function e(){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=4,f({variables:{input:{replId:t,releaseDescription:h}}});case 4:i=e.sent,"Repl"===(null===(r=i.data)||void 0===r?void 0:r.createPendingRelease.__typename)?n(i.data.createPendingRelease.releases.items[0].id):(alert("wtf"),aa.log(i));case 6:case"end":return e.stop()}}),e)}))),text:s?"Loading...":"Next (Secrets)"})]})}function ua(e){var n=e.fs,t=e.next,i=(0,c.useState)(!1),o=i[0],u=i[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Edit Secrets for this deployment"})}),(0,l.tZ)(qo.Z,{fs:n,activeFile:null,hideInserterAndIntro:!0}),(0,l.tZ)(m.zx,{disabled:o,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,n.flush();case 3:return e.next=5,n.persist({skipDebounce:!0});case 5:t();case 6:case"end":return e.stop()}}),e)}))),text:o?"Loading...":"Next (Build)"})]})}function sa(e){var n=e.container,t=e.next,i=(0,c.useState)(!1),o=i[0],u=i[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Would you like to any build commands"}),(0,l.tZ)(m.xv,{children:"If you're using a framework or a compiled language, you can create a production build now"})]}),(0,l.tZ)(Qo.Z,{container:n,autoFocus:!0}),(0,l.tZ)(m.zx,{disabled:o,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),t();case 2:case"end":return e.stop()}}),e)}))),text:o?"Loading...":"Next (Customize run)"})]})}function da(e){var n=e.runner,t=e.next,i=(0,c.useState)(!1),o=i[0],u=i[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Would you like to change the default run command?"}),(0,l.tZ)(m.xv,{children:"You might want to change the run command to use a production build, or use specific configuration."})]}),(0,l.tZ)(m.xv,{children:"Coming soon... (unimplemented)"}),(0,l.tZ)(m.zx,{disabled:o,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,n.run();case 3:t();case 4:case"end":return e.stop()}}),e)}))),text:o?"Loading...":"Next (Preview)"})]})}function pa(e){var n=e.runner,t=e.releaseId,r=e.next;return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Preview website and logs"})}),(0,l.tZ)(m.ZP,{iconLeft:(0,l.tZ)(ia.Z,{}),target:"_blank",rel:"noopener",href:"https://".concat(t,".id.repl.co"),text:"Click here to open a preview of your website"}),(0,l.tZ)(m.xv,{children:"Logs"}),(0,l.tZ)(ra.Z,{runner:n}),(0,l.tZ)(m.zx,{onClick:function(){return r()},text:"Next"})]})}function fa(e){var n,t=e.releaseId,o=e.next,u=(0,ye.Z)(),s=(0,ut.H)(),d=(0,c.useState)(!1),p=d[0],f=d[1],v=(0,i.Z)(function(e){var n=(0,R.Z)({},Oo,e);return D.D(Fo,n)}(),1),h=v[0],g=(0,Wo.Y)("",(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})))),Z=g.value,y=g.setValue,b=Lo({variables:{replId:u}}).data,x=s("slug"),w=s("type"),k=(0,c.useState)("replco"),I=k[0],P=k[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.G7,{htmlFor:w,tag:"label",children:(0,l.tZ)(m.xv,{children:"Domain Type"})}),(0,l.BX)(m.hE,{tag:"fieldset",id:w,name:w,value:I,onChange:function(e){P(e),aa.log(e.currentTarget.value),aa.log(e.target.value)},row:!0,primary:!0,css:[m.l0.width("100%")],children:[(0,l.tZ)(m.rK,{id:s("replco"),value:"replco",text:"Repl.co Domain (free)"}),(0,l.tZ)(m.rK,{id:s("custom"),value:"custom",text:"Custom Domain"})]})]}),"replco"===I?(0,l.BX)(l.HY,{children:[(0,l.tZ)(m.G7,{tag:"label",htmlFor:x,children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Set a URL for your deployment"})}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(4),m.l0.align.baseline],children:[(0,l.tZ)(m.II,{id:x,value:Z,onChange:function(e){return y(e.target.value)}}),(0,l.BX)(m.xv,{children:[".",null===b||void 0===b||null===(n=b.currentUser)||void 0===n?void 0:n.username,".repl.co"]})]})]}):(0,l.tZ)(m.xv,{children:"Coming soon...(unimplemented)"}),(0,l.tZ)(m.zx,{iconLeft:(0,l.tZ)(oa.Z,{}),disabled:p,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,h({variables:{input:{releaseId:t,slug:Z}}});case 3:o();case 4:case"end":return e.stop()}}),e)}))),text:p?"Loading...":"Launch"})]})}function va(){var e=(0,c.useState)(null),n=e[0],t=e[1],i=(0,V.Z)().container,o=(0,c.useState)(null),u=o[0],s=o[1];switch(n){case null:return(0,l.tZ)(m.zx,{text:"Create new deployment",onClick:function(){return t(Ho.InitStep)}});case Ho.InitStep:return(0,l.tZ)(ca,{next:function(e){var n=(0,Vo.Z)({onUnrecoverableError:function(e){alert("BSOD"),aa.error(e)}}),o=i.getContext();if(!o)throw new Error("wat");var l=(0,Ko.U)({repl:{id:e,slug:e,language:o.repl.language,user:o.repl.user,currentUserPermissions:o.repl.currentUserPermissions,flagOwnerDotReplitPackager:o.repl.flagOwnerDotReplitPackager},currentUser:o.currentUser,asViewer:!1});n.connect({context:l,fetchConnectionMetadata:(0,r.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,yi.uz)("/data/repls/".concat(o.repl.id,"/release/").concat(e,"/get_connection_metadata"),{});case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),n)})))});var c=(0,Yo.Z)({container:n}),u=(0,ea.Z)({container:n,fs:c}),d=(0,Jo.Z)({container:n,dotReplit:u}),p=(0,na.Z)({container:n,beforeRun:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ta.Z)(n,u);case 2:if(!e.sent){e.next=5;break}return e.next=5,d.installPackages();case 5:case"end":return e.stop()}}),e)})))});s({container:n,fs:c,runner:p}),t(Ho.SecretsStep)}});case Ho.SecretsStep:if(!u)throw new Error("wat");return(0,l.tZ)(ua,{fs:u.fs,next:function(){t(Ho.BuildStep)}});case Ho.BuildStep:if(!u)throw new Error("wat");return(0,l.tZ)(sa,{container:u.container,next:function(){t(Ho.RunStep)}});case Ho.RunStep:if(!u)throw new Error("wat");return(0,l.tZ)(da,{runner:u.runner,next:function(){t(Ho.PreviewStep)}});case Ho.PreviewStep:var d;if(!u)throw new Error("wat");var p=null===(d=u.container.getContext())||void 0===d?void 0:d.repl.id;if(!p)throw new Error("wat");return(0,l.tZ)(pa,{releaseId:p,runner:u.runner,next:function(){t(Ho.UrlStep)}});case Ho.UrlStep:var f,v=null===(f=null===u||void 0===u?void 0:u.container.getContext())||void 0===f?void 0:f.repl.id;if(!v)throw new Error("wat");return(0,l.tZ)(fa,{releaseId:v,next:function(){t(null),null===u||void 0===u||u.container.destroy(),s(null)}});default:(0,$o.Z)(n)}}!function(e){e[e.InitStep=0]="InitStep",e[e.SecretsStep=1]="SecretsStep",e[e.BuildStep=2]="BuildStep",e[e.RunStep=3]="RunStep",e[e.PreviewStep=4]="PreviewStep",e[e.UrlStep=5]="UrlStep"}(Ho||(Ho={}));var ha={Content:function(e){var n=e.options,t=n.paneId,r=n.isHidden,i=(0,V.Z)(),o=i.container,a=i.fs,s=i.session,d=i.runner,p=(0,u.b9)(cr.Oe),f=(0,u.Dv)(Uo.f),v=(0,Uo.Z)();(0,Mo.Z)({container:o,runner:d,refreshWebView:v}),(0,_o.Z)({runner:d,refreshWebView:v}),(0,Gr.x)(Ro.b,{run:function(){p(t),v()}}),Er({match:Mr.pl,data:{type:"action",label:"Refresh",icon:(0,l.tZ)(Do.Z,{}),description:"Refresh webview",keyboardShortcut:Ro.b,run:function(){p(t),v()}}});var h=(0,Ni.c)("flag-deployments"),g=h.enabled,Z=(h.loading,(0,c.useState)(!1)),y=Z[0],b=Z[1];return(0,l.BX)(l.HY,{children:[g?(0,l.tZ)(m.u_,{isOpen:y,onRequestClose:function(){return b(!1)},children:(0,l.tZ)(la,{})}):null,(0,l.tZ)(To.Z,{fs:a,session:s,ref:f,isVisible:!r,onDeployment:g?function(){return b(!0)}:void 0})]})},Icon:function(e){var n=e.size;return(0,l.tZ)(Eo.Z,{size:n})},getTitle:function(){return"Webview"}};function ma(){var e=(0,zi.U)();return(0,oe.Z)((0,R.Z)({},e),{webview:ha,commands:Co})}var ga=t(25108);var Za=t(15682),ya=t(24888),ba=t(19945),xa=t(66477);function wa(){var e=(0,E.Z)(["\n  query ReplEnvironmentHelp {\n    currentUser {\n      id\n      ...HelpCurrentUser\n    }\n  }\n  ","\n"]);return wa=function(){return e},e}var ka={},Ia=(0,T.Ps)(wa(),xa.HH);var Pa=t(42844),Sa=t(75301),Ca=t(29780);function Ra(e){var n=e.item,t=e.isActive,r=e.onClick,o=(0,i.Z)(c.useState(!0),2),a=o[0],u=o[1],s=c.useRef(null),d=(0,i.Z)((0,Za.XZ)(s,!1),4),p=d[0],f=d[1],v=d[2],h=d[3];(0,Za.Ym)(f,s);var g=(0,l.tZ)(m.hU,{innerRef:s,role:"tab",tabIndex:p,tooltipPlacement:"right","aria-selected":t,size:40,alt:n.tooltip,css:[t?[m.l0.backgroundColor.accentPrimaryDimmest,m.l0.color.accentPrimaryStrongest]:m.l0.color.foregroundDimmest,{"&:hover":t?[m.l0.backgroundColor.accentPrimaryDimmest,m.l0.color.accentPrimaryStrongest]:m.l0.color.accentPrimaryStrongest}],onKeyDown:v,onClick:function(e){h(),u(!1),r(e)},children:n.icon},n.type);return n.IconWrapper?(0,l.tZ)(n.IconWrapper,{isVisible:a,onDismiss:function(){return u(!1)},children:g}):g}var Ea={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},Ta={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"};function Da(){var e=(0,so.ZP)(),n=e.items,t=e.activeItem,r=(0,Ca.vL)(),i=(0,Ca.Iv)(),o=function(e){var n=(0,R.Z)({},ka,e);return A.a(Ia,n)}().data,a=null===o||void 0===o?void 0:o.currentUser;(0,Gr.x)(Ea,{run:function(){r({type:"preferences"})}}),Er({match:Mr.pl,data:{type:"action",icon:(0,l.tZ)(Pa.Z,{}),label:"Settings",description:"Manage editor settings",keyboardShortcut:Ea,run:function(){r({type:"preferences"})}}});var c=n.some((function(e){return"git"===e.type}));return(0,Gr.x)(Ta,{run:function(){r({type:"git"})},enabled:c}),Er({match:Mr.pl,data:{icon:(0,l.tZ)(Sa.Z,{}),label:"Version control",description:"Open version control sidebar",type:"action",keyboardShortcut:Ta,run:function(){r({type:"git"})}}},{enabled:c}),(0,l.BX)(m.Tg,{elevated:!0,css:[m.l0.borderRadius(8,0,0,8),m.l0.colWithGap(4),m.l0.flex.growAndShrink(1),m.l0.justify.spaceBetween,m.l0.align.center,m.l0.pb(8),m.l0.position.relative,{borderRight:"1px solid "+m.TV.backgroundHigher}],children:[(0,l.tZ)(Za.uP,{options:{direction:"vertical"},children:(0,l.BX)(m.G7,{css:[m.l0.p(4),m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.colWithGap(4),m.l0.align.start],role:"tablist","aria-orientation":"vertical","aria-label":"Dock",children:[n.map((function(e){var n=e.type===t;return(0,l.tZ)(m.G7,{children:(0,l.tZ)(Ra,{item:e,isActive:n,onClick:function(){return i({type:e.type})}})},e.type)})),0===n.length?(0,l.tZ)(m.hU,{"aria-disabled":!0,alt:"",size:40,css:{opacity:0},children:(0,l.tZ)(ya.Z,{})}):null]})}),a?(0,l.tZ)(ba.Z,{}):null,(0,l.tZ)(Ua,{direction:"top"}),(0,l.tZ)(Ua,{direction:"bottom"})]})}function Ua(e){return(0,l.tZ)(m.Tg,{css:[m.l0.position.absolute,m.l0.right(-5),m.l0.width(4),m.l0.height(4),"top"===e.direction?m.l0.top(0):m.l0.bottom(0),{pointerEvents:"none"}]})}var Ma=(0,c.memo)(Da),_a=t(60523),Ga=t(35621);function Ba(e){var n=e.children,t=c.useRef({fileMap:new Map});return(0,l.tZ)(_a.Z.Provider,{value:t,children:n})}function Na(e){var n=e.ui,t=e.services,r=e.replId,i=e.replLanguage,o=e.children,a=(0,Jt.Z)((function(){return{id:r,language:i}}),[r,i]);return(0,l.tZ)(Hi.kz,{value:n,children:(0,l.tZ)(Ba,{children:(0,l.tZ)(bi.Z.Provider,{value:t,children:(0,l.tZ)(Ga.Z.Provider,{value:a,children:o})})})})}var Aa=t(51438),Oa=t(28668),Xa=t(25171),ja=t(88662),La=t(93160),za=t(13482),Fa=b.K.div,Ha=(0,Dt.iv)([m.l0.width("100%"),m.l0.position.absolute,m.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),Wa=(0,Dt.iv)([m.l0.height("100%"),m.l0.position.absolute,m.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),$a=(0,Dt.iv)([m.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function Va(e){var n="topLeft"===e||"topRight"===e?"bottom":"top";return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat(n)}}var Ka={topLeft:(0,Dt.iv)([m.l0.top(0),m.l0.left(0),Va("topLeft")]),topRight:(0,Dt.iv)([m.l0.top(0),m.l0.right(0),Va("topRight")]),bottomLeft:(0,Dt.iv)([m.l0.bottom(0),m.l0.left(0),Va("bottomLeft")]),bottomRight:(0,Dt.iv)([m.l0.bottom(0),m.l0.right(0),Va("bottomRight")])};function qa(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,l.tZ)(Fa,{onPointerDown:r,style:(0,et.Z)({height:t},n,-t),css:Ha});if("right"===n||"left"===n)return(0,l.tZ)(Fa,{onPointerDown:r,style:(0,et.Z)({width:t},n,-t),css:Wa});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,l.tZ)(Fa,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[$a,Ka[n]]})}var Ya=["bottom","right","left","bottomRight","bottomLeft"],Qa=(0,Dt.iv)([w.l0.coverContainer,w.l0.borderRadius(0,0,8,8)]),Ja="--fixed-position-offset-x",el="--fixed-position-offset-y",nl=function(e){return"var(".concat(e,")")},tl=(0,Dt.iv)({transform:"translate(".concat(nl(Ja),", ").concat(nl(el),")")}),rl=(0,Dt.iv)([w.l0.coverContainer,!za.g&&{"& .cm-editor > .cm-tooltip":tl,"& .cm-editor > .cm-tooltip.cm-tooltip-thread":{left:"0px !important",transform:"translateY(".concat(nl(el),"px)")},".cm-custom-context-menu":tl}]);function il(e){var n,t=e.resizable&&e.onResizeControlPointerDown?Ya.map((function(n){return(0,l.tZ)(qa,{size:8,edge:n,onPointerDown:function(t){if(!e.onResizeControlPointerDown)throw new Error("Expected onResizeControlMouseDown");e.onResizeControlPointerDown(t,n)}},n)})):null,r=e.rect;return(0,l.tZ)(b.Z,{style:(n={zIndex:e.zIndex,position:"absolute",width:r.width,height:r.height,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:e.animate?"transform 140ms ease-out":void 0,transitionTimingFunction:"ease-out",visibility:e.hidden?"hidden":void 0,opacity:e.hidden?0:void 0},(0,et.Z)(n,Ja,-e.viewportInset.x+"px"),(0,et.Z)(n,el,-e.viewportInset.y+"px"),n),css:{"&:hover":{zIndex:e.zIndexHovered}},children:(0,l.BX)(La.Z,{onClick:e.onClick,onContextMenu:e.onClick,elevated:!0,css:Qa,className:e.className,children:[(0,l.tZ)(b.Z,{innerRef:e.innerRef,css:rl,children:e.children}),t]})})}var ol=t(78648),al=(0,u.cn)(null),ll=(0,u.cn)(null,(function(e,n,t){var r=e(Fn.g4);if("end"===t.type)return n(al,null),void n(Vn.iH,r);if("update"!==t.type){var i=e(Hn.Eh).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(qn.xm,{error:o}),o}n(Kn.W1,t.paneId),n(al,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(al);if(!a){var l=new Error("Expected floatingResizeState");throw n(qn.xm,{error:l}),l}var c=(0,ol.XR)(a.rectStart,{delta:t.moveDelta,edge:a.edge}),u=a.paneId,s=(0,Xn.ZP)(r,(function(t){var r=t.floating.find((function(e){return e.panes.includes(u)}));if(!r){var i=new Error("Expected floating");throw n(qn.xm,{error:i}),i}var o=e(Hn.M0),a=r.rect;a.x=c.x,a.y=c.y-o,a.width=c.width,a.height=c.height+o}));n(Vn.iH,s)}})),cl=t(93096),ul=t.n(cl);function sl(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=e.pageX,i=e.pageY,o={x:r,y:i},a={x:0,y:0};n.start&&n.start({mouse:o,shiftKey:e.shiftKey});var l=ul()((function(e){var t={x:e.pageX,y:e.pageY};a={x:t.x-o.x,y:t.y-o.y},n.move({delta:a,shiftKey:e.shiftKey,mouse:t})}),t),c=function(){l.cancel(),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),n.end&&n.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}var dl=(0,Dt.iv)([w.l0.width("100%"),w.l0.flex.growAndShrink(1),{overflow:"auto"}]);function pl(e){return(0,l.tZ)(b.Z,{css:dl,style:{pointerEvents:e.disableInteractions?"none":void 0,userSelect:e.disableInteractions?"none":void 0},children:e.children})}var fl=(0,u.cn)(!1),vl=(0,u.cn)((function(e){return e(fl)?e(Kn.J1):null})),hl=(0,u.cn)(null,(function(e,n,t){n(fl,!0),n(Kn.W1,t)})),ml=(0,u.cn)(null,(function(e,n){n(fl,!1)})),gl=(0,u.cn)(null,(function(e,n,t){e(vl)===t?n(ml):n(hl,t)})),Zl=(0,u.cn)((function(e){var n=e(Hn.CK);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}})),yl=(0,u.cn)((function(e){var n=e(Hn.M0),t=e(Zl);return{x:t.x,y:t.y,width:t.width,height:n}})),bl=(0,u.cn)((function(e){var n=e(Hn.M0),t=e(Zl);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}));function xl(e){var n=(0,Jt.Z)((function(){return(0,u.cn)((function(n){return e===n(vl)?n(yl):null}))}),[e]);return(0,u.Dv)(n)}function wl(){return{maximizePane:(0,u.b9)(hl),restoreMaximizedPane:(0,u.b9)(ml),toggleMaximized:(0,u.b9)(gl)}}var kl=t(63848),Il=t(80175);function Pl(e,n){var t=n.paneGroupPath,r=n.rect,i=(0,lr.KC)(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");(0,Il.Z)(e,t),(0,zn.m)(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var Sl=t(35869);var Cl=50,Rl=(0,u.cn)(null),El=(0,u.cn)((function(e){var n;return(null===(n=e(Rl))||void 0===n?void 0:n.activePaneId)||null}));function Tl(e){var n=e.paneId,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t;return n===(null===(t=e(Rl))||void 0===t?void 0:t.activePaneId)}))}),[n]);return(0,u.Dv)(t)}function Dl(e){var n=e.paneId,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t=e(Rl);return!!t&&(t.activePaneId!==n&&("floating"!==e((0,Hn.z)(n)).type&&e(Fn._E)))}))}),[n]);return(0,u.Dv)(t)}function Ul(e){var n=e.paneId,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t=e(Rl);return!!t&&("floating"!==t.startType&&(n===t.activePaneId?{originX:t.transformOriginX,scale:t.scale}:null))}))}),[n]);return(0,u.Dv)(t)}function Ml(e){var n=e.activePaneId,t=(0,u.b9)(_l),r=(0,u.b9)(Gl),i=(0,u.b9)(Bl),o=(0,Jt.Z)((function(){return{start:function(e){var r=e.mouse;t({activePaneId:n,mouse:r})},update:function(e){r(e)},end:function(e){i(e)}}}),[n,t,r,i]);return{isDragging:Tl({paneId:n}),dnd:o}}var _l=(0,u.cn)(null,(function(e,n,t){var r=e(Hn.CK),i=e((0,Hn.z)(t.activePaneId)),o=e(i.rectAtom),a=e(Hn.M0),l={x:o.x,y:o.y-a,width:o.width,height:o.height+a},c=t.mouse.x-(r.x+o.x);n(Rl,{startType:i.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},activePaneId:t.activePaneId,transformOriginX:Math.round(c)+"px",scale:1,fromRect:l})})),Gl=(0,u.cn)(null,(function(e,n,t){var r=e(Rl);if(r){var o=t.delta,a=r.activePaneId,l=r.fromRect,c=e(Fn.g4),u=(0,lr.Rh)(c,a);if(!u){var s=new Error("Expected pane");throw n(qn.xm,{error:s}),s}var d=(0,Hn.z)(a),p=(0,Hn.Xs)(u.paneGroup.id),f=e(Hn.M0),v=Math.max(Math.abs(o.x),Math.abs(o.y)),h=v>=Cl;if(!h||u.floating){var m=e(p),g=e(d),Z=l.x+o.x,y=l.y+o.y;if(n(m.rectAtom,(function(e){return(0,Xn.ZP)(e,(function(e){e.x=Z,e.y=y}))})),n(g.rectAtom,(function(e){return(0,Xn.ZP)(e,(function(e){e.x=Z,e.y=y+f}))})),"floating"!==r.startType){if(!h&&!u.floating){var b=r.startPoint,x=1-.30000000000000004*(w=v/Cl,1-Math.sqrt(1-Math.pow(w,2)));return n(kl.m,{type:"detachPreview",rect:{x:b.x-Cl,y:b.y-Cl,width:100,height:100},progress:v/Cl}),void n(Rl,(0,Xn.ZP)(r,(function(e){e.scale=x})))}var w,k=e(Hn.CK);if(!u.floating)throw new Error("Expected floating pane");var I=e(Hn.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]})),P=e(Sl.Ob),S=function(e){var n=e.views,t=e.mouse,r=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,u=!1,s=void 0;try{for(var d,p=n[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,i.Z)(d.value,2),v=f[0],h=f[1],m={x:h.x,y:h.y-o,width:h.width,height:o},g={x:m.x-Vn.SG/2,y:m.y-Vn.SG/2,width:m.width+Vn.SG,height:o+Vn.SG/2};if((0,ol.V0)(l,g))return{dropPreview:m,drop:{type:"insert",paneId:v}};var Z={x:h.x,y:h.y-o,width:h.width,height:h.height+o},y={x:Z.x-Vn.SG/2,y:Z.y-Vn.SG/2,width:Z.width+Vn.SG,height:Z.height+Vn.SG};if((0,ol.V0)(l,y)){var b=(0,ol.QN)(l,Z);return{dropPreview:b.rect,drop:{type:"split",relativeTo:v,placement:b.placement}}}}}catch(w){u=!0,s=w}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}var x=(0,ol.QN)(l,{x:a,y:0,width:r.width-a,height:r.height});return{dropPreview:x.rect,drop:{type:"split",relativeTo:["tiling"],placement:x.placement}}}({views:I,container:k,mouse:t.mouse,headerHeight:f,sidebarWidth:P}),C=S.drop,R=S.dropPreview;n(kl.m,{type:"dropPreview",rect:R}),n(Rl,{fromRect:r.fromRect,activePaneId:r.activePaneId,startType:r.startType,startPoint:r.startPoint,drop:C,transformOriginX:r.transformOriginX,scale:r.scale})}}else{var E=e(d).rectAtom,T=e(E),D=(0,Xn.ZP)(c,(function(e){try{Pl(e,{paneGroupPath:u.paneGroupPath,rect:{x:T.x+o.x,y:T.y-f+o.y,width:T.width,height:T.height+f}})}catch(s){throw n(qn.xm,{error:s}),s}}));n(Vn.iH,D)}}else n(kl.m,null)})),Bl=(0,u.cn)(null,(function(e,n,t){var r=t.delta;n(kl.m,null);var i=e(Rl);if(i){var o=i.activePaneId,a=i.drop,l=i.fromRect,c=e(Fn.g4),u=(0,lr.Rh)(c,o);if(!u){var s=new Error("Expected pane");throw n(qn.xm,{error:s}),s}var d=(0,Xn.ZP)(c,(function(e){if(u.floating&&"floating"===i.startType){var t=(0,lr.KC)(e,u.paneGroupPath);if("floatingPaneGroup"!==(null===t||void 0===t?void 0:t.type))return;var c=l.x+r.x,d=l.y+r.y;return t.rect.x=c,void(t.rect.y=d)}if(a)if("split"!==a.type){var p=(0,lr.Rh)(e,a.paneId);u.paneGroup.panes.forEach((function(n){return function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:(0,lr.KC)(e,n.paneGroupPath);if(!t||!("panes"in t))throw new Error("Expected paneGroup");(0,Il.i)(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}(e,{paneId:n,paneGroupPath:(null===p||void 0===p?void 0:p.paneGroupPath)||["tiling"],activate:!1})}))}else{if(null===e.tiling){var f=Ln()();try{(0,zn.m)(e,{id:Ln()(),panes:[f],placement:"leftOf",relativeTo:["tiling"]})}catch(s){throw n(qn.xm,{error:s}),s}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=(0,lr.Rh)(e,t);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;(0,Il.Z)(e,o.paneGroupPath),(0,zn.m)(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(e,{from:o,to:a.relativeTo,placement:a.placement})}catch(v){throw n(qn.xm,{error:v}),v}}}));n(Rl,null),n(Vn.iH,d),"insert"===(null===a||void 0===a?void 0:a.type)&&n(cr.Oe,o)}}));var Nl={gutterActive:pi.Is+19,maximizedTooltip:pi.Is+18,maximizedPane:pi.Is+17,maximizedHeader:pi.Is+16,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneHovered:12,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,tiledPaneHovered:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1};function Al(){return{normal:Nl.gutter,hovered:Nl.gutterHovered,active:Nl.gutterActive}}var Ol=t(91885);function Xl(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=(0,lr.KC)(e,t);if(!a||!(0,Ol.r)(a))throw new Error("Expected leftNode");var l=(0,Ol.I)(t),c=(0,lr.KC)(e,l);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected splitNode");var u=c.children.indexOf(a);if(-1===u)throw new Error("Expected leftNodeIndex");var s=u+1,d=c.children[s];if(!d)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&u>0)for(var p=Math.abs(r),f=u-1;p>0;){var v=c.children[f];if(v.percent>p){v.percent-=p;break}if(p-=v.percent,v.percent=0,0===f)break;f--}var h=c.children.reduce((function(e,n){return n===d?e:e+n.percent}),0);d.percent=100-h}else{var m=a.percent+d.percent,g=c.children.slice(u).reduce((function(e,n){return e+n.percent}),0);if(r>m-o){if(a.percent=Math.min(g,Math.max(m,r)),d.percent=0,r>m&&s<c.children.length-1)for(var Z=r-m,y=s+1;Z>0;){var b=c.children[y];if(b.percent>Z){b.percent-=Z;break}if(Z-=b.percent,b.percent=0,y===c.children.length-1)break;y++}}else{var x=a.percent-r;d.percent=d.percent+x,a.percent=r}}}function jl(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=(0,lr.KC)(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=(0,Ol.I)(t);o.length;){var a=(0,lr.KC)(e,o);if(!a)break;o=(0,Ol.I)(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=(0,lr.KC)(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}var Ll=(0,u.cn)(null),zl=(0,u.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e(Fn.g4),i=t.stacked?window.innerHeight:window.innerWidth,o=(0,lr.KC)(r,t.leftPath);if(!o||!(0,Ol.r)(o)){var a=new Error("Expected left node");throw n(qn.xm,{error:a}),a}var l=(0,Ol.I)(t.leftPath),c=o.percent,u=Vn.pc/i*100,s=null;try{s=jl({splitPath:l,layout:r,tilingOptions:e(Vn.Hs)})}catch(x){throw n(qn.xm,{error:x}),x}if(null===s)throw new Error("Expected resizeDistance");n(Ll,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:s,snapPercent:u,initialLayout:r})}else{var d=e(Ll);if(!d){var p=new Error("Expected tilingResize");throw n(qn.xm,{error:p}),p}var f=d.stacked,v=d.leftPath,h=d.startPercent,m=d.resizeDistance,g=d.initialLayout,Z=d.snapPercent,y=h+(f?t.moveDelta.y:t.moveDelta.x)/m*100,b=(0,Xn.ZP)(g,(function(e){Xl(e,{leftPath:v,percent:y,snapPercent:Z})}));n(Vn.iH,b)}else n(Ll,null)}));var Fl=(0,u.cn)(null),Hl=(0,u.cn)(null,(function(e,n){var t=e(Sl.TL);n(Fl,{sidebarWidthStart:t.width})})),Wl=(0,u.cn)(null,(function(e,n,t){var r=t.deltaX,i=e(Fl);if(i){var o=e(Hn.CK),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),o.width))<Sl.ih)a=r>0?a:0;n(Sl.TL,(function(e){return{pane:e.pane,width:a}})),n(Vn.iH,e(Fn.g4))}})),$l=(0,u.cn)(null,(function(e,n){if(e(nr.H).flagLayoutNavigator){if(e(Fl)){var t=e(Sl.TL);t.width<Sl.ih&&(n(Sl.TL,(function(e){return{pane:e.pane,width:0===t.width?0:Sl.ih}})),n(Vn.iH,e(Fn.g4))),n(Fl,null)}}else n(Fl,null)}));var Vl=(0,u.cn)((function(e){return Boolean(e(Fl))}));var Kl=(0,u.cn)((function(e){var n=e(Hn.CK).height;return{x:e(Sl.TL).width,y:0,height:n,width:Vn.SG}}));var ql=(0,u.cn)((function(e){return Boolean(e(Rl)||e(al)||e(Ll)||e(cr.c)||e(Vl))}));var Yl=t(7182),Ql=t(46091);var Jl=(0,Dt.iv)([m.l0.position.absolute,m.l0.shadow(3),m.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",borderColor:m.TV.outlineDimmest}]);function ec(e){var n=function(e){var n=e.paneId,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){if(e(vl))return null;var t=e((0,Hn.z)(n)),r=n===e(El);if("floating"!==t.type&&!r)return null;var i=e(Hn.M0),o=e(t.rectAtom);return{width:o.width+2,height:o.height+i+2,top:-(i+1),left:-1}}))}),[n]);return(0,u.Dv)(t)}({paneId:e.paneId});return n?(0,l.tZ)(m.G7,{css:Jl,style:n}):null}var nc=(0,c.memo)(ec);var tc=t(25108);var rc=function(e){(0,Oa.Z)(t,e);var n=(0,Xa.Z)(t);function t(){var e;return(0,Aa.Z)(this,t),(e=n.apply(this,arguments)).state={error:null,errorInfo:null},e}var r=t.prototype;return r.componentDidCatch=function(e,n){this.setState({error:e,errorInfo:n}),this.props.handleError(e,n),tc.error(e)},r.render=function(){return this.state.error?(0,l.tZ)(m.G7,{css:[m.l0.font.code,m.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},m.l0.backgroundColor.blurpleDefault,m.l0.height("100%")],children:(0,l.tZ)(m.G7,{children:this.state.error.stack})}):this.props.children},t}(c.Component);function ic(e){var n=e.paneId,t=(0,u.Dv)(Hn.CK),r=(0,u.Dv)((0,Hn.z)(n)),o=function(e){var n=(0,Jt.Z)((function(){return(0,u.cn)((function(n){return e===n(vl)?n(bl):null}))}),[e]);return(0,u.Dv)(n)}(n),a=(0,Kn.cr)({paneId:n}),c=(0,qn.IY)(),s=Ul({paneId:n}),d=(0,u.b9)(ll),p=(0,Kn.Xo)(),f="floating"===r.type&&!r.isDialog,v=Boolean(r.dropBehavior),h=Dl({paneId:n}),m=v||Boolean(o),g=function(e){var n=(0,Jt.Z)((function(){return(0,u.cn)((function(n){var t=n((0,Hn.z)(e)),r=e===n(Kn.J1);return n(vl)===e?{hovered:Nl.maximizedPane,normal:Nl.maximizedPane}:e===n(El)?{hovered:Nl.draggingPane,normal:Nl.draggingPane}:"floating"===t.type?{hovered:Nl.floatingPaneHovered,normal:r?Nl.floatingPaneActive:Nl.floatingPane}:{hovered:Nl.tiledPaneHovered,normal:r?Nl.tiledPaneActive:Nl.tiledPane}}))}),[e]);return(0,u.Dv)(n)}(n),Z=(0,u.Dv)(ql),y=function(e){var n=e.paneId,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){if(e(vl)===n)return e(bl);var t=e((0,Hn.z)(n));return e(t.rectAtom)}))}),[n]);return(0,u.Dv)(t)}({paneId:n}),b={x:t.x+y.x,y:t.y+y.y},x=function(e){var n=e.paneId,t=(0,i.Z)((0,ja.L)({accept:[lt.Tv.File,Yl.z.Pane,Yl.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,t){var r=t.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:n})},drop:function(e,t){var r=t.getClientOffset();if(r)if(e.type!==Yl.z.Pane){if(e.type===lt.Tv.File){var i=e.path,o={type:(0,ur.Dp)({path:i}),data:{path:i}};a.drop({type:"newPane",pane:o,pageX:r.x,pageY:r.y,over:n})}if(e.type===Yl.z.NewPane){var l=e.pane;a.drop({type:"newPane",pane:l,pageX:r.x,pageY:r.y,over:n})}}else a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:n})}}),2),r=t[0].isOver,o=t[1],a=(0,Ql.s)({isOver:r});return o}({paneId:n}),w="tile"===r.type;return(0,l.BX)(l.HY,{children:[r.isDialog?(0,l.tZ)(lc,{}):null,(0,l.BX)(il,{css:{transform:s?"scale(".concat(s.scale,")"):void 0,transformOrigin:s?"".concat(s.originX," top"):void 0},innerRef:w?x:void 0,zIndex:g.normal,zIndexHovered:g.hovered,hidden:r.isHidden,viewportInset:b,active:a,rect:y,animate:h,isBeingDragged:v,floating:m,scaleDown:"tile"===r.dropBehavior,resizable:f,onClick:function(){p(n)},onResizeControlPointerDown:function(e,t){sl(e,{start:function(){d({type:"start",paneId:n,edge:t})},move:function(e){var n=e.delta;d({type:"update",moveDelta:n})},end:function(){d({type:"end"})}})},children:[(0,l.tZ)(nc,{paneId:n}),(0,l.tZ)(rc,{handleError:function(e,n){c({error:e,extras:{errInfo:n},tags:{layoutv2:"true",bsod:"true",paneType:r.type}})},children:(0,l.tZ)(pl,{disableInteractions:Z,children:(0,l.tZ)(ac,{paneId:n,dataAtom:r.data,isHidden:r.isHidden})})},n)]})]})}function oc(e){var n=e.paneId,t=e.isHidden,r=e.dataAtom,i=(0,u.Dv)(r),o=(0,Hi.Se)().Content,a=(0,u.b9)(sr),c=function(e){a({fromPaneId:n,data:e})};return(0,l.tZ)(o,{pane:i,options:{paneId:n,isHidden:t,replacePane:c,openPane:c}})}var ac=(0,c.memo)(oc);function lc(){var e=(0,u.b9)(Jn);return(0,l.tZ)(m.G7,{onClick:function(){return e()},css:[m.l0.coverContainer,m.l0.position.fixed,m.l0.backgroundColor.backgroundOverlay]})}var cc=(0,c.memo)(ic);var uc=t(48505),sc=t(8941),dc=t(56124);function pc(e,n,t){var r=!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)?32:0;if(t){var i=2/3,o=Math.max(e.width,r*i),a=Math.max(e.height,r*i),l="left"===t?1:-1,c=n?0:l*(o-e.width)/2,u=n?l*(a-e.height)/2:0;return{width:n?e.width:o,height:n?a:e.height,x:n?e.x:e.x-(o-e.width)/2+c,y:n?e.y-(a-e.height)/2+u:e.y}}var s=Math.max(e.width,r),d=Math.max(e.height,r);return{width:n?e.width:s,height:n?d:e.height,x:n?e.x:e.x-(s-e.width)/2,y:n?e.y-(d-e.height)/2:e.y}}var fc,vc="--grip-color",hc="var(".concat(vc,")"),mc=(0,Dt.iv)((fc={},(0,et.Z)(fc,vc,w.TV.outlineDimmest),(0,et.Z)(fc,":active, :hover",(0,et.Z)({},vc,w.TV.foregroundDefault)),fc)),gc=(0,Dt.iv)([w.l0.position.absolute,w.l0.center,{minWidth:8,minHeight:8},mc]),Zc=(0,Dt.iv)({":hover":{transform:"scaleX(4)"}}),yc=(0,Dt.iv)({":hover":{transform:"scaleY(4)"}}),bc=(0,Dt.iv)([w.l0.height("200vh"),w.l0.width("200vw"),{transform:"translate(-50%, -50%)"}]),xc=(0,Dt.iv)([{backgroundColor:hc,transition:"background-color"},w.l0.borderRadius(4)]),wc=(0,Dt.iv)([xc,{transitionDuration:"140ms"}]);function kc(e){var n=e.snapped,t=e.stacked;return"left"===n?t?(0,l.tZ)(Nr.Z,{color:hc}):(0,l.tZ)(sc.Z,{color:hc}):t?(0,l.tZ)(dc.Z,{color:hc}):(0,l.tZ)(uc.Z,{color:hc})}function Ic(e){var n=e.rect,t=e.onPointerDown,r=e.onDoubleClick,i=e.stacked,o=e.snapped,a=e.zIndexHovered,c=e.zIndex,u=e.isActive,s=pc(n,i,o),d=(i?n.width:n.height)<25;return(0,l.BX)(b.Z,{onPointerDown:t,onDoubleClick:r,onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},style:{width:s.width,height:s.height,transform:"translate(".concat(s.x,"px, ").concat(s.y,"px)"),visibility:d?"hidden":void 0,cursor:i?"row-resize":"col-resize"},css:[gc,{zIndex:c},!u&&{":hover":{zIndex:a}}],children:[(0,l.tZ)(b.Z,{css:[w.l0.coverContainer,!u&&(i?yc:Zc),u&&bc]}),o?(0,l.tZ)(kc,{snapped:o,stacked:i}):(0,l.tZ)(b.Z,{className:"grip-line",style:{width:i?25:2,height:i?2:25},css:wc})]})}var Pc=t(64824),Sc=(0,u.cn)(null,(function(e,n,t){var r=e(Fn.g4),i=(0,Xn.ZP)(r,(function(e){Xl(e,{leftPath:t.leftPath,percent:t.percent})}));n(Vn.iH,i)}));function Cc(e){var n=e.handleId,t=(0,u.Dv)((0,Hn.vv)(n)),r=(0,u.b9)(zl),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,c.useRef)(e),t=(0,u.b9)(Sc),r=(0,Pc.lV)((0,c.useCallback)((function(e){return e(Fn.g4)}),[]));return(0,c.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=(0,lr.KC)(r,i.leftPath);if(!o||!(0,Ol.r)(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}(),o=Al(),a=function(e){var n=e.handleId,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t=e(Ll);return!!t&&n===(0,ol.xH)({leftPath:t.leftPath})}))}),[n]);return(0,u.Dv)(t)}({handleId:n});return(0,l.tZ)(Ic,{isActive:a,zIndex:a?o.active:o.normal,zIndexHovered:o.hovered,snapped:t.snapped,rect:t.rect,stacked:t.stacked,onDoubleClick:function(){i(t)},onPointerDown:function(e){sl(e,{start:function(){r({type:"start",leftPath:t.leftPath,stacked:t.stacked})},move:function(e){var n=e.delta;r({type:"update",moveDelta:n})},end:function(){r({type:"end"})}})}})}var Rc=(0,c.memo)(Cc),Ec=t(62991),Tc=t.n(Ec),Dc=t(45432),Uc=t.n(Dc);class Mc extends c.Component{constructor(e){super(e),this._osInstance=null,this._osTargetRef=c.createRef()}osInstance(){return this._osInstance}osTarget(){return this._osTargetRef.current||null}componentDidMount(){this._osInstance=Uc()(this.osTarget(),this.props.options||{},this.props.extensions),_c(this._osInstance,this.props.className)}componentWillUnmount(){Uc().valid(this._osInstance)&&(this._osInstance.destroy(),this._osInstance=null)}componentDidUpdate(e){Uc().valid(this._osInstance)&&(this._osInstance.options(this.props.options),e.className!==this.props.className&&_c(this._osInstance,this.props.className))}render(){const e=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(this.props,["options","extensions","children","className"]);return c.createElement("div",Object.assign({className:"os-host"},e,{ref:this._osTargetRef}),c.createElement("div",{className:"os-resize-observer-host"}),c.createElement("div",{className:"os-padding"},c.createElement("div",{className:"os-viewport"},c.createElement("div",{className:"os-content"},this.props.children))),c.createElement("div",{className:"os-scrollbar os-scrollbar-horizontal "},c.createElement("div",{className:"os-scrollbar-track"},c.createElement("div",{className:"os-scrollbar-handle"}))),c.createElement("div",{className:"os-scrollbar os-scrollbar-vertical"},c.createElement("div",{className:"os-scrollbar-track"},c.createElement("div",{className:"os-scrollbar-handle"}))),c.createElement("div",{className:"os-scrollbar-corner"}))}}function _c(e,n){if(Uc().valid(e)){const{host:t}=e.getElements(),r=new RegExp(`(^os-host([-_].+|)$)|${e.options().className.replace(/\s/g,"$|")}$`,"g"),i=t.className.split(" ").filter((e=>e.match(r))).join(" ");t.className=`${i} ${n||""}`}}var Gc=t(67003),Bc={overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}};var Nc=t(53201),Ac=t(47589),Oc=t(37432);var Xc=t(1855),jc=m.KD.button,Lc=(0,Dt.iv)([m.l0.display.inlineFlex,m.l0.height("100%")]),zc=(0,Dt.iv)([m.l0.cursor.pointer,m.l0.center,m.l0.rowWithGap(4),m.l0.pl(8),m.l0.pr(4),m.l0.height("100%"),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]);function Fc(e){var n=e.onClick;return(0,l.tZ)(m.hU,{tooltipHidden:!0,onClick:n,alt:"Close",size:18,css:[{"&& svg":{width:12,height:12,minWidth:"unset",minHeight:"unset"},borderRadius:6},m.gU.nofill],children:(0,l.tZ)(y.Z,{})})}function Hc(e){var n=(0,V.Z)().fs,t=e.split("/"),r=t.pop(),i=t.join("/"),o=(0,c.useState)(!1),a=o[0],l=o[1],u=function(e){var n=e.path,t=e.initialExpanded,r=(0,V.Z)().fs;return(0,Oc.Z)({path:n,initialExpanded:t,fs:r})}({path:i.length>0?i:".",initialExpanded:!0}).children,s=null===u||void 0===u?void 0:u.filter((function(e){return e.filename!==r}));return{fileName:r,parentPath:i,renaming:a,siblings:s,handleRename:function(){l(!0)},handleCancel:function(){l(!1)},handleSubmit:function(t){var r=i.length>0?i+"/"+t:t;n.moveFile(e,r),l(!1)}}}function Wc(e){var n=e.filePath,t=e.title,r=e.onClick,i=e.onClose,o=e.isActive,a=e.innerRef,c=e.icon,u=e.onPointerDown,s=Hc(n),d=s.fileName,p=s.parentPath,f=s.renaming,v=s.siblings,h=s.handleRename,g=s.handleSubmit,Z=s.handleCancel,y=t.startsWith("History - ")?"History - ".concat(d):t;return(0,l.tZ)(m.u,{tooltip:n,placement:"bottom",isDisabled:!p,children:function(e,n){return(0,l.BX)(m.Tg,(0,oe.Z)((0,R.Z)({innerRef:(0,Xc.l)(a,n),css:[Lc,o?m.gU.filled:m.gU.nofill,o?m.l0.color.foregroundDefault:m.l0.color.foregroundDimmer,m.l0.flex.row,m.l0.align.center,m.l0.pr(4)]},e),{children:[f?(0,l.tZ)(Ac.Z,{onSubmit:g,onCancel:Z,loading:!1,siblings:v||[],parentPath:p,type:lt.Tv.File,initialValue:d,rename:!0}):(0,l.BX)(jc,{onPointerDown:u,onDoubleClick:h,css:[zc],onClick:r,children:[(0,l.tZ)(m.G7,{css:{opacity:o?1:.6},children:c||null}),(0,l.tZ)(m.xv,{children:y})]}),(0,l.tZ)(Fc,{onClick:i})]}))}})}function $c(e){var n=e.title,t=e.onClick,r=e.onClose,i=e.isActive,o=e.innerRef,a=e.icon,c=e.onPointerDown;return(0,l.BX)(m.Tg,{innerRef:o,css:[Lc,i?m.gU.filled:m.gU.nofill,i?m.l0.color.foregroundDefault:m.l0.color.foregroundDimmer,m.l0.flex.row,m.l0.align.center,m.l0.pr(4)],children:[(0,l.BX)(jc,{css:[zc],onClick:t,onPointerDown:c,children:[(0,l.tZ)(m.G7,{css:{opacity:i?1:.6},children:a||null}),(0,l.tZ)(m.xv,{children:n})]}),(0,l.tZ)(Fc,{onClick:r})]})}var Vc=m.KD.div;function Kc(e){var n=e.paneId,t=e.isActive,r=e.onClick,o=e.onClose,a=e.dragGroup,s=(0,Jt.Z)((function(){return(0,u.cn)((function(e){return e(e((0,Hn.z)(n)).data)}))}),[n]),d=(0,u.Dv)(s),p=(0,Hi.Se)(),f=p.getTitle(d),v=p.Icon({pane:d,size:16}),h=(0,c.useRef)(null),g=(0,i.Z)((0,Nc.c)({type:Yl.z.Pane,item:function(){var e,t=(null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:Yl.z.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),Z=g[0].isDragging,y=g[1],b=(0,u.b9)(cr.c);(0,c.useEffect)((function(){return b(Z)}),[b,Z]);var x,w=Ml({activePaneId:n}).dnd,k=w&&a?function(e){1!==e.button&&sl(e,{start:w.start,move:w.update,end:w.end})}:void 0;return(0,l.tZ)(Vc,{css:Z?[m.l0.width(0),m.l0.visibility.hidden]:[m.l0.px(2)],onMouseDown:function(e){1===e.button&&o()},children:(0,ur.KM)(d)?(0,l.tZ)(Wc,{onPointerDown:k,innerRef:k?void 0:(0,Xc.l)(y,h),filePath:null!==(x=d.data.path)&&void 0!==x?x:"",title:f,isActive:t,icon:v,onClick:function(){(0,S.j)(S.U3.WS_TAB_OPENED,{paneType:d.type}),r()},onClose:function(){(0,S.j)(S.U3.WS_TAB_CLOSED,{paneType:d.type}),o()}}):(0,l.tZ)($c,{onPointerDown:k,innerRef:k?void 0:(0,Xc.l)(y,h),title:f,isActive:t,icon:v,onClick:function(){(0,S.j)(S.U3.WS_TAB_OPENED,{paneType:d.type}),r()},onClose:function(){(0,S.j)(S.U3.WS_TAB_CLOSED,{paneType:d.type}),o()}})})}function qc(){var e=(0,E.Z)(["\n  query ReplEnvironmentHeaderContainer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return qc=function(){return e},e}var Yc={},Qc=(0,T.Ps)(qc());var Jc=t(25386);function eu(){var e=(0,V.Z)().presence,n=(0,i.Z)(c.useState(e.getFollowingUsers()),2),t=n[0],r=n[1];return c.useEffect((function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){r(e.followingUsers)}))}),[e]),t}function nu(){var e=eu();return 0===e.length?null:1===e.length?(0,l.tZ)(tu,{user:e[0]}):(0,l.BX)("div",{className:"jsx-4f2e88846001c10e followed-indicator",children:[(0,l.BX)(hn.Z,{children:[e.length," users are observing you"]}),(0,l.tZ)(Q(),{id:"4f2e88846001c10e",children:".followed-indicator.jsx-4f2e88846001c10e{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function tu(e){var n=e.user,t=re({variables:{ids:[n.id]},ssr:!1}).data;if(!t)return null;var r=t.usersByIds,o=(0,i.Z)(r,1)[0].image,a=n.id,c=n.username,u=n.color;return(0,l.BX)("div",{className:"jsx-add9eb548244268a followed-indicator",children:[(0,l.BX)(ln.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,l.tZ)(ce,{id:a,username:c,image:o,color:u,size:22}),(0,l.tZ)(hn.Z,{className:"username",children:c}),(0,l.tZ)("div",{className:"jsx-add9eb548244268a text",children:(0,l.tZ)(hn.Z,{children:"is observing you"})})]}),(0,l.tZ)(Q(),{id:"add9eb548244268a",children:".followed-indicator.jsx-add9eb548244268a{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.text.jsx-add9eb548244268a{white-space:nowrap}.followed-indicator.jsx-add9eb548244268a .stack{height:100%}.followed-indicator.jsx-add9eb548244268a .username{overflow:clip;max-width:150px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis}"})]})}function ru(e){var n=e.id,t=e.username,r=e.color,o=(0,V.Z)().presence,a=re({variables:{ids:[n]},ssr:!1}).data;if(!a)return null;var c=a.usersByIds,u=(0,i.Z)(c,1)[0].image;return(0,l.BX)("div",{className:Q().dynamic([["48dd00c96a834430",[r]]])+" following-indicator",children:[(0,l.BX)(ln.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,l.tZ)(ln.gC,{className:"stack",align:"center",justify:"center",children:(0,l.tZ)(ce,{id:n,username:t,image:u,color:r,size:22})}),(0,l.tZ)(ln.gC,{className:"text-container",align:"center",justify:"center",children:(0,l.BX)(hn.Z,{className:"following-text",children:["Observing ",t]})}),(0,l.tZ)(ln.gC,{className:"stack",align:"center",justify:"center",children:(0,l.BX)(bn.Z,{size:"small",filled:!1,border:!1,textColor:r,onClick:function(){o.unfollowUser()},children:[(0,l.tZ)(xe.T,{children:"stop observing"}),(0,l.tZ)(y.Z,{})]})})]}),(0,l.tZ)(Q(),{id:"48dd00c96a834430",dynamic:[r],children:".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip}.following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px}.following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(r,";white-space:nowrap}")})]})}var iu=t(22414);var ou=t(86601);function au(e){var n=e.activeFile,t=e.paneId,r=function(e){var n=(0,R.Z)({},Yc,e);return A.a(Qc,n)}({variables:{replId:(0,ye.Z)()}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.language:"",o=(0,u.Dv)(cr.bg),a=(0,u.b9)(cr.ao),s=(0,u.b9)(cr.Ky),d=n&&(0,ct.gK)(n),p=function(e){var n=e.paneId,t=(0,ou.Z)(),r=(0,Kn.cr)({paneId:n});return t&&r?t:null}({paneId:t}),f=function(e){var n=e.paneId,t=eu();return(0,Kn.cr)({paneId:n})&&t.length>0?t:null}({paneId:t}),v=function(){var e=(0,Qt.Z)((0,u.Dv)(iu.$));return(0,c.useCallback)((function(){setTimeout((function(){var n;return null===(n=e.current)||void 0===n?void 0:n.focus()}),0)}),[e])}(),h=(0,Kn.cr)({paneId:t}),g=null;return p?g=(0,l.tZ)(ru,{id:p.id,username:p.username,color:p.color}):d&&n?g=o?(0,l.tZ)(m.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,l.tZ)(un.Z,{}),text:"Close preview",onClick:function(){a({type:"markdown"}),v()}}):(0,l.tZ)(m.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,l.tZ)(cn.Z,{}),text:"Open preview",onClick:function(){n&&(s({type:"markdown",data:{path:n}}),v())}}):n&&(g=(0,l.tZ)(Jc.Z,{filePath:n,replLanguage:i,disableKeyboardShortcut:!h})),null!==g||f?(0,l.BX)(m.G7,{css:[m.l0.px(4),m.l0.rowWithGap(8)],children:[f&&n?(0,l.tZ)(nu,{}):null,g]}):null}var lu=t(59369),cu=t(89295),uu=t(94860),su=t(73148),du=t(87534),pu=t(99932),fu=t(90849),vu=t(87671),hu=t(66843),mu=(0,u.cn)(null,(function(e,n,t){var r=e(Fn.g4),i=e((0,Hn.z)(t)),o=i.rectAtom,a=i.type,l=e(o),c=(0,lr.Rh)(r,t);if(!c){var u=new Error("Expected pane");throw n(qn.xm,{error:u}),u}if("tile"!==a){var s=e(Hn.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(Hn.M0),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find((function(n){var t=e(n.rectAtom);return(0,ol.V0)(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),v="leftOf";f&&(v=(0,ol.QN)(p,e(f.rectAtom)).placement),n(Vn.iH,(0,Xn.ZP)(r,(function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=(0,lr.KC)(e,t);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");(0,Il.Z)(e,t),null!==i?(0,zn.m)(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===f||void 0===f?void 0:f.paneId)||["tiling"],placement:v})})))}else n(Vn.iH,(0,Xn.ZP)(r,(function(e){Pl(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))}));var gu=t(90145);function Zu(e){var n=e.paneId,t=(0,u.b9)(mu),r=(0,vu.e3)(),i=(0,vu.CK)(),o=(0,vu.Bd)(),a=function(e){var n=e.paneId,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){return"floating"===e((0,Hn.z)(n)).type}))}),[n]);return(0,u.Dv)(t)}({paneId:n}),c=wl(),s=c.maximizePane,d=c.restoreMaximizedPane,p=xl(n);if(p)return(0,l.tZ)(m.hU,{onClick:function(){return d()},alt:p?"Restore":"Fullscreen",children:(0,l.tZ)(uu.Z,{})});var f={label:"Maximize",icon:(0,l.tZ)(cu.Z,{}),run:function(){return s(n)}},v=a?[f]:[{label:"Insert Left",icon:(0,l.tZ)(du.Z,{}),run:function(){o({placement:"leftOf",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"leftOf"})}},{label:"Insert Right",icon:(0,l.tZ)(pu.Z,{}),run:function(){o({placement:"rightOf",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"rightOf"})}},{label:"Insert Up",icon:(0,l.tZ)(fu.Z,{}),run:function(){o({placement:"above",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"above"})}},{label:"Insert Down",icon:(0,l.tZ)(su.Z,{}),run:function(){o({placement:"below",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"below"})}},f];return(r||a)&&(v.splice(v.length-1,0,{label:a?"Unfloat":"Float",icon:a?(0,l.tZ)(gu.Z,{}):(0,l.tZ)(hu.Z,{}),run:function(){t(n)}}),v.push({label:"Close",icon:(0,l.tZ)(y.Z,{}),run:function(){i(n),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"closed"})}})),(0,l.tZ)(lu.Z,{resetOnSelect:!0,label:"Pane Actions",items:v,onItemClick:function(e){e.run()}})}var yu=(0,c.memo)(Zu),bu=m.KD.div,xu=(0,Dt.iv)([m.l0.flex.growAndShrink(1),m.l0.minWidth(16),m.l0.height("100%")]);function wu(e){var n=e.paneId,t=Ml({activePaneId:n}),r=t.isDragging,i=t.dnd,o=wl().toggleMaximized;if(!i)return null;var a=r?"grabbing":"grab";return(0,l.tZ)(bu,{onDoubleClick:function(){o(n)},css:[xu],style:{cursor:a},onPointerDown:function(e){sl(e,{start:i.start,move:i.update,end:i.end})}})}function ku(e){var n=e.paneId,t=e.onChange,r=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t=e((0,Hn.z)(n));return e(t.rectAtom).width}))}),[n]),i=(0,u.Dv)(r),o=(0,Qt.Z)(t),a=(0,Jt.Z)((function(){return ul()((function(){o.current()}),500)}),[o]);return(0,c.useEffect)(a,[i,a]),null}function Iu(e){var n=(0,Hn.Xs)(e),t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t=e(n);return e((0,Hn.z)(t.panes[t.activeIndex])).paneId}))}),[n]);return(0,u.Dv)(t)}function Pu(e){var n=e.headerId,t=(0,u.b9)(cr.Oe),r=(0,u.b9)(cr.Et),o=(0,u.b9)(cr.SG),a=(0,u.b9)(Wn.U),s=(0,u.Dv)(cr.c),d=function(e){var n=(0,Hn.Xs)(e),t=(0,u.Dv)((0,Jt.Z)((function(){return(0,u.cn)((function(e){return e(n).activeIndex}))}),[n])),r=(0,u.Dv)((0,Jt.Z)((function(){return(0,Pc.kv)(n,(function(e){return e.path}),Tc())}),[n])),i=(0,u.Dv)((0,Jt.Z)((function(){return(0,Pc.kv)(n,(function(e){return e.panes}),Tc())}),[n])),o=Iu(e),a=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t=e(n),r=e((0,Hn.z)(t.panes[t.activeIndex])),i=e(r.data);return(0,ur.KM)(i)?(0,ur.DQ)(i):null}))}),[n]);return{activeIndex:t,path:r,panes:i,activeTabPaneId:o,activeFile:(0,u.Dv)(a)}}(n),p=d.activeIndex,f=d.path,v=d.panes,h=d.activeTabPaneId,g=d.activeFile,Z=function(){var e,n=(0,c.useRef)(null),t=null===(e=n.current)||void 0===e?void 0:e.osInstance(),r=(0,c.useRef)(0),i=(0,c.useRef)(0),o=(0,Gc.Fg)().isDarkColorScheme;return{options:Bc,handleWheel:function(e){if(t&&0!==e.deltaY&&0===e.deltaX){var n=e.deltaY<0?-1:1,o=i.current!==n?t.scroll().position.x:r.current,a=25*n,l=t.scroll().max.x;r.current=Math.max(0,Math.min(l,o-a)),i.current=n;var c=function(){if(t){var e=t.scroll().position.x,n=r.current-e,i=Math.round(e+n/10);0!==n&&(t.scroll({x:i}),window.requestAnimationFrame(c))}};window.requestAnimationFrame(c)}},ref:n,className:o?"os-theme-light":"os-theme-dark",update:(null===t||void 0===t?void 0:t.update)?function(){return t.update()}:null}}(),y=(0,i.Z)((0,ja.L)({accept:[lt.Tv.File,Yl.z.Pane,Yl.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&I({item:e,panes:v,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=null!==(null===P||void 0===P?void 0:P.index)?null===P||void 0===P?void 0:P.index:v.length;if(e.type!==lt.Tv.File)if(e.type!==Yl.z.NewPane){var i=v.includes(e.paneId)?v.length-1:v.length;o({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupPath:f})}else r({activate:!0,paneGroupPath:f,index:t,pane:e.pane});else r({activate:!0,paneGroupPath:f,index:t,pane:{type:"codeEditor",data:{path:e.path}}})}}}),2),b=y[0],x=y[1],w=function(e){var n=e.isOver,t=(0,c.useState)(null),r=t[0],i=t[1],o=(0,c.useRef)(null),a=(0,c.useRef)([]);(0,c.useEffect)((function(){if(!n)return a.current=[],void i(null);o.current&&(a.current=(0,Ee.Z)(o.current.children).map((function(e){var n=e.getBoundingClientRect();return n.x+n.width/2})))}),[n]);var l=(0,c.useCallback)((function(e){if(0!==a.current.length){var n=e.item.type===Yl.z.Pane?e.item:null,t=(null===n||void 0===n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null===n||void 0===n?void 0:n.width)||80,l=a.current.map((function(e,n){return-1===r||r<n?e:e+o/2})).findIndex((function(n){return n>e.sourceClientOffset})),c=-1===l,u=-1===r?e.panes.length:e.panes.length-1;i({index:c?u:Math.min(l,u),paneId:t,width:o})}}),[]);return{tabContainerRef:o,hover:l,dropState:r}}({isOver:b.isOver}),k=w.tabContainerRef,I=w.hover,P=w.dropState,S=P?P.index:null;if((null===P||void 0===P?void 0:P.paneId)&&null!==S){var C=v.indexOf(P.paneId);C>-1&&C<S&&S++}var R=P&&null!==S?(0,Ee.Z)(v.slice(0,S)).concat([P],(0,Ee.Z)(v.slice(S))):v;return(0,l.BX)(l.HY,{children:[(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(2),m.l0.flex.growAndShrink(1),m.l0.align.center,m.l0.height("100%")],innerRef:x,children:[(0,l.tZ)(m.G7,{css:[m.l0.flex.row,m.l0.flex.shrink(1),m.l0.align.center,m.l0.height("100%")],children:(0,l.tZ)(Mc,{style:{height:"100%",width:"100%"},className:Z.className,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave",visibility:s?"hidden":"auto"}},onWheel:Z.handleWheel,ref:Z.ref,children:(0,l.tZ)(m.G7,{innerRef:k,css:[m.l0.flex.row,m.l0.height("100%"),m.l0.py(4),m.l0.px(2)],children:R.map((function(e,n){var r=p===n;return"string"!==typeof e?(0,l.tZ)(m.G7,{css:[m.l0.px(2)],children:(0,l.tZ)(m.G7,{css:[m.l0.borderRadius(8),m.l0.width(e.width),m.l0.height(28),m.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(m.TV.accentPrimaryDefault)}]})},"preview"):(0,l.tZ)(Kc,{dragGroup:1===v.length,paneId:e,isActive:r,onClick:function(){t(e)},onClose:function(){a(e)}},e)}))})})}),(0,l.tZ)(m.hU,{alt:"New tab",tooltipHidden:!0,onClick:function(){r({paneGroupPath:f,activate:!0,pane:{type:"commands",data:{autoFocus:!0}}})},children:(0,l.tZ)(fn.Z,{})}),(0,l.tZ)(wu,{paneId:h})]}),(0,l.tZ)(au,{headerId:n,paneId:h,activeFile:g}),(0,l.tZ)(m.G7,{css:m.l0.px(4),children:(0,l.tZ)(yu,{paneId:h})}),Z.update?(0,l.tZ)(ku,{paneId:h,onChange:Z.update}):null]})}var Su=(0,c.memo)(Pu),Cu=(0,Dt.iv)([m.l0.borderRadius(8,8,0,0),m.l0.position.absolute,m.l0.flex.row,m.l0.align.center],{borderBottom:"1px solid ".concat(m.TV.backgroundHigher)}),Ru=["top","right","left","topRight","topLeft"];function Eu(e){var n=e.headerId,t=function(e){var n=e.headerId,t=(0,Hn.Xs)(n),r=(0,Jt.Z)((function(){return(0,u.cn)((function(e){return"floating"===e(t).path[0]}))}),[t]);return(0,u.Dv)(r)}({headerId:n}),r=Iu(n),i=(0,u.b9)(ll);return t?(0,l.tZ)(l.HY,{children:Ru.map((function(e){return(0,l.tZ)(qa,{size:8,edge:e,onPointerDown:function(n){sl(n,{start:function(){i({type:"start",paneId:r,edge:e})},move:function(e){var n=e.delta;i({type:"update",moveDelta:n})},end:function(){i({type:"end"})}})}},e)}))}):null}var Tu=(0,c.memo)(Eu);function Du(e){var n=e.headerId,t=(0,Hn.Xs)(n),r=Iu(n),i=xl(r),o=(0,Jt.Z)((function(){return(0,u.cn)((function(e){return e(e(t).rectAtom)}))}),[t]),a=(0,u.Dv)(o),c=function(e){var n=(0,Jt.Z)((function(){return(0,u.cn)((function(n){var t=n((0,Hn.z)(e)),r=e===n(Kn.J1);return n(vl)===e?Nl.maximizedHeader:e===n(El)?Nl.draggingHeader:"floating"===t.type?r?Nl.floatingHeaderActive:Nl.floatingHeader:Nl.tiledHeader}))}),[e]);return(0,u.Dv)(n)}(r),s=Ul({paneId:r}),d=i||a,p=Dl({paneId:r});return(0,l.BX)(m.Tg,{elevated:!0,css:Cu,style:{transform:s?"scale(".concat(s.scale,")"):void 0,transformOrigin:s?"".concat(s.originX," bottom"):void 0,width:d.width,height:d.height,top:Math.round(d.y),left:Math.round(d.x),zIndex:c,transitionProperty:p?"all":void 0,transitionDuration:p?"140ms":void 0,transitionTimingFunction:p?"ease-out":void 0},children:[(0,l.tZ)(Su,{headerId:n}),(0,l.tZ)(Tu,{headerId:n})]})}var Uu=(0,c.memo)(Du);function Mu(){var e=(0,kl.K)(),n=(0,u.Dv)(Fn._E),t=function(){var e=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var n=e(kl.m);return"detachPreview"===(null===n||void 0===n?void 0:n.type)?Nl.detachPreview:Nl.dropPreview}))}),[]);return(0,u.Dv)(e)}();if(!e)return null;var r=e.rect,i="detachPreview"===e.type?e.progress:1,o="detachPreview"===e.type?e.rect.height:8,a="detachPreview"===e.type&&i<.98?w.TV.foregroundDefault:w.TV.accentPrimaryDefault,c="detachPreview"===e.type?void 0:w.TV.accentPrimaryDimmer;return(0,l.tZ)("div",{style:{position:"absolute",border:"1px ".concat(i<.98?"dashed":"solid"),pointerEvents:"none",width:r.width,height:r.height,backgroundColor:c,borderColor:a,borderRadius:o,zIndex:t,opacity:"detachPreview"===e.type?.5*i:.2,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:n?"transform 140ms, width 140ms, height 140ms, border-radius 140ms":void 0},children:"detachPreview"===e.type?(0,l.tZ)(_u,{progress:i}):null})}function _u(e){var n=e.progress;return(0,l.tZ)("div",{style:{width:"100%",height:"100%",transform:"scale(".concat(n,")"),background:"radial-gradient(transparent, ".concat(w.TV.backgroundHighest,")"),borderRadius:"100%"}})}var Gu=(0,c.memo)(Mu),Bu=t(96189);var Nu=t(92364);function Au(){var e=(0,E.Z)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return Au=function(){return e},e}var Ou=(0,T.Ps)(Au());function Xu(e){return ju.apply(this,arguments)}function ju(){return ju=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==vr.l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,vr.l.query({query:Ou,variables:{username:n}});case 5:return r=e.sent.data,e.abrupt("return",null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.image);case 7:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function Lu(){return"Notification"in window?"true"===nt.Z.get($u,"string")?"dismissed":window.Notification.permission:"denied"}function zu(){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(n){e(n)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function Hu(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zu();case 2:n=e.sent,Vu(!1),(0,S.j)("granted"===n?S.U3.WEB_NOTIFICATION_PERM_GRANTED:S.U3.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $u="notifications/dismissedModal";function Vu(e){nt.Z.set($u,String(e)),e&&(0,S.j)(S.U3.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var Ku={};function qu(){return(qu=(0,r.Z)(a().mark((function e(n){var t,r,i,o,l,c,u,s,d,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.title,r=n.body,i=n.badge,o=n.icon,l=n.iconByUsername,c=n.tag,u=n.onClick,s=n.cacheDuration,d=void 0===s?0:s,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===Lu()){e.next=5;break}return e.abrupt("return");case 5:if(p=Date.now(),!(c in Ku)){e.next=9;break}if(!(Ku[c]+d>p)){e.next=9;break}return e.abrupt("return");case 9:if(!l){e.next=13;break}return e.next=12,Xu(l);case 12:o=e.sent;case 13:f=new window.Notification(t,{body:r,badge:i||"/public/images/logo-grayscale.png",icon:o||"/public/images/icon-square.png",tag:c}),setTimeout((function(){f.close()}),1e4),f.addEventListener("click",(function(){window.focus(),f.close()})),u&&f.addEventListener("click",u),Ku[c]=p;case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yu=t(20431);var Qu=44100,Ju=32896,es=function e(){var n=this;(0,Aa.Z)(this,e),this.audioStart=0,this.feed=function(e){var t=n.getFormatedValue(e),r=new Float32Array(n.samples.length+t.length);r.set(n.samples,0),r.set(t,n.samples.length),n.samples=r},this.getFormatedValue=function(e){for(var n=new Float32Array(e.length),t=0;t<e.length;t++)n[t]=e[t]/2147483648;return n},this.stop=function(){if(n.bufferSource)try{n.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(n.audioCtx&&n.samples.length){var t=0,r=n.audioCtx.currentTime;if(0===e)n.startTime=r,n.audioStart=r;else{for(var i=r-n.audioStart,o=Math.floor(i*Qu);o>e-Ju;)n.audioStart+=.7459410430839002,o-=Ju;o>e&&(t=o-e,n.startTime=r),n.startTime=r}n.samples=n.samples.slice(t,n.samples.length);for(var a,l,c,u=n.audioCtx.createBufferSource(),s=n.samples.length/1,d=n.audioCtx.createBuffer(1,s,Qu),p=0;p<1;p++)for(a=d.getChannelData(p),l=p,c=0;c<s;c++)a[c]=n.samples[l],l+=1;n.startTime<n.audioCtx.currentTime&&(n.startTime=n.audioCtx.currentTime),u.buffer=d,u.connect(n.gainNode),u.start(n.startTime),n.stop(),n.bufferSource=u,n.startTime+=d.duration,n.samples=new Float32Array}},this.samples=new Float32Array;var t=window.AudioContext||window.webkitAudioContext;this.audioCtx=new t,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function ns(e){var n=e.container,t=(0,c.useState)(!1),r=t[0],i=t[1],o=(0,c.useRef)(null);(0,c.useEffect)((function(){return n.openChannel({name:"audio",service:"audio"},(function(e){var n=e.channel;if(n){var t=null,r=!1;return n.onCommand((function(e){var n;r||(r=!0,(0,S.j)(S.U3.AUDIO_PLAYING_STARTED),o.current=function(){t=new es,o.current=null},i(!0)),t&&(null===e||void 0===e||null===(n=e.audio2)||void 0===n?void 0:n.data)&&(e.audio2.samples||(e.audio2.samples=0),t.feed(Int32Array.from(e.audio2.data)),t.flush(e.audio2.samples))})),function(){i(!1),t&&(t.stop(),t=null),o.current=null}}}))}),[n]);var a=function(){i(!1),(0,S.j)(S.U3.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,l.tZ)(m.u_,{isOpen:r,onRequestClose:a,children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,l.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,l.tZ)(m.xv,{multiline:!0,children:"Hey! It appears that this Repl is playing audio."}),(0,l.tZ)(m.xv,{multiline:!0,children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(12),m.l0.justify.end],children:[(0,l.tZ)(m.zx,{onClick:a,text:"Cancel"}),(0,l.tZ)(m.zx,{colorway:"positive",onClick:function(){i(!1),(0,S.j)(S.U3.AUDIO_PROMPT_CLOSED,{accepted:!0}),o.current&&o.current()},text:"Confirm",iconLeft:(0,l.tZ)(k.Z,{})})]})]})})}var ts=t(51995),rs=t(91082),is=t(48920),os=t(11070),as={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"};function ls(){var e=(0,u.b9)(St),n=(0,c.useState)(!1),t=n[0],r=n[1],i=(0,ro.A)(),o=(0,V.Z)(),a=o.fs,s=o.container,d=o.runner,p=(0,q.L7)(d),f=(0,io.T)(),v=(0,mr.C)();(0,Gr.x)(kt,{run:e}),(0,Gr.x)(Wi.q,{run:function(){e(Wi.i({openFile:v,fs:a,shouldHideFile:f,getRecentFiles:i}))}}),(0,Gr.x)(no,{run:function(){e(to({container:s}))}}),Er(Wi.i({openFile:v,fs:a,shouldHideFile:f,getRecentFiles:i}));var h=(0,nr.Q)("flagGhostrunner");return Er(to({container:s,activeOnly:h})),Er({match:Mr.pl,data:{type:"action",icon:(0,l.tZ)(ts.Z,{}),label:"Run",description:"Run Repl",run:function(){d.run()},keyboardShortcut:as}},{enabled:p===is.A.IDLE}),(0,Gr.x)(as,{run:function(){p===is.A.RUNNING&&d.stopRun(),d.run()},enabled:p!==is.A.OFFLINE}),Er({match:Mr.pl,data:{type:"action",icon:(0,l.tZ)(rs.Z,{}),label:"Stop",description:"Stop Repl",run:function(){d.stopRun()}}},{enabled:p===is.A.RUNNING}),Er({match:(0,Mr.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,l.tZ)(fn.Z,{}),description:"Create a new Repl",run:function(){r(!0)}}}),(0,l.tZ)(Z.Z,{isOpen:t,onRequestClose:function(){return r(!1)},maxWidth:600,centered:!0,children:(0,l.tZ)(os.Z,{})})}var cs=(0,c.memo)(ls),us=t(64098),ss=t(31066);function ds(){var e=(0,E.Z)(["\n  query ContentsDiverged {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return ds=function(){return e},e}var ps={},fs=(0,T.Ps)(ds());var vs=t(14456),hs=t(99094),ms=vs.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),gs=vs.p.line({attributes:{class:"cm-diff-inserted"}}),Zs=vs.p.line({attributes:{class:"cm-diff-deleted"}}),ys=gr.Py.define({map:function(e,n){return e.map(n)}}),bs=function(e){(0,Oa.Z)(t,e);var n=(0,Xa.Z)(t);function t(){return(0,Aa.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},t}(vs.l9);function xs(e){var n=new gr.f_,t=new bs;e.sort((function(e,n){return e.character-n.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=c.character,s=c.padding,d=0;d<s;d++)n.add(u,u,vs.p.widget({widget:t,side:-1,block:!0}))}catch(p){i=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function ws(e){var n=e.coloredLines,t=e.colorDecoration,r=vs.lg.fromClass((function e(r){(0,Aa.Z)(this,e);var i=new gr.f_,o=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=r.state.doc.line(s);i.add(d.from,d.from,t)}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=gr.QQ.define({create:function(){return vs.p.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(ys))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return vs.tk.decorations.from(e)}});return[ms,r,i]}var ks=function(){var e=function(e,n){return vs.tk.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new gr.F6,t=new gr.F6;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}},Is=t(80159),Ps=t(78244),Ss=ks(),Cs=Ss.extensions,Rs=Ss.setup;function Es(e){var n=e.left,t=e.right,r=n.code,o=(0,_t.Z)(n,["code"]),a=t.code,l=(0,_t.Z)(t,["code"]),u=(0,Is.Z)((0,R.Z)({readOnly:!0,lineWrapping:!1,initialDoc:r,extensions:[Cs().left]},o)),s=u.view,d=u.ref,p=(0,Is.Z)((0,R.Z)({readOnly:!0,lineWrapping:!1,initialDoc:a,extensions:[Cs().right]},l)),f=p.view,v=p.ref,h=(0,i.Z)(c.useState(!1),2),m=h[0],g=h[1],Z=(0,i.Z)(c.useState(!1),2),y=Z[0],b=Z[1];return c.useEffect((function(){if(s&&f&&m&&y){var e=setTimeout((function(){Rs(s,f),function(e,n){var t=(0,hs.Bz)(e.state.doc.sliceString(0),n.state.doc.sliceString(0));e.dispatch({effects:[gr.Py.appendConfig.of(ws({coloredLines:t.leftColored.sort((function(e,n){return e-n})),colorDecoration:Zs})),ys.of(xs(t.leftPadded))]}),n.dispatch({effects:[gr.Py.appendConfig.of(ws({coloredLines:t.rightColored.sort((function(e,n){return e-n})),colorDecoration:gs})),ys.of(xs(t.rightPadded))]})}(s,f)}));return function(){return clearTimeout(e)}}}),[s,f,m,y]),c.useEffect((function(){s&&(s.dispatch({changes:{from:0,to:s.state.doc.length,insert:r}}),g(!0))}),[r,s]),c.useEffect((function(){f&&(f.dispatch({changes:{from:0,to:f.state.doc.length,insert:a}}),b(!0))}),[a,f]),{left:{view:s,ref:d,code:r,options:o,ready:m},right:{view:f,ref:v,code:a,options:l,ready:y}}}function Ts(e){var n,t=e.diffViewer,r=(0,_t.Z)(e,["diffViewer"]);return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{css:{height:t.ready?0:"auto"},ref:t.ref}),!t.ready&&(0,l.tZ)(Ps.PH,(0,R.Z)({code:null!==(n=t.code)&&void 0!==n?n:""},t.options,r))]})}function Ds(){var e,n=(0,V.Z)().fs,t=(0,c.useRef)(new Map),i=(0,at.Z)(),o=(0,c.useState)(!1),s=o[0],d=o[1],p=(0,c.useState)(!1),f=p[0],v=p[1],h=(0,c.useState)([]),g=h[0],Z=h[1],y=function(e){var n=(0,R.Z)({},ps,e);return A.a(fs,n)}().data,b=(null===y||void 0===y||null===(e=y.currentUser)||void 0===e?void 0:e.isAdmin)||window.location.search.includes("debug=1"),w=(0,qn.IY)(),k=(0,u.b9)(cr.a4),I=g.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),P=(0,c.useState)(),C=P[0],E=P[1];(0,c.useEffect)((function(){if(i&&!t.current.has(i)&&i!==ss.rq){var e=function(e){k(e),t.current.delete(i),Z((function(e){return e.filter((function(e){return e.path!==i}))}))};(0,ct.Mb)(i)?n.watchTextFile(i,{onMoveOrDelete:e,onError:function(e,t){e.code||(n.flush(),n.persist({skipDebounce:!0}),w({error:e,extras:t,tags:{ot:!0}}))},onReconnectFail:function(e,n){Z((function(t){return(0,Ee.Z)(t.filter((function(e){return e.path!==i}))||[]).concat([{path:i,prompt:n,cb:e}])})),d(!0),C||E(i)}}):n.watchFile(i,{onChange:function(){},onMoveOrDelete:e}),t.current.set(i,!0)}}),[i,n,w,k]);var T,D,U=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.j)(S.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:n}),(0,S.j)(S.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===n?"client":"server"}),v(!0),e.next=5,Promise.all(g.map((function(e){return Z((function(n){var t=n.filter((function(n){return n.path!==e.path}));return 0===t.length?d(!1):E(t[0].path),t})),e.cb(n)})));case 5:v(!1);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=C?g.find((function(e){return e.path===C})):null,_=null===M||void 0===M?void 0:M.prompt,G=C,B=Es({left:{code:null!==(T=null===_||void 0===_?void 0:_.localContent)&&void 0!==T?T:"",filePath:G},right:{code:null!==(D=null===_||void 0===_?void 0:_.remoteContent)&&void 0!==D?D:"",filePath:G}}),N=B.left,O=B.right,X=[m.l0.minHeight("7em"),m.l0.maxHeight("50vh"),m.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,l.tZ)(m.u_,{css:[{maxHeight:"90%",maxWidth:"90%"}],preventClose:!0,isOpen:s,onRequestClose:function(){},children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,l.BX)(x.x,{multiline:!0,children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",g.length>1?"these files":"this file"," you'd like to keep."," ",g.length>1?(0,l.BX)("strong",{children:["There are ",g.length," files impacted by this."]}):""]}),f?(0,l.tZ)(us.Loader,{}):(0,l.BX)(l.HY,{children:[I.length?(0,l.tZ)(m.Ph,{initialSelectedItem:I[0],selectedItem:I.find((function(e){return e.path===C})),items:I,onChange:function(e){E(e.path)}}):null,b?(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(16),m.l0.justify.start,m.l0.align.center,m.l0.pt(16),m.l0.p(8),m.l0.backgroundColor.redDimmest,m.l0.font.code],children:[(0,l.tZ)(x.x,{variant:"subheadDefault",children:"Debug View"}),(0,l.BX)(x.x,{children:["Divergence type: ",null===_||void 0===_?void 0:_.case]})]}):null,(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,l.tZ)(x.x,{variant:"subheadDefault",children:"My changes"}),(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.flex.growAndShrink(1),m.l0.py(8)],children:(0,l.tZ)(m.G7,{css:X,children:(0,l.tZ)(Ts,{diffViewer:N})})}),(0,l.BX)(m.G7,{css:[m.l0.pt(16)],children:[(0,l.tZ)(x.x,{multiline:!0,css:[m.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,l.tZ)(m.zx,{onClick:function(){U("local")},text:"Reset to Mine"})]})]}),(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,l.tZ)(x.x,{variant:"subheadDefault",children:"Shared changes"}),(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.flex.growAndShrink(1),m.l0.py(8)],children:(0,l.tZ)(m.G7,{css:X,children:(0,l.tZ)(Ts,{diffViewer:O})})}),(0,l.BX)(m.G7,{css:[m.l0.pt(16),m.l0.justify.end],children:[(0,l.tZ)(x.x,{multiline:!0,css:[m.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,l.tZ)(m.zx,{onClick:function(){U("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var Us=t(1557);function Ms(){var e=(0,V.Z)().fs,n=(0,c.useState)(!1),t=n[0],r=n[1],i=(0,c.useState)(!1),o=i[0],a=i[1],u=(0,ut.D)();(0,c.useEffect)((function(){if(!o)return e.onDiskQuotaExceeded((function(){r(!0)}))}),[e,o]);var s=function(){r(!1)};return(0,l.tZ)(m.u_,{isOpen:t,onRequestClose:s,children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.BX)(m.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,l.tZ)(Us.Z,{color:m.TV.accentNegativeDefault,size:20})]}),(0,l.BX)(m.xv,{multiline:!0,variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,l.tZ)(ya.Z,{})," icon on the left."]}),(0,l.tZ)(m.xv,{multiline:!0,children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,l.tZ)(m.xv,{multiline:!0,variant:"small",children:"We apologize for the inconvenience. We are working on a solution to allow you to boost your disk limits."}),(0,l.BX)(m.G7,{css:m.l0.rowWithGap(8),tag:"label",children:[(0,l.tZ)(m.XZ,{id:u,checked:o,onChange:function(e){return a(Boolean(e.currentTarget.value))}}),(0,l.tZ)(m.xv,{multiline:!0,variant:"small",children:"Do not show this message again for this session."})]}),(0,l.tZ)(m.zx,{onClick:s,text:"Close"})]})})}var _s=t(46701),Gs=t(79611),Bs=t(43186),Ns=t(7787),As=!1;var Os=t(95642);function Xs(){var e=(0,E.Z)(["\n  mutation UpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return Xs=function(){return e},e}var js={},Ls=(0,T.Ps)(Xs());function zs(){var e=(0,ye.Z)(),n=(0,V.Z)().container,t=(0,u.b9)(cr._N),r=(0,i.Z)(function(e){var n=(0,R.Z)({},js,e);return D.D(Ls,n)}(),1),o=r[0];(0,c.useEffect)((function(){return n.onPortOpened((function(n){var r,i=n.isVnc;t(i?"vnc":"webview"),r=i?{isVnc:!0}:{isServer:!0},o({variables:{input:(0,R.Z)({id:e},r)}})}))}),[n,t,o,e])}var Fs=t(18888),Hs=t(58482),Ws=t(87238);var $s=t(10129);function Vs(){return(Vs=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vr.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,vr.l.query({query:Ws.Ux,variables:{id:n}});case 4:return t=e.sent.data,e.abrupt("return","Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl.title:null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ks(){var e=(0,V.Z)(),n=e.container,t=e.presence;c.useEffect((function(){var e=t.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var o=t.username;return function(e){return Vs.apply(this,arguments)}(i.id).then((function(e){e&&function(e){qu.apply(this,arguments)}({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(i.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})})),function(){e()}}}))}),[t,n])}var qs=t(15335),Ys=t(75436);function Qs(){var e=(0,E.Z)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return Qs=function(){return e},e}var Js={},ed=(0,T.Ps)(Qs());function nd(){!function(e){var n=(0,R.Z)({},Js,e);Ys.m(ed,n)}({variables:{replId:(0,ye.Z)()},skip:(0,qs.Z)()!==Vo.e.CONNECTED})}var td=t(95716);function rd(){var e=(0,E.Z)(["\n  query GitRepoIsNewFork($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        timeCreated\n        timeUpdated\n      }\n    }\n  }\n"]);return rd=function(){return e},e}var id={},od=(0,T.Ps)(rd());var ad=t(16799),ld=t(67128);function cd(){var e=(0,ye.Z)(),n=(0,V.Z)().container,t=function(e){var n=(0,R.Z)({},id,e);return A.a(od,n)}({variables:{replId:e}}).data,r=null===t||void 0===t?void 0:t.repl;(0,c.useEffect)((function(){if(r){var e,t=null!==r.origin,i=new Date(r.timeUpdated).getTime()-new Date(r.timeCreated).getTime()<1e3;if(t&&i)(e=n).exec.apply(e,(0,Ee.Z)(ad.rO.format(ld.Xe)))}}),[n,r])}function ud(){var e=(0,pn.Z)(),n=e.showConfirm,t=e.showNotice,r=e.hideMessage,i=e.showError,o=(0,V.Z)().container;(0,c.useEffect)((function(){var e=o.onToast((function(e){e.startsWith("PANIC")||t(e,function(e){var n=e.length/.025+1e3;return Math.max(1e4,n)}(e))})),a=null,l=!1,c=o.onConnectionStateChanged((function(e){if(a&&(r(a),a=null),e===Vo.e.CONNECTED)return l=!0,void(a=n("Connected",1500));l&&(e!==Vo.e.CONNECTING?e!==Vo.e.DISCONNECTED||(a=i("Disconnected")):a=t("Reconnecting"))}));return function(){a&&r(a),e(),c()}}),[o,n,t,i,r])}var sd=t(9523);function dd(){var e=(0,E.Z)(["\n  query ReplEnvironment2LoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return dd=function(){return e},e}var pd={},fd=(0,T.Ps)(dd(),sd.D,sd.C);var vd=t(50217),hd=t(18962),md=t(25108);function gd(){var e,n,t=(0,ye.Z)(),i=(0,V.Z)(),o=i.fs,l=i.session,u=function(e){var n=(0,R.Z)({},pd,e);return A.a(fd,n)}({variables:{id:t}}).data,s="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?u.repl:null,d="CurrentUser"===(null===u||void 0===u||null===(e=u.currentUser)||void 0===e?void 0:e.__typename)?u.currentUser:null,p="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)&&u.repl.isModelSolutionFork,f=p?s&&(null===(n=s.origin)||void 0===n?void 0:n.origin):s&&s.origin||null,v=(0,Ko.b)("Repl"===(null===f||void 0===f?void 0:f.__typename)?{repl:f,currentUser:d||void 0}:null);c.useEffect((function(){s&&d&&s.isProject&&o.stat(".lesson").then((function(e){e.exists||o.createDir(".lesson")}))}),[o,d,s]),c.useEffect((function(){if(s&&(s.isProjectFork||p)&&f&&v){var e=(0,Vo.Z)({onUnrecoverableError:function(e){md.error(e),Zi.$e((function(n){n.setTag("curriculum-authoring",!0),n.setExtra("originId",f.id),Zi.Tb(e)}))}}),n=(0,Yo.Z)({container:e});e.connect({context:v,fetchConnectionMetadata:function(){return(0,vd.Z)({url:"/data/repls/".concat(s.id,"/get_repl_origin_guest_connection_metadata")})}});var t=e.onConnectionStateChanged(function(){var i=(0,r.Z)(a().mark((function r(i){var c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i!==hd.e.CONNECTED){r.next=22;break}return t(),r.prev=2,r.next=5,o.copyDirFromRemote(".lesson",".lesson",n);case 5:if(!(c=r.sent).error){r.next=10;break}Zi.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",f.id),Zi.Tb({message:"Error copying lesson: ".concat(c.error)})})),r.next=14;break;case 10:return r.next=12,o.stat(".lesson/instructions.md");case 12:r.sent.exists&&l.setInstructionsViewerVisible(!0);case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),Zi.$e((function(e){e.setTag("curriculum-authoring",!0),Zi.Tb(r.t0)}));case 19:return r.prev=19,e.destroy(),r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[2,16,19,22]])})));return function(e){return i.apply(this,arguments)}}());return function(){return e.destroy()}}}),[o,v,s,f,p,l])}var Zd=t(68122),yd=t(39571);function bd(){var e=(0,E.Z)(["\n  fragment WorkspaceUseDebuggerRepl on Repl {\n    id\n    lang {\n      id\n      hasDAP\n    }\n  }\n"]);return bd=function(){return e},e}function xd(){var e=(0,E.Z)(["\n  query WorkspaceUseDebugger($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceUseDebuggerRepl\n      }\n    }\n  }\n  ","\n"]);return xd=function(){return e},e}var wd={},kd=(0,T.Ps)(bd()),Id=(0,T.Ps)(xd(),kd);function Pd(e){var n=e.onOpenFile,t=e.onOutput,r=(0,V.Z)(),i=r.debuggest,o=r.dotReplit,a=function(e){var n=(0,R.Z)({},wd,e);return A.a(Id,n)}({variables:{replId:(0,ye.Z)()}}).data,l=function(e){var n=e.repl,t=e.dotReplit,r=e.debuggest;return(0,c.useEffect)((function(){if(n){if(!n.lang.hasDAP)return t.watch((function(e){var n;e.error||(null===(n=e.config.debugger)||void 0===n?void 0:n.support)&&r.connect()}));r.connect()}}),[n,r]),(0,Zd.Z)(r.mainClient)}({debuggest:i,dotReplit:o,repl:"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null});!function(e){(0,c.useEffect)((function(){if(e){var n=e.onStarted((function(e){(0,S.j)(S.U3.DEBUGGER_USED,{action:"started",joined:e})})),t=e.onPaused((function(e){(0,S.j)(S.U3.DEBUGGER_USED,{action:"paused",reason:e})})),r=e.onBreakpoint((function(n){(0,S.j)(S.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:n,state:e.state.current})}));return function(){n(),t(),r()}}}),[e])}(l),function(e,n){var t,r=n.onOutput,i=n.onOpenFile,o=(0,Qt.Z)(r),a=(0,Qt.Z)(i);(0,c.useEffect)((function(){if(e)return e.onOutput((function(e){o.current(e)}))}),[e]);var l=(0,Zd.Z)(e?e.stackFrames:null),u=null===l||void 0===l?void 0:l[0],s=null===u||void 0===u||null===(t=u.source)||void 0===t?void 0:t.path,d=null===u||void 0===u?void 0:u.line;(0,c.useEffect)((function(){if(s&&d&&e){var n=(0,yd.om)(s);n?a.current({path:n,line:d}):e.stepOut()}}),[e,s,d])}(l,{onOpenFile:n,onOutput:t})}var Sd=t(75338),Cd={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"};var Rd=t(536),Ed=t(45435);var Td=t(52008);var Dd=t(99336);var Ud=t(5442),Md=t(22371),_d=t(1864),Gd="video.json",Bd=(0,_d.join)(Md.V,Gd);function Nd(e,n){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,r.Z)(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.find((function(e){return e.type===lt.Tv.File&&e.filename===Gd}))){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,n.readFile(Bd);case 5:if(!(r=e.sent).error){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",r.content.toString());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Od(){!function(e){var n=(0,V.Z)().fs,r=(0,co.Z)().isTutorial,o=(0,Qt.Z)(e);(0,c.useEffect)((function(){if(r){var e=!1,a=n.watchDir(Md.V,{onChange:function(r){Promise.all([t.e(1142).then(t.t.bind(t,11142,23)),Nd(n,r)]).then((function(n){var t=(0,i.Z)(n,2),r=t[0],a=t[1];if(!e)if(a){var l=null;try{l=r.parse(a)}catch(u){}var c="object"===typeof l&&"string"===typeof l.embedUrl?l.embedUrl:null;o.current(c?{embedUrl:c}:null)}else o.current(null)}))},onMoveOrDelete:function(){o.current(null)},onError:function(){o.current(null)}});return function(){e=!0,a()}}}),[n,r,o])}((0,ii.gQ)())}var Xd=t(55528),jd=t(4862),Ld=t(58823);function zd(){var e=(0,E.Z)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return zd=function(){return e},e}var Fd={},Hd=(0,T.Ps)(zd());function Wd(){var e,n=(0,V.Z)().presence,t=(0,ye.Z)(),r=(0,c.useRef)(!1),i=function(e){var n=(0,R.Z)({},Fd,e);return A.a(Hd,n)}({variables:{replId:t}}),o=i.data,a=i.loading,l=0;"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&(l=o.repl.multiplayers.length,"User"===(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)&&(l+=1));(0,c.useEffect)((function(){if(!a&&!r.current){var e=n.onActiveUsersChange((function(){r.current=!0,e(),(0,S.j)(S.U3.MULTIPLAYER_REPL_OPENED,{replId:t,participantsCount:l,usersOnlineCount:n.getActiveUsers().length})}));return e}}),[t,a,l,n])}function $d(e){var n,t=e.repl,r=e.currentUser,o=r.id===(null===(n=t.user)||void 0===n?void 0:n.id),a=(0,Bs.Z)().preferences,l=(0,V.Z)().session;!function(){var e=(0,V.Z)(),n=e.lspnix,t=e.lsp,r=e.fs,i=(0,Bs.Z)().preferences.codeIntelligence,o=(0,at.Z)()||"",a=(0,Xd.Z)(o);c.useEffect((function(){if(!i)return t.stop(),void n.disable();t.start(),n.enable()}),[n,t,i]),c.useEffect((function(){if(a&&o&&(0,ct.Mb)(o))return a.onWorkspaceEdit((function(e){var n=e.edit;return(0,Ld.w)({edit:n,fs:r,client:a}),{applied:!0}}))}),[r,a,o]),c.useEffect((function(){if(a&&o&&(0,ct.Mb)(o)&&(0,jd.Z)(a).isTextDocumentSyncSupported)return r.watchTextFile(o,{onFlush:function(){a.isOpen(o)&&a.notify.didSave(o)}})}),[r,o,a])}(),function(){var e=(0,ar.ne)();(0,c.useEffect)((function(){var n=function(){e.flush()};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e]),(0,c.useEffect)((function(){var n=function(){"hidden"===document.visibilityState&&e({force:!1})};return document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n)}}),[e]),(0,c.useEffect)((function(){var n=null;return function t(){n=setTimeout((function(){e({force:!1}),t()}),6e4)}(),function(){n&&clearTimeout(n)}}),[e]),(0,c.useEffect)((function(){return function(){e.flush()}}),[e])}(),(0,Fs.Z)(),(0,Rd.Z)({workspaceType:"desktop"}),c.useEffect((function(){var e=function(e){"s"===e.key&&(0,$s.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Ks(),nd(),function(){var e=(0,V.Z)().presence;c.useEffect((function(){return e.onFollowingUsersChanged((function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,S.j)(td.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,S.j)(td.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),function(e){var n=e.isAnon,t=e.isOwner,r=e.ignoreUnloadPrompt,i=(0,ye.Z)();(0,Ws.Vg)({skip:n||t,variables:{replId:i},onData:function(e){var n=e.data.data;!1===(null===n||void 0===n?void 0:n.currentUserCanWrite)&&(r(!0),window.location.reload())}})}({isAnon:!1,isOwner:o,ignoreUnloadPrompt:(0,Hs.Z)()}),cd(),function(){var e=(0,V.Z)().presence,n=(0,at.Z)();(0,c.useEffect)((function(){e.updateOpenFile(n)}),[e,n])}(),ud(),gd(),(0,Sd.ZP)(),function(){var e=(0,V.Z)().runner,n=(0,u.b9)(cr.im),t=(0,u.b9)(cr.Ky),r=(0,u.b9)(cr.ao),i=lo(),o=(0,u.Dv)(ar.Mn),a=(0,_r.e)(Br.H.Output);c.useEffect((function(){if(o&&(null===a||void 0===a?void 0:a.isActive)){var e=setInterval((function(){n()}),200);return function(){clearInterval(e)}}}),[null===a||void 0===a?void 0:a.isActive,n,o]),c.useEffect((function(){if(o)return e.onStateChanged((function(e){e===is.A.RUNNING&&n()}))}),[e,n,o]),c.useEffect((function(){o&&(i?t({type:"instructions"}):r({type:"instructions"}))}),[i,t,r,o]),(0,Gr.x)(Cd,{run:function(){return t({type:"shell"})},enabled:Boolean(o)})}(),function(){var e=(0,s.useRouter)(),n=(0,V.Z)().container,t=(0,i.Z)((0,u.KO)(Ed.a0),2),r=t[0],o=t[1],a=(0,u.b9)(Ed.Th);(0,c.useEffect)((function(){e.query.debug&&o(!0)}),[o,e.query.debug]),(0,c.useEffect)((function(){if(r)return n.client().onDebugLog((function(e){"log"===e.type&&a((function(n){return(0,Ee.Z)(n).concat([{index:n[n.length-1]?n[n.length-1].index+1:0,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}))}),[r,a,n])}(),function(){var e=(0,V.Z)(),n=e.presence,t=e.session;(0,c.useEffect)((function(){return n.onUserOpenedFile((function(e){var r=e.user,i=e.file,o=n.getFollowedUser();o&&o.id===r.id&&i&&t.openFile(i)}))}),[n,t]);var r=(0,c.useState)(null),i=r[0],o=r[1];(0,c.useEffect)((function(){return n.onFollowedUserChanged(o)}),[n,t]),(0,c.useEffect)((function(){var e=function(){n.unfollowUser()};if(i){var t=setTimeout((function(){document.addEventListener("click",e)}),0);return function(){clearTimeout(t),document.removeEventListener("click",e)}}}),[i])}(),(0,Ud.Z)(),Od(),(0,fo.z)(),function(){var e=(0,co.Z)().isTutorial,n=(0,ii.$x)(),t=(0,nr.Q)("flagLayoutNavigator");(0,c.useEffect)((function(){t&&e&&n()}),[n,e,t])}(),Pd({onOpenFile:function(e){l.openFile(e.path),l.updateDeeplink(e)},onOutput:function(){}}),function(){var e=(0,Td.JM)().data,n=null===e||void 0===e?void 0:e.currentUser,t=(0,u.b9)(nr.H);(0,c.useEffect)((function(){t({flagSaveLayoutState:Boolean(null===n||void 0===n?void 0:n.flagSaveLayoutState),flagGhostrunner:Boolean(null===n||void 0===n?void 0:n.flagGhostrunner),flagLayoutNavigator:Boolean(null===n||void 0===n?void 0:n.flagLayoutNavigator)})}),[t,n])}();var d=["html","html_beta"].includes(t.language);(0,Os.Z)({initialLayoutState:t.layoutState||null}),(0,c.useEffect)((function(){return Zi.YA("replId",t.id),Dd.c_.setTag("replId",t.id),function(){Zi.YA("replId",void 0),Dd.c_.setTag("replId",void 0)}}),[t.id]),function(e){var n=e.repl,t=e.currentUser,r=(0,V.Z)().container,i=(0,s.useRouter)(),o=(0,Ko.b)({repl:n,currentUser:t});(0,c.useEffect)((function(){var e;return As||(As=!0,e=i.query.initialConnectionMetadata),r.connect({customConnectionMetadata:e,context:o}),function(){r.close()}}),[o,r]),(0,c.useEffect)((function(){return function(){r.destroy()}}),[r])}({repl:t,currentUser:r}),zs(),(0,c.useEffect)((function(){var e,n="Repl"===(null===(e=t.origin)||void 0===e?void 0:e.__typename)?t.origin.id:null;return(0,Ns.Fy)({id:t.id,slug:t.slug,originId:n,roles:r.roles&&r.roles.map((function(e){return e.name}))}),function(){(0,Ns.dv)()}}),[t,r.roles]);var p=(0,u.b9)(Fn._E),f=(0,zr.T)();(0,c.useEffect)((function(){p(!f)}),[f,p]);var v=a.isLayoutStacked,h=(0,u.b9)(ao.h$);(0,c.useEffect)((function(){return h(v)}),[h,v]);var m=(0,u.b9)(ao.gM);return(0,c.useEffect)((function(){return m(d)}),[m,d]),Wd(),null}var Vd=t(25602),Kd=t(89390),qd=function(){var e=(0,r.Z)(a().mark((function e(n,t){var r,i,o,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,Vd.u9)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,Vd.mv)(n);case 4:if(r=e.sent,i=r.path,o=r.line,l=r.col,i){e.next=10;break}return e.abrupt("return",!1);case 10:return t.openFile(i,{line:o,col:l}),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function Yd(){return function(){var e=(0,V.Z)(),n=e.fs,t=e.session,i=e.dotReplit,o=(0,ye.Z)(),l=(0,c.useRef)(!1),s=(0,u.Dv)(Fn.QP),d=(0,Qt.Z)(s),p=(0,c.useState)(!1),f=p[0],v=p[1],h=(0,u.Dv)(ar.Mn);(0,c.useEffect)((function(){if(f&&s){var e=(0,Vd.YM)({path:s}),n=window.location.hash;n===s||n.startsWith(e+":")||(l.current=!0,window.location.hash=e)}}),[f,s]),(0,c.useEffect)((function(){function e(){return(e=(0,r.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:if(!d.current){e.next=5;break}return v(!0),e.abrupt("return");case 5:return e.next=7,qd(n,t);case 7:if(r=e.sent,v(!0),!r&&!d.current&&"saved"!==h){e.next=11;break}return e.abrupt("return");case 11:(0,Kd.P)(n,t,i,o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t,i,o,d,h]),(0,c.useEffect)((function(){if(h){var e=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.current){e.next=3;break}return l.current=!1,e.abrupt("return");case 3:return e.next=5,qd(n,t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[h,n,t])}(),null}var Qd=t(4368);function Jd(){var e=(0,E.Z)(["\n  query ExtensionStore {\n    extensionList {\n      id\n      url\n      name\n      description\n      user {\n        id\n        username\n        displayName\n      }\n    }\n  }\n"]);return Jd=function(){return e},e}var ep=(0,T.Ps)(Jd());function np(){var e=(0,Ni.c)("flag-iframe-extensions"),n=e.enabled,t=e.loading,i=(0,u.b9)(ir.g2),o=c.useCallback((function(e){i({pane:{data:e,type:"extension"},makeActive:!0,placement:"rightOf"})}),[i]);return Er({match:Mr.pl,commands:function(e){return e.active||""!==e.search?[{match:Mr.pl,data:{type:"action",label:"URL",icon:(0,l.tZ)(fn.Z,{}),description:"Add an extension by URL",run:function(){var e=prompt("insert extension url");e&&o({url:e,name:"Extension"})}}},{match:Mr.pl,data:{type:"context",label:"Store",icon:(0,l.tZ)(Qd.Z,{}),description:"Browse the extension store"},commands:function(){var e=(0,r.Z)(a().mark((function e(n){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.active){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,null===vr.l||void 0===vr.l?void 0:vr.l.query({query:ep});case 5:if((t=e.sent)&&!t.error){e.next=8;break}return e.abrupt("return",[]);case 8:if(r=t.data.extensionList){e.next=11;break}return e.abrupt("return",[]);case 11:return e.abrupt("return",r.map((function(e){return{match:Mr.pl,data:{type:"action",label:e.name,icon:(0,l.tZ)(Qd.Z,{}),description:null!==(i=e.description)&&void 0!==i?i:"",run:function(){e.url&&o({url:e.url,name:e.name})}}}})));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}]:[]},data:{type:"context",label:"Extensions",icon:(0,l.tZ)(Qd.Z,{}),description:"Manage extensions"}},{enabled:!t&&n}),null}var tp=(0,u.cn)((function(e){var n=e(Kn.J1);if(!n)return null;var t=e((0,Hn.z)(n)).rectAtom,r=e(t),i=e(Hn.M0);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}));function rp(){var e=(0,u.Dv)(tp),n=(0,ou.Z)();return e&&n?(0,l.tZ)("div",{css:[w.l0.position.absolute,w.l0.width(e.width),w.l0.height(e.height),w.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}var ip=(0,c.memo)(rp),op=t(2548),ap=40,lp=(0,u.cn)({}),cp=(0,u.cn)(null,(function(e,n,t){n(lp,(function(e){return(0,Xn.ZP)(e,(function(e){e[t.id]=t.preferredHeight}))}))}));var up=(0,u.cn)([]),sp=(0,u.cn)(0),dp=(0,u.cn)(null,(function(e,n,t){var r=t.height,i=t.sections,o=r-i.length*ap;n(sp,r),n(up,i.map((function(e){var n=e.id,t=e.percent;return{id:n,height:0===t?0:o*(t/100)}})))}));function pp(e){return(0,u.Dv)(function(e){return(0,Jt.Z)((function(){return(0,u.cn)((function(n){var t;return ap+((null===(t=n(up).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)||0)}))}),[e])}(e))}var fp=(0,u.cn)((function(e){return e(up).map((function(e){return e.id}))}));var vp=(0,u.cn)(null,(function(e,n,t){n(sp,t),n(up,(function(e){return(0,Xn.ZP)(e,(function(e){var n=e.reduce((function(e,n){return e+n.height}),0),r=t-e.length*ap,i=e.filter((function(e){return e.height>0})),o=(r-n)/i.length,a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;d.height=Math.max(0,d.height+o)}}catch(p){l=!0,c=p}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}))}))}));var hp=t(12629),mp=t(44044),gp={root:m.l0.px(4),rowWrap:(0,Dt.iv)([m.l0.borderRadius(8)]),row:(0,Dt.iv)([mp.gU.nofill,m.l0.rowWithGap(8),m.l0.p(4),m.l0.minHeight(32),m.l0.align.center,{transition:"initial"}]),icon:{"& > svg":m.l0.color.foregroundDimmer},textWrap:[m.l0.colWithGap(2),m.l0.flex.growAndShrink(1)],heading:[m.l0.flex.growAndShrink(1),{opacity:.5}],text:[m.l0.flex.growAndShrink(1)]};function Zp(e){var n=e.pane,t=pr(),r=(0,Hi.Se)(),o=r.Icon({pane:n}),a=r.getTitle(n),c=(0,Ql.N)(),u=(0,i.Z)((0,Nc.c)({type:Yl.z.Pane,item:function(){return{type:Yl.z.NewPane,pane:n}},end:function(){c()}}),2)[1];return(0,l.tZ)(m.G7,{css:gp.root,children:(0,l.BX)(m.Tg,{innerRef:u,onClick:function(){t({pane:n})},css:gp.row,children:[(0,l.tZ)(m.G7,{css:gp.icon,children:o}),(0,l.tZ)(m.xv,{css:gp.text,color:"dimmest",children:a})]})})}function yp(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,a=e.dragRef;return(0,l.tZ)(m.G7,{css:gp.root,children:(0,l.tZ)(m.Tg,{elevated:r,css:gp.rowWrap,children:(0,l.BX)(m.Tg,{innerRef:a,css:gp.row,children:[(0,l.tZ)(m.G7,{css:gp.icon,children:t}),(0,l.BX)(m.G7,{css:gp.textWrap,children:[o?(0,l.tZ)(m.xv,{variant:"small",color:"dimmest",css:gp.heading,children:o}):null,(0,l.tZ)(m.xv,{css:gp.text,color:(null===i||void 0===i?void 0:i.length)?"dimmest":"default",children:(null===i||void 0===i?void 0:i.length)?(0,l.tZ)(gn.xK,{style:{color:m.TV.foregroundDimmest},matchStyle:{fontWeight:m.TV.fontWeightBold,color:m.TV.foregroundDefault},source:n,matches:i.map((function(e){return{column:e.from,length:e.to-e.from}}))}):n})]})]})})})}function bp(e){var n=e.pane,t=e.active,r=e.highlightRanges,o=e.title,a=e.heading,c=(0,Hi.Se)().Icon({pane:n}),u=(0,i.Z)((0,Nc.c)({type:Yl.z.Pane,item:function(){return{type:Yl.z.NewPane,pane:n}}}),2)[1];return(0,l.tZ)(yp,{active:t,icon:c,title:o,heading:a,dragRef:u,highlightRanges:r})}function xp(){var e=mo(),n=e.length,t=(0,u.b9)(cp);return(0,c.useEffect)((function(){var e=Math.min(300,40*n);t({id:"dock",preferredHeight:e})}),[n,t]),(0,l.tZ)(l.HY,{children:e.map((function(e){return(0,l.tZ)(Zp,{pane:e},e.type)}))})}function wp(){var e=(0,V.Z)().presence,n=be(),t=(0,K.Z)({presence:e}),o=(0,i.Z)(function(e){var n=(0,R.Z)({},ne,e);return J.t(te,n)}(),1),c=o[0];return(0,Jt.Z)((function(){return{data:{type:"context",label:"Multiplayers",icon:(0,l.tZ)(Ur.Z,{})},commands:(0,r.Z)(a().mark((function e(){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,c({variables:{ids:t.map((function(e){return e.id}))}});case 4:if(r=e.sent.data){e.next=7;break}return e.abrupt("return",[]);case 7:return i=t.reduce((function(e,n){return e[n.id]=n.color,e}),{}),o=r.currentUser,u=r.usersByIds.filter((function(e){return e.id!==(null===o||void 0===o?void 0:o.id)})),e.abrupt("return",u.map((function(e){return{match:Mr.pl,data:{type:"action",label:e.username,icon:(0,l.tZ)(m.G7,{style:{border:"2px solid",borderColor:i[e.id],borderRadius:"50%"},children:(0,l.tZ)(ae.Z,{size:16,src:e.image,alt:e.username})}),run:function(){return n({username:e.username,id:e.id})}}}})));case 11:case"end":return e.stop()}}),e)})))}}),[t,n,c])}var kp={type:"context",icon:(0,l.tZ)(xt.Z,{}),label:"",description:"Search"};var Ip=m.KD.div,Pp=m.KD.input,Sp={inputContainer:(0,Dt.iv)([m.l0.position.relative,m.l0.flex.row,m.l0.align.center,m.gU.filled,{":focus-within":{borderColor:m.TV.outlineDefault}}]),input:(0,Dt.iv)([m.l0.flex.growAndShrink(1),m.l0.p(8),m.l0.color.foregroundDefault,{paddingLeft:26,fontSize:m.TV.fontSizeDefault,outline:"0 none",backgroundColor:"transparent",borderColor:"transparent"}]),menuContainer:(0,Dt.iv)([m.l0.left(0),m.l0.width("100%"),m.l0.overflowY("auto"),m.l0.py(4),m.l0.position.absolute,{top:48,height:"calc(100% - ".concat(48,"px)"),zIndex:1}]),searchIcon:(0,Dt.iv)([m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.height("100%"),m.l0.center,{paddingLeft:6,pointerEvents:"none"}]),clearButton:(0,Dt.iv)([m.l0.reset.button,m.l0.p(4),m.l0.color.foregroundDimmest,m.l0.cursor.pointer,{"&:hover":m.l0.color.foregroundDefault}])};function Cp(){var e=function(){var e=(0,V.Z)().fs,n=(0,ro.A)(),t=(0,io.T)(),r=(0,mr.C)(),i=Zo(),o=yo(),a=wp(),c=(0,Jt.Z)((function(){return(0,u.cn)((function(c){var u=c(i),s=c(o),d={data:{type:"context",label:"Tools",icon:(0,l.tZ)(oo.Z,{})},commands:function(){return s}},p=(0,Wi.i)({openFile:r,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return p.match=void 0,{data:kp,commands:function(){return[u,p,d,a]}}}))}),[e,o,i,t,r,n,a]);return(0,u.Dv)(c)}(),n=(0,mr.C)(),t=pr(),r=(0,Mt.Z)({onSelect:function(e){if(r.combobox.reset(),r.setInputValue(""),"openFile"!==e.data.type)if("openPane"!==e.data.type)"action"!==e.data.type||e.data.run();else{var i=e.data.pane;t({pane:i})}else{var o=e.data.deeplink.path;n({path:o})}},initialCommand:e,insertSectionHeaders:!0}),i=r.combobox;return(0,l.BX)(l.HY,{children:[(0,l.BX)(Ip,(0,oe.Z)((0,R.Z)({},i.getComboboxProps()),{css:Sp.inputContainer,children:[(0,l.tZ)(m.G7,{css:Sp.searchIcon,children:r.isLoading?(0,l.tZ)(de.Z,{}):(0,l.tZ)(xt.Z,{color:m.TV.foregroundDimmest})}),(0,l.tZ)(Pp,(0,R.Z)({css:Sp.input},r.combobox.getInputProps({value:r.inputValue,ref:r.inputRef,onChange:function(e){return r.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key&&e.currentTarget.blur()},placeholder:"Search"}))),r.inputValue.length>0?(0,l.tZ)(m.G7,{css:Sp.clearButton,tag:"button",children:(0,l.tZ)(y.Z,{onClick:function(){return r.setInputValue("")}})}):null]})),(0,l.tZ)(m.Tg,(0,oe.Z)((0,R.Z)({style:{display:r.inputValue?void 0:"none"},css:Sp.menuContainer},r.combobox.getMenuProps({refKey:"innerRef"})),{children:(0,l.tZ)(Ep,{items:r.itemsWithSections||[],getItemProps:i.getItemProps,highlightedIndex:i.highlightedIndex,isLoading:r.isLoading})}))]})}function Rp(e){var n=(0,c.useRef)(e.items);if(!(e.items!==n.current))return null;var t=e.items.slice(0,100);return e.isLoading||0!==t.length?(0,l.tZ)(m.G7,{css:[m.l0.pt(2)],children:t.map((function(n){if(n.isSection){var t=n.name;return(0,l.tZ)(m.xv,{variant:"small",color:"dimmest",css:[m.l0.px(12),m.l0.py(4)],children:t},t)}var r=n.item,i=n.index,o=i===e.highlightedIndex,a=function(e){var n=e.data,t=e.match.render,r=n.icon,i=n.label,o=null,a=void 0;if("openFile"===n.type){var l=n.deeplink.path;o={type:(0,ur.Dp)({path:l}),data:{path:l}}}else"openPane"===n.type&&(o=n.pane);if(o&&(0,ur.KM)(o)&&o.data.path){var c=o.data.path;i=(0,ct.UO)(c);var u=(0,ct.Il)(c);u&&(a=u)}return{pane:o,title:i,heading:a,icon:r,highlightRanges:t&&"ranges"in t?t.ranges:void 0}}(r),c=a.pane,u=a.highlightRanges,s=a.icon,d=a.title,p=a.heading;return(0,l.tZ)(Ip,(0,oe.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:c?(0,l.tZ)(bp,{active:o,highlightRanges:u,pane:c,title:d,heading:p}):(0,l.tZ)(yp,{active:o,highlightRanges:u,title:d,icon:s})}),(0,Mt.k)(r))}))}):(0,l.tZ)(m.xv,{color:"dimmest",css:[m.l0.px(8),m.l0.py(16),{textAlign:"center"}],children:"No results found"})}var Ep=(0,c.memo)(Rp),Tp=t(47979),Dp=t(87583);function Up(e){var n=e.sections,t=e.id,r=n.findIndex((function(e){return e.id===t}));if(-1===r)throw new Error("");var i=n[r],o=i.height;i.height=0;var a=r===n.length-1?n.slice(0,r).reverse():n.slice(r),l=!0,c=!1,u=void 0;try{for(var s,d=a[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;if(0!==p.height)return void(p.height+=o)}}catch(v){c=!0,u=v}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}var f=n[r+1];f&&(f.height=o)}var Mp=(0,u.cn)(null),_p=(0,u.cn)(null,(function(e,n,t){var r=e(up);if("start"!==t.type){var i=e(Mp);if(!i)throw new Error("");if("update"!==t.type)n(up,(0,Xn.ZP)(r,(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||Up({sections:e,id:a.id})}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}))),n(Mp,null);else{var o=e(sp);n(up,(0,Xn.ZP)(i.sectionStart,(function(e){var n=i.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),i=n.findIndex((function(e){return e.id===t}));if(-1===i)throw new Error("Expected sectionIndex");var o=r+n.slice(i).reduce((function(e,n){return e+n.height}),0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),u=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var s=!0,d=!1,p=void 0;try{for(var f,v=n.slice(i+1)[Symbol.iterator]();!(s=(f=v.next()).done);s=!0){var h=f.value;if(0!==h.height){if(!(h.height<u)){h.height-=u;break}u-=h.height,h.height=0}}}catch(P){d=!0,p=P}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}}else{var m=n[i+1];if(e.height>=0)return a.height=e.height,void(m&&(m.height+=u));var g=a.height;a.height=0;var Z=-1*e.height,y=!0,b=!1,x=void 0;try{for(var w,k=n.slice(0,i).reverse()[Symbol.iterator]();!(y=(w=k.next()).done);y=!0){var I=w.value;if(I.height>Z){g+=Z,I.height-=Z;break}g+=I.height,Z-=I.height,I.height=0}}catch(P){b=!0,x=P}finally{try{y||null==k.return||k.return()}finally{if(b)throw x}}m&&(m.height+=g)}}({headerHeight:ap,totalHeight:o,sections:e,id:i.id,height:n})})))}}else{var a=r.find((function(e){return e.id===t.id}));if(!a)throw new Error("");n(Mp,{id:t.id,heightStart:a.height,sectionStart:r})}}));function Gp(e){var n=e.id,t=(0,Jt.Z)((function(){return(0,u.cn)((function(e){var t;return(null===(t=e(Mp))||void 0===t?void 0:t.id)===n}))}),[n]);return(0,u.Dv)(t)}var Bp=(0,u.cn)((function(e){return e(Fn._E)&&!e(Mp)}));var Np=(0,u.cn)(null,(function(e,n,t){var r=e(up),i=e(lp)[t],o=r.find((function(e){return e.id===t}));if(!o)throw new Error("");0===o.height?n(up,(0,Xn.ZP)(r,(function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex((function(e){return e.id===r}));if(-1===i)throw new Error("Expected sectionIndex");var o=n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),a=e.totalHeight-o,l=n[i];if(a>0)l.height=a;else{var c=n.slice(i+1).find((function(e){return e.height>0}))||n.slice(0,i).reverse().find((function(e){return e.height>0}));if(c){if(void 0!==t&&t<c.height)return l.height=t,void(c.height-=t);l.height=c.height,c.height=0}}}({sections:n,id:t,totalHeight:e(sp),headerHeight:ap,preferredHeight:i})}))):(n(cp,{id:o.id,preferredHeight:o.height}),n(up,(0,Xn.ZP)(r,(function(e){return Up({sections:e,id:t})}))))}));var Ap=t(72466),Op=t(86851),Xp=t(9252),jp=t(38935),Lp=t(25741),zp=t(42231),Fp=t(9211),Hp=t(69453),Wp=t(94135),$p=(0,c.createContext)(null);function Vp(){var e=(0,c.useContext)($p);if(!e)throw new Error("Expected ref");return e}var Kp=t(58360),qp={root:(0,Dt.iv)([m.l0.rowWithGap(4),m.l0.pr(2)])};function Yp(){var e=(0,ye.Z)(),n=(0,V.Z)().session,t=Vp(),r=(0,c.useRef)(null),i=(0,c.useRef)(null),o=(0,Lp.Z)(),a=(0,ir.BN)(),u=(0,zp.Z)(),s=(0,Wp.z)(),d=[{label:jp.dk[jp.st.UploadFile],run:function(){r.current&&(r.current.click(),(0,Hp.Z)({replId:e,action:"uploaded",fileType:lt.Tv.File}))}}];return u&&d.push({label:jp.dk[jp.st.UploadFolder],run:function(){i.current&&(i.current.click(),(0,Hp.Z)({replId:e,action:"uploaded",fileType:lt.Tv.Directory}))}}),d.push({label:jp.dk[jp.st.OpenPane],run:function(){a({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{label:jp.dk[jp.st.DownloadZip],run:s},{label:jp.dk[o?jp.st.HideHiddenFiles:jp.st.ShowHiddenFiles],run:function(){n.setAreHiddenFilesVisible(!o)}}),(0,l.BX)(m.G7,{children:[(0,l.tZ)(Fp.Q,{fileUploadInputRef:r,dirUploadInputRef:i,uploadFiles:function(e){var n;return null===(n=t.current)||void 0===n?void 0:n.uploadFiles(e)}}),(0,l.BX)(m.G7,{css:qp.root,children:[(0,l.tZ)(m.hU,{alt:"New file",tooltipPlacement:"top",onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.addFileType(lt.Tv.File)},children:(0,l.tZ)(Op.Z,{})}),(0,l.tZ)(m.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.addFileType(lt.Tv.Directory)},children:(0,l.tZ)(Xp.Z,{})}),(0,l.tZ)(lu.Z,{resetOnSelect:!0,label:"File Actions",items:d,onItemClick:function(e){e.run()}})]})]})}function Qp(){var e=Vp(),n=(0,Kp.p)();return(0,l.tZ)(Dp.Z,{ref:e,filetreeApi:n,showHeader:!1,showResources:!1})}function Jp(){var e=(0,mr.C)();return(0,l.tZ)(Ap.Z,{onFileOpen:function(n){return e({path:n})}})}var ef={kaboom:{title:"Kaboom",content:(0,l.tZ)(Jp,{})},files:{title:"Files",controls:(0,l.tZ)(Yp,{}),content:(0,l.tZ)(Qp,{})},dock:{title:"Dock",content:(0,l.tZ)(xp,{})}},nf={root:(0,Dt.iv)([m.l0.rowWithGap(4),m.l0.align.center,m.l0.height(ap)]),header:(0,Dt.iv)([m.l0.pl(8),m.l0.flex.growAndShrink(1),m.l0.rowWithGap(4),m.l0.align.center,m.l0.cursor.pointer]),title:(0,Dt.iv)([m.l0.fontWeight.medium]),border:(0,Dt.iv)([m.l0.position.absolute,m.l0.top(0),m.l0.right(0),m.l0.width("calc(100% - ".concat(m.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:m.TV.outlineDimmest}]),content:(0,Dt.iv)([m.l0.flex.growAndShrink(1),m.l0.overflowY("auto")])},tf=(0,c.memo)((function(e){var n=function(e){var n=(0,Jt.Z)((function(){return(0,u.cn)((function(n){var t;return 0===(null===(t=n(up).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)}))}),[e]);return(0,u.Dv)(n)}(e.id),t=(0,u.b9)(Np),r=ef[e.id],i=r.title,o=r.controls;return(0,l.BX)(m.G7,{css:nf.root,children:[(0,l.BX)(m.G7,{onClick:function(){return t(e.id)},css:nf.header,children:[(0,l.tZ)(sc.Z,{rotate:n?0:90}),(0,l.tZ)(m.xv,{css:nf.title,children:i})]}),o||null]})})),rf=(0,c.memo)((function(e){var n=ef[e.id].content;return(0,l.tZ)(m.G7,{css:nf.content,children:(0,l.tZ)(m.G7,{css:m.l0.pb(8),children:n})})})),of={root:(0,Dt.iv)([m.l0.position.relative,m.l0.height(0),m.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,Dt.iv)([m.l0.position.relative,m.l0.height(8),m.l0.top(-4)])},af=(0,c.memo)((function(e){var n=(0,u.b9)(_p),t=Gp({id:e.id});return(0,l.tZ)(m.G7,{css:of.root,onPointerDown:function(t){sl(t,{start:function(){n({type:"start",id:e.id})},move:function(e){var t=e.delta;n({type:"update",delta:t.y})},end:function(e){var t=e.delta;n({type:"end",delta:t.y})}})},children:(0,l.tZ)(m.G7,{style:t?{transform:"scaleY(100)"}:void 0,css:of.hoverArea})})}));function lf(e){var n=pp(e.id),t=(0,u.Dv)(Bp),r=Gp({id:e.id});return(0,l.BX)(m.G7,{style:{zIndex:r?2:void 0,height:n,position:"relative",transition:t?"height 120ms ease-out":void 0},children:[e.border?(0,l.tZ)(m.G7,{css:nf.border}):null,(0,l.tZ)(tf,{id:e.id}),(0,l.tZ)(rf,{id:e.id}),e.resizable?(0,l.tZ)(af,{id:e.id}):null]})}var cf={container:(0,Dt.iv)([m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.width("100%"),m.l0.height("100%"),m.l0.minWidth(Sl.ih)]),header:(0,Dt.iv)([m.l0.pl(8),{zIndex:3}]),content:(0,Dt.iv)([m.l0.flex.growAndShrink(1)]),footer:(0,Dt.iv)([m.l0.pl(8),{zIndex:2}]),resources:(0,Dt.iv)([m.l0.justify.center,m.l0.position.relative,{"& > div":[{borderColor:m.TV.outlineDimmest},m.l0.px(0),m.l0.pt(16)]}]),help:(0,Dt.iv)([m.l0.pb(8),m.l0.flex.growAndShrink(1),m.l0.justify.center])};function uf(){return(0,l.BX)(m.G7,{css:cf.footer,children:[(0,l.tZ)(m.G7,{css:cf.resources,children:(0,l.tZ)(hp.w,{})}),(0,l.tZ)(m.G7,{css:cf.help,children:(0,l.tZ)(ba.Z,{big:!0})})]})}function sf(){var e=(0,u.b9)(dp),n=(0,u.b9)(vp),t=(0,Tp.oj)(),r=(0,c.useRef)(null);(0,c.useEffect)((function(){if(r.current){var n=r.current.getBoundingClientRect().height;e(t?{height:n,sections:[{id:"files",percent:0},{id:"kaboom",percent:60},{id:"dock",percent:40}]}:{height:n,sections:[{id:"files",percent:60},{id:"dock",percent:40}]})}}),[e,t]);var i=(0,Bu.Z)((function(e){e&&n(e.height)}),{wait:100,type:"debounce"});return(0,Xc.l)(i,r)}var df=(0,c.memo)((function(){var e=(0,u.Dv)(fp),n=sf(),t=(0,c.useRef)(null),r=e[e.length-1];return(0,l.tZ)($p.Provider,{value:t,children:(0,l.BX)(m.G7,{css:cf.container,children:[(0,l.tZ)(m.G7,{css:cf.header,children:(0,l.tZ)(Cp,{})}),(0,l.tZ)(m.G7,{css:cf.content,innerRef:n,children:e.map((function(e,n){return(0,l.tZ)(lf,{id:e,resizable:e!==r,border:0!==n},e)}))}),(0,l.tZ)(uf,{})]})})})),pf=m.KD.div,ff=(0,Dt.iv)([m.l0.borderRadius(0,8,8,0),m.l0.height("calc(100% - 16px)"),m.l0.top(8),m.l0.position.relative,m.l0.flex.growAndShrink(1),m.l0.overflowY("auto"),m.l0.overflowX("hidden")]);function vf(){var e=(0,Sl.Iu)(),n=(0,Hi.Se)().Content;return(0,l.tZ)(m.Tg,{elevated:!0,css:ff,children:(0,l.tZ)(n,{pane:e,options:{paneId:"",isHidden:!1,replacePane:function(){},openPane:function(){}}})})}var hf=(0,c.memo)(vf),mf=(0,Dt.iv)([m.l0.position.absolute,m.l0.center,mc,{cursor:"ew-resize",":hover":{zIndex:Nl.gutterHovered}}]),gf=(0,Dt.iv)([m.l0.height(25),m.l0.width(2),xc]),Zf=(0,Dt.iv)([m.l0.coverContainer,{":hover":{transform:"scaleX(4)"}}]),yf=(0,Dt.iv)([m.l0.position.absolute,m.l0.height("200vh"),m.l0.width("200vw")]);function bf(){var e=(0,u.Dv)(Kl),n={start:(0,u.b9)(Hl),update:(0,u.b9)(Wl),end:(0,u.b9)($l)},t=(0,u.Dv)(Vl),r=Al();return(0,l.BX)(pf,{css:[mf,{zIndex:t?r.active:r.normal}],style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},onPointerDown:function(e){sl(e,{start:function(){n.start()},move:function(e){var t=e.delta;n.update({deltaX:t.x})},end:function(){n.end()}})},children:[(0,l.tZ)(m.G7,{className:"grip-line",css:gf}),(0,l.tZ)(m.G7,{css:t?yf:Zf})]})}var xf=(0,Dt.iv)([m.l0.height("100%"),m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.flex.row]),wf=(0,Dt.iv)([xf,m.l0.flex.growAndShrink(1),m.l0.overflow("auto")]);function kf(){var e=(0,Sl.Or)(),n=(0,nr.Q)("flagLayoutNavigator"),t=0===e;return(0,l.BX)(l.HY,{children:[(0,l.BX)(m.G7,{css:n?wf:xf,style:{width:e,visibility:t?"hidden":void 0},children:[t||n?null:(0,l.tZ)(hf,{}),n?(0,l.tZ)(df,{}):null]}),(0,l.tZ)(bf,{})]})}var If=(0,c.memo)(kf),Pf=t(18751),Sf=function(e){var n=e.isOpen,t=(0,s.useRouter)();return(0,l.tZ)(Z.Z,{isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,l.BX)(b.Z,{css:[w.l0.colWithGap(32)],children:[(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center],children:[(0,l.tZ)(Pf.Z,{size:24,css:[w.l0.color.orangeStrongest]}),(0,l.tZ)(x.h,{level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,l.BX)(b.Z,{css:[w.l0.pr(32),w.l0.colWithGap(16)],children:[(0,l.tZ)(x.x,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,l.BX)(b.Z,{css:[w.l0.colWithGap(16),w.l0.pl(16)],children:[(0,l.tZ)(x.x,{children:"\u2022 Exit Firewall Mode."}),(0,l.tZ)(x.x,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(t.asPath)}}),(0,l.tZ)(g.ZP,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})},Cf=t(2146),Rf=t(87138),Ef=new Date("2022-12-01"),Tf=new Date("2022-10-20");function Df(){var e,n=(0,Rf.lg)(),t=n.data,r=n.loading,i=n.error,o=(0,Cf.o)("workspace-history-announcement"),a=o.isLoading,c=o.isDone,u=o.setAsDone,s=new Date,d=(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.timeCreated)?new Date(t.currentUser.timeCreated):null;return r||a||c||i||!d||Ef<s||Tf<d?null:(0,l.tZ)(m.u_,{centered:!0,isOpen:!c,onRequestClose:function(){return u()},children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(16)],children:[(0,l.tZ)(m.xv,{variant:"headerDefault",children:"History in the Workspace"}),(0,l.tZ)(m.xv,{multiline:!0,children:"Now, you can scrub through any file history directly in the workspace. You'll see a History button in the bottom right of any file."}),(0,l.tZ)(m.G7,{css:[m.l0.p(4),m.l0.borderRadius(8),m.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(m.TV.backgroundHigher)}],children:(0,l.tZ)("video",{css:m.l0.borderRadius(8),src:"/public/videos/history-demo-new.mp4",autoPlay:!0,muted:!0,playsInline:!0,loop:!0})}),(0,l.tZ)(m.G7,{css:[m.l0.display.flex,m.l0.align.end],children:(0,l.tZ)(m.zx,{text:"Continue Coding",colorway:"primary",onClick:function(){return u()}})})]})})}function Uf(e){var n=e.repl,t=e.currentUser,r=function(e){var n=e.repl,t=(0,s.useRouter)(),r=(0,mr.C)(),i=(0,qn.IY)(),o=(0,c.useState)(!1),a=o[0],l=o[1];return{services:(0,c.useState)((function(){return(0,Li.Z)({runnerMode:"html"===n.language?"html":"shellrunner",onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))t.push("/home","~/");else{var n={replenvironmentservices:!0,layoutv2:!0};ga.error(e),Zi.Tb(e,{tags:n}),i({error:e,tags:n})}},openFile:r,onFirewallDenied:function(){return l(!0)}})}))[0],ui:(0,c.useState)((function(){return(0,Hi.fK)({config:ma()})}))[0],isFirewallDenied:a}}({repl:n}),i=r.services,o=r.ui,a=r.isFirewallDenied,d=(0,u.Dv)(Fn.dD),p=(0,nr.Q)("flagLayoutNavigator");return(0,l.BX)(Na,{ui:o,services:i,replId:n.id,replLanguage:n.language,children:[(0,l.tZ)(Gr.h,{}),(0,l.tZ)(cs,{}),(0,l.tZ)(Nu.Z,{}),(0,l.tZ)(ji,{repl:n,currentUser:t}),(0,l.tZ)(Dr,{}),(0,l.tZ)(Yd,{}),(0,l.tZ)($d,{repl:n,currentUser:t}),(0,l.tZ)(_s.ZP,{}),p?(0,l.tZ)(Bf,{}):(0,l.BX)(m.G7,{css:[m.l0.flex.row,m.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(m.G7,{css:[m.l0.py(8),m.l0.pl(8),!d&&m.l0.visibility.hidden],children:(0,l.tZ)(Ma,{})}),(0,l.tZ)(Bf,{})]}),(0,l.tZ)(ns,{container:i.container}),(0,l.tZ)(Ds,{}),(0,l.tZ)(Ms,{}),(0,l.tZ)(Df,{}),(0,l.tZ)(_f,{isMultiplayerSession:n.multiplayers.length>0}),(0,l.tZ)(Mf,{image:t.image,username:t.username}),(0,l.tZ)(Sf,{isOpen:a}),(0,l.tZ)(np,{})]})}function Mf(e){var n=e.image,t=e.username,r=(0,i.Z)((0,qn.yF)(),2),o=r[0],a=r[1],u=(0,ar.n7)();return(0,c.useEffect)((function(){o&&u({})}),[o,u]),o?(0,l.tZ)(d.Z,{devHide:function(){return a(null)},eventId:o,currentUserImage:n,currentUserUsername:t}):null}function _f(e){var n=function(e){var n=(0,i.Z)(c.useState(!1),2),t=n[0],o=n[1],l=(0,Yu.X)(),u=l&&!l.isDone&&!l.isLoading;return c.useEffect((function(){u||e&&"default"===Lu()&&o(!0)}),[e,u]),{shouldShowModal:t,hideModal:c.useCallback((function(){Vu(!0),o(!1)}),[]),confirm:c.useCallback((0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu();case 2:o(!1);case 3:case"end":return e.stop()}}),e)}))),[])}}(e.isMultiplayerSession),t=n.shouldShowModal,o=n.hideModal,u=n.confirm;return t?(0,l.tZ)(I,{onCancel:o,onConfirm:u}):null}var Gf=m.KD.div;function Bf(){var e=function(){var e=(0,u.b9)(Vn.rR),n=(0,c.useRef)(null),t=(0,Bu.Z)((function(t){var r=t.width,i=t.height;if(r&&i&&n.current){var o=n.current.getBoundingClientRect(),a=o.top,l=o.left;e({width:r,height:i,x:l,y:a})}}));return(0,c.useCallback)((function(e){n.current=e,t(e)}),[t])}(),n=(0,u.Dv)(Fn.dD),t=(0,u.Dv)(Hn.gg),r=(0,u.Dv)(Hn.g3),i=(0,u.Dv)(Hn.If);return(0,l.tZ)(Gf,{ref:e,css:[m.l0.position.relative,m.l0.flex.growAndShrink(1)],children:n?(0,l.BX)(l.HY,{children:[(0,l.tZ)(If,{}),r.map((function(e){return(0,l.tZ)(Rc,{handleId:e},e)})),i.map((function(e){return(0,l.tZ)(Uu,{headerId:e},e)})),t.map((function(e){return(0,l.tZ)(cc,{paneId:e},e)})),(0,l.tZ)(Gu,{}),(0,l.tZ)(ip,{})]}):null})}var Nf=function(){var e=null,n=(0,s.useRouter)().query;if(!n.replUrl)throw new Error("Expected replUrl to be set");var t=n.replUrl.toString(),r=(0,h.Cd)({variables:{url:t},ssr:Boolean(n.ssr)}),i=r.data,o=r.loading,a=r.error,u=i&&"Repl"===i.repl.__typename?i.repl:null,d=(null===i||void 0===i?void 0:i.currentUser)||void 0,p=null!=(null===u||void 0===u?void 0:u.lesson),g="https://replit.com".concat(t),Z=function(e){if(e){if(e.description)return e.description;var n=v.Z.get(e.language).displayName;return"A ".concat(n," Repl")}}(u),y=(0,c.useState)(!1),b=y[0],x=y[1];return(0,c.useEffect)((function(){return x(!0)}),[]),(0,Gs.Z)((null===i||void 0===i?void 0:i.repl)||null,t),e=a?(0,l.tZ)(m.G7,{css:[m.l0.center,m.l0.flex.growAndShrink(1)],children:(0,l.tZ)(m.xv,{children:"Something went wrong loading the Repl. Please reload the page and try again."})}):o||!b?(0,l.tZ)(m.G7,{css:[m.l0.center,m.l0.flex.growAndShrink(1)],children:(0,l.tZ)(op.Z,{height:100})}):u&&d?(0,l.tZ)(Uf,{repl:u,currentUser:d},u.id):(0,l.tZ)(m.G7,{css:[m.l0.center,m.l0.flex.growAndShrink(1)],children:(0,l.tZ)(op.Z,{height:100})}),(0,l.tZ)(Br.E,{hideTour:!d||o||p,children:(0,l.tZ)(P.Z,{children:(0,l.tZ)(f.Z,{dataCy:"workspace-page",title:"".concat((null===u||void 0===u?void 0:u.title)||""),oembedUrl:g,description:Z,noHeader:!0,noFooter:!0,forceDrawer:!0,hideSidebar:!0,hideEmailVerify:!0,children:(0,l.tZ)(m.Tg,{css:[m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.height("100vh"),m.l0.width("100vw"),m.l0.overflow("hidden")],children:e})})})})};Nf.getInitialProps=function(){var e=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.req,r=n.store,e.next=3,(0,p.Z)(t,r);case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Af=Nf},7900:function(e,n,t){"use strict";t.d(n,{Pc:function(){return b},Pu:function(){return I}});var r=t(26042),i=t(7297),o=t(31230),a=t(21767);function l(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),u=t(16092),s=t(37887);function d(){var e=(0,i.Z)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},Z=(0,o.Ps)(d()),y=(0,o.Ps)(p(),Z,a.Y),b=(0,o.Ps)(f(),Z),x=(0,o.Ps)(v(),c,u._,y,b),w=(0,o.Ps)(h(),a.Y,x),k=(0,o.Ps)(m(),w);function I(e){var n=(0,r.Z)({},g,e);return s.a(k,n)}}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[3443,2240,6344,6351,2736,8966,4778,5395,5991,8813,7485,5499,3736,4837,1889,1674,6202,6679,2027,617,7975,2995,7046,4718,2350,3497,3576,0,7737,8393,1822,8253,6272,6159,968,9774,2888,179],(function(){return n(25436),n(60937)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=replEnvironment2-8191bc0725ab0090.js.map